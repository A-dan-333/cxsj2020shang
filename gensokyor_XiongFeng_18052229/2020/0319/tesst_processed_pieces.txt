{"2020-01-0": ["This", "commit", "mostly", "either", "enables", "disables", "unittests", "ROCM", "platform", "details", "listed", "adding", "removing", "no_rocm", "tag", "tests", "tensorflow", "compiler", "mlir", "dir", "enabling", "disabling", "subtests", "within", "tensorflow", "core", "grappler", "optimizers", "constant_folding_test", "ROCm", "platform", "disabling", "subtest", "within", "tensorflow", "core", "distributed_runtime", "collective_param_resolver_distributed_test", "fir", "ROCm", "platform", "adding", "no_rocm", "tag", "tests", "failing", "ROCm", "platform", "minor", "bug", "fix", "ensure", "tensorflow", "compiler", "mlir", "tensorflow", "error_util_test", "passes", "consistent", "basis", "-----------------------", "cc", "whchung", "chsigg", "<", "em", ">", "Please", "make", "sure", "bug", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "bug_template", "</", "em", ">", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "No", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "iPAD", "OS", "13", "2", "2", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "iPAD", "Pro", "2018", "TensorFlow", "installed", "(", "source", "binary", "):", "Binary", "(", "TfLiteGPUExperimental", ")", "TensorFlow", "version", "(", "use", "command", "):", "Python", "version", "NA", "Bazel", "version", "(", "compiling", "source", "):", "NA", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "NA", "CUDA", "cuDNN", "version", "NA", "GPU", "model", "memory", "iPAD", "GPU", "You", "collect", "information", "using", "environment", "capture", "[", "script", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "tree", "master", "tools", "tf_env_collect", "sh", ")", "You", "also", "obtain", "TensorFlow", "version", "1", "TF", "1", "0", "`", "python", "c", "import", "tensorflow", "tf", ";", "print", "(", "tf", "GIT_VERSION", "tf", "VERSION", ")\"`", "2", "TF", "2", "0", "`", "python", "c", "import", "tensorflow", "tf", ";", "print", "(", "tf", "version", "GIT_VERSION", "tf", "version", "VERSION", ")\"`", "**", "Describe", "current", "behavior", "**", "When", "running", "model", "iPAD", "using", "CPU", "able", "get", "output", "But", "GPU", "delegate", "get", "error", "following", "error", "_failed", "assertion", "`", "Cannot", "create", "buffer", "zero", "length", "_", "**", "Describe", "expected", "behavior", "**", "No", "error", "**", "Code", "reproduce", "issue", "**", "Provide", "reproducible", "test", "case", "bare", "minimum", "necessary", "generate", "problem", "delegate", "=", "NewGpuDelegate", "(", "nullptr", ");", "interpreter", "->", "ModifyGraphWithDelegate", "(", "delegate", ");", "**", "Other", "info", "logs", "**", "Include", "logs", "source", "code", "would", "helpful", "diagnose", "problem", "If", "including", "tracebacks", "please", "include", "full", "traceback", "Large", "logs", "files", "attached", "hi", "I", "find", "bug", "Code", "import", "tensorflow", "tf", "__name__", "==", "__main__", "':", "def", "Gen", "():", "range", "(", "10", "):", "yield", "(", "2", "3", "4", "5", "6", "7", "8", ")", "dataset", "=", "tf", "data", "Dataset", "from_generator", "(", "Gen", "output_types", "=(", "tf", "float32", "tf", "float32", "tf", "int32", "tf", "int32", "tf", "int32", "tf", "float32", "tf", "int32", "tf", "int32", "),", "output_shapes", "=", "None", "args", "=", "None", ")", "one_batch", "dataset", "print", "('", "one", "batch", "',", "one_batch", ")", "print", "(\"******", "end", "**********\")", "num_gpu", "=", "1", "devices", "=", "['/", "device", "GPU", ":{}'.", "format", "(", ")", "range", "(", "num_gpu", ")]", "strategy", "=", "tf", "distribute", "MirroredStrategy", "(", "devices", ")", "input_context", "=", "tf", "distribute", "InputContext", "(", "num_input_pipelines", "=", "1", "input_pipeline_id", "=", "0", "num_replicas_in_sync", "=", "1", ")", "strategy", "scope", "():", "def", "dataset_fn", "(", "input_context", "):", "dataset", "=", "tf", "data", "Dataset", "from_generator", "(", "Gen", "output_types", "=(", "tf", "float32", "tf", "float32", "tf", "int32", "tf", "int32", "tf", "int32", "tf", "float32", "tf", "int32", "tf", "int32", "),", "output_shapes", "=", "None", "args", "=", "None", ")", "return", "dataset", "shard", "(", "input_context", "num_input_pipelines", "input_context", "input_pipeline_id", ")", "train_dist_dataset", "=", "strategy", "experimental_distribute_datasets_from_function", "(", "dataset_fn", ")", "one_batch", "train_dist_dataset", "print", "('****", "one", "batch", "*******',", "one_batch", ")", "The", "code", "run", "distribut", "one_batch", "train_dist_dataset", ":\"", "end", "batch", "error", "Traceback", "(", "recent", "call", "last", "):", "File", "\"/", "usr", "local", "python35", "lib", "python3", "5", "pdb", "py", "\",", "line", "1665", "main", "pdb", "_runscript", "(", "mainpyfile", ")", "File", "\"/", "usr", "local", "python35", "lib", "python3", "5", "pdb", "py", "\",", "line", "1546", "_runscript", "self", "run", "(", "statement", ")", "File", "\"/", "usr", "local", "python35", "lib", "python3", "5", "bdb", "py", "\",", "line", "431", "run", "exec", "(", "cmd", "globals", "locals", ")", "File", "\"<", "string", ">\",", "line", "1", "<", "module", ">", "File", "\"/", "search", "speech", "hubo", "git", "tf", "code", "acoustics", "tf2", "0", "model", "io_test", "py", "\",", "line", "45", "<", "module", ">", "one_batch", "train_dist_dataset", "File", "\"/", "usr", "local", "python35", "lib", "python3", "5", "site", "packages", "tensorflow_core", "python", "distribute", "input_lib", "py", "\",", "line", "275", "__next__", "return", "self", "get_next", "()", "File", "\"/", "usr", "local", "python35", "lib", "python3", "5", "site", "packages", "tensorflow_core", "python", "distribute", "input_lib", "py", "\",", "line", "304", "get_next", "global_has_value", "replicas", "=", "_get_next_as_optional", "(", "self", "self", "_strategy", ")", "File", "\"/", "usr", "local", "python35", "lib", "python3", "5", "site", "packages", "tensorflow_core", "python", "distribute", "input_lib", "py", "\",", "line", "200", "_get_next_as_optional", "iterator", "_iterators", "[", "].", "get_next_as_list", "(", "new_name", "))", "#", "pylint", "disable", "=", "protected", "access", "File", "\"/", "usr", "local", "python35", "lib", "python3", "5", "site", "packages", "tensorflow_core", "python", "distribute", "input_lib", "py", "\",", "line", "878", "get_next_as_list", "lambda", "_dummy_tensor_fn", "(", "data", "value_structure", "))", "File", "\"/", "usr", "local", "python35", "lib", "python3", "5", "site", "packages", "tensorflow_core", "python", "util", "deprecation", "py", "\",", "line", "507", "new_func", "return", "func", "(*", "args", "**", "kwargs", ")", "File", "\"/", "usr", "local", "python35", "lib", "python3", "5", "site", "packages", "tensorflow_core", "python", "ops", "control_flow_ops", "py", "\",", "line", "1204", "cond", "result", "=", "false_fn", "()", "File", "\"/", "usr", "local", "python35", "lib", "python3", "5", "site", "packages", "tensorflow_core", "python", "distribute", "input_lib", "py", "\",", "line", "878", "<", "lambda", ">", "lambda", "_dummy_tensor_fn", "(", "data", "value_structure", "))", "File", "\"/", "usr", "local", "python35", "lib", "python3", "5", "site", "packages", "tensorflow_core", "python", "distribute", "input_lib", "py", "\",", "line", "801", "_dummy_tensor_fn", "result", "append", "(", "create_dummy_tensor", "(", "feature_shape", "feature_type", "))", "File", "\"/", "usr", "local", "python35", "lib", "python3", "5", "site", "packages", "tensorflow_core", "python", "distribute", "input_lib", "py", "\",", "line", "784", "create_dummy_tensor", "dim", "feature_shape", "dims", "TypeError", "NoneType", "object", "iterable", "Uncaught", "exception", "Entering", "post", "mortem", "debugging", "Running", "cont", "step", "restart", "program", "I", "want", "know", "Getting", "exception", "following", "https", "://", "github", "com", "tensorflow", "examples", "tree", "master", "lite", "examples", "image_classification", "android", "org", "gradle", "api", "InvalidUserDataException", "Cannot", "expand", "TAR", "D", ":\\", "WorkSpaces", "\\", "ML_WorkSpace", "\\", "TF_Android", "\\", "app", "\\", "build", "\\", "intermediates", "\\", "mobilenet_v1_1", "0_224", "tgz", "'.", "org", "gradle", "api", "internal", "file", "archive", "TarFileTree", "cannotExpand", "(", "TarFileTree", "java", "133", ")", "...", "56", "Caused", "org", "gradle", "api", "resources", "ResourceException", "Could", "read", "D", ":\\", "WorkSpaces", "\\", "TF_Android", "\\", "app", "\\", "build", "\\", "intermediates", "\\", "mobilenet_v1_1", "0_224", "tgz", "org", "gradle", "internal", "resource", "ResourceExceptions", "readFailed", "(", "ResourceExceptions", "java", "36", ")", "org", "gradle", "api", "internal", "file", "archive", "compression", "GzipArchiver", "read", "(", "GzipArchiver", "java", "64", ")", "org", "gradle", "api", "internal", "file", "MaybeCompressedFileResource", "read", "(", "MaybeCompressedFileResource", "java", "55", ")", "org", "gradle", "api", "internal", "file", "archive", "TarFileTree", "visit", "(", "TarFileTree", "java", "78", ")", "...", "107", "Caused", "java", "util", "zip", "ZipException", "Not", "GZIP", "format", "java", "util", "zip", "GZIPInputStream", "readHeader", "(", "GZIPInputStream", "java", "165", ")", "org", "gradle", "api", "internal", "file", "archive", "compression", "GzipArchiver", "read", "(", "GzipArchiver", "java", "61", ")", "...", "109", "**", "Don", "know", "could", "problem", "**", "**", "System", "information", "**", "The", "bugs", "related", "system", "informations", "They", "caused", "bad", "coding", "style", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "tensorflow", "core", "kernels", "non_max_suppression_op", "cu", "cc", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "tensorflow", "core", "kernels", "non_max_suppression_op", "cc", "Just", "sure", "bugs", "could", "easily", "reproduced", "google", "colab", "**", "Describe", "current", "behavior", "**", "I", "mention", "two", "major", "bugs", "The", "first", "one", "garbage", "output", "boxes", "coordinates", "logical", "In", "fact", "given", "box", "(", "y1", "x1", "y2", "x2", ")", "coordinates", "y1", "=", "y2", "x1", "=", "x2", "(", "coordinates", "line", ")", "even", "worst", "coordinates", "point", "(", "x1", "=", "x2", "=", "y1", "=", "y2", ")", "algorithme", "output", "line", "reaching", "**", "Code", "reproduce", "issue", "**", "Here", "code", "reproduce", "behaviour", "google", "colab", "```", "import", "numpy", "np", "%", "tensorflow_version", "2", "x", "import", "tensorflow", "tf", "tf", "__version__", "boxes", "=", "np", "array", "([[", "0", "1", "0", "1", "0", "2", "0", "2", "],", "[", "0", "3", "0", "3", "0", "3", "0", "4", "],", "[", "0", "5", "0", "5", "0", "6", "0", "6", "],", "[", "0", "7", "0", "7", "0", "8", "0", "8", "]],", "dtype", "=", "np", "float32", ")", "scores", "=", "np", "array", "([", "0", "9", "0", "8", "0", "7", "0", "6", "],", "dtype", "=", "np", "float32", ")", "(", "tf", "image", "non_max_suppression", "(", "boxes", "scores", "8", "))", "```", "output", "```", "2", "1", "0", "rc1", "<", "tf", "Tensor", "shape", "=(", "8", ",),", "dtype", "=", "int32", "numpy", "=", "array", "([", "0", "1", "1", "1", "1", "1", "1", "1", "],", "dtype", "=", "int32", ")>", "```", "Now", "I", "explain", "brievely", "algorithm", "coded", "tensorflow", "Given", "list", "candidate", "boxes", "containing", "beginning", "user", "boxes", "list", "chosen", "boxes", "empty", "box", "chosen", "immediately", "delete", "candidate", "box", "In", "fact", "box", "processed", "candidate", "box", "next", "iteration", "But", "already", "chosen", "boxes", "wont", "chosen", "The", "reason", "IOU", "box", "1", "always", "threshold", "Unfortunately", "IOU", "line", "point", "box", "0", "This", "applied", "even", "IOU", "calculated", "line", "iteself", "This", "result", "adding", "line", "chosen", "boxes", "This", "behaviour", "mentioned", "issue", "clearly", "explained", "https", "://", "github", "com", "tensorflow", "tensorflow", "issues", "29628", "**", "Describe", "expected", "behavior", "**", "The", "expected", "behaviour", "must", "decided", "tensorflow", "programer", "He", "chose", "putting", "result", "-<", "tf", "Tensor", "shape", "=(", "8", ",),", "dtype", "=", "int32", "numpy", "=", "array", "([", "0", "1", "2", "3", "],", "dtype", "=", "int32", ")>", "deleting", "line", "box", "-<", "tf", "Tensor", "shape", "=(", "8", ",),", "dtype", "=", "int32", "numpy", "=", "array", "([", "0", "2", "3", "],", "dtype", "=", "int32", ")>", "The", "second", "bug", "really", "inexplainable", "Why", "gpu", "specialisation", "non_max_suppression_v2", "Did", "developer", "forgot", "This", "mentioned", "several", "issues", "name", "non", "max", "suppression", "work", "cpu", "This", "completely", "understandable", "default", "version", "non_max_suppression", "v3", "dosent", "gpu", "specialisation", "**", "Code", "reproduce", "issue", "**", "colab", "u", "copy", "code", "```", "import", "numpy", "np", "%", "tensorflow_version", "2", "x", "import", "tensorflow", "tf", "tf", "debugging", "set_log_device_placement", "(", "True", ")", "boxes", "=", "np", "array", "([[", "0", "1", "0", "1", "0", "2", "0", "2", "],", "[", "0", "3", "0", "3", "0", "3", "0", "4", "],", "[", "0", "5", "0", "5", "0", "6", "0", "6", "],", "[", "0", "7", "0", "7", "0", "8", "0", "8", "]],", "dtype", "=", "np", "float32", ")", "scores", "=", "np", "array", "([", "0", "9", "0", "8", "0", "7", "0", "6", "],", "dtype", "=", "np", "float32", ")", "tf", "device", "('/", "GPU", "0", "'):", "print", "(", "tf", "image", "non_max_suppression", "(", "boxes", "scores", "8", "))", "```", "output", ">", "Executing", "op", "NonMaxSuppressionV3", "device", "job", "localhost", "replica", "0", "task", "0", "device", "CPU", "0", ">", "tf", "Tensor", "([", "0", "1", "1", "1", "1", "1", "1", "1", "],", "shape", "=(", "8", ",),", "dtype", "=", "int32", ")", "**", "Describe", "expected", "behavior", "**", ">", "Executing", "op", "NonMaxSuppressionV3", "device", "job", "localhost", "replica", "0", "task", "0", "device", "GPU", "0", "Correcting", "issue", "quite", "simple", "straightforward", "Gpu", "specialisation", "must", "made", "non_max_suppression_v3", "least", "<", "em", ">", "Please", "make", "sure", "build", "installation", "issue", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "build_template", "</", "em", ">", "**", "System", "information", "**", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Raspberry", "pi", "4", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "No", "TensorFlow", "installed", "(", "source", "binary", "):", "binary", "pip", "TensorFlow", "version", "1", "14", "Python", "version", "3", "7", "Installed", "using", "pip", "Bazel", "version", "(", "compiling", "source", "):", "No", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "No", "CUDA", "cuDNN", "version", "No", "GPU", "model", "memory", "No", "**", "Describe", "problem", "**", "****", "pi", "raspberrypi", ":~/", "examples", "lite", "examples", "object_detection", "raspberry_pi", "$", "python3", "detect_picamera", "py", "--", "model", "tmp", "detect", "tflite", "--", "labels", "tmp", "coco_labels", "txt", "2019", "12", "28", "17", "43", "12", "464130", "E", "tensorflow", "core", "platform", "hadoop", "hadoop_file_system", "cc", "132", "]", "HadoopFileSystem", "load", "error", "libhdfs", "cannot", "open", "shared", "object", "file", "No", "file", "directory", "Traceback", "(", "recent", "call", "last", "):", "File", "detect_picamera", "py", "\",", "line", "34", "<", "module", ">", "tf", "lite", "interpreter", "import", "Interpreter", "ModuleNotFoundError", "No", "module", "named", "tf", "***", "**", "Provide", "exact", "sequence", "commands", "steps", "executed", "running", "problem", "**", "***", "Tensorflow", "model", "running", "issue", "replaced", "code", "original", "source", "code", ">", "from_", "tflite_runtime", "interpreter", "import", "Interpreter", "***", "**", "WIth", "**", "***", ">", "tf", "lite", "import", "Interpreter", "***", "**", "Any", "info", "logs", "**", "Include", "logs", "source", "code", "would", "helpful", "diagnose", "problem", "If", "including", "tracebacks", "please", "include", "full", "traceback", "Large", "logs", "files", "attached", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "example", "https", "://", "www", "tensorflow", "org", "tutorials", "text", "image_captioning", "OS", "Platform", "Distribution", "Linux", "Ubuntu", "18", "TensorFlow", "installed", "(", "source", "binary", "):", "bin", "TensorFlow", "version", "(", "use", "command", "):", "v2", "0", "0", "rc2", "26", "g64c3d38", "2", "0", "0", "Python", "version", "3", "6", "8", "**", "Describe", "current", "behavior", "**", ">", "tf", "saved_model", "save", "(", "encoder", "\"./", "models", "1", "encoder", "\")", "model", "get", "serialized", "errors", "**", "Describe", "expected", "behavior", "**", "encoder", "loaded", "without", "errors", "**", "Code", "reproduce", "issue", "**", "train", "model", "https", "://", "www", "tensorflow", "org", "tutorials", "text", "image_captioning", "example", "```", "tf", "saved_model", "save", "(", "encoder", "\"./", "models", "1", "encoder", "\")", "encoder", "=", "tf", "saved_model", "load", "(\"./", "models", "1", "encoder", "\")", "encoder", "(", "img_tensor_val", ")", "```", "raises", "error", ">", "_UserObject", "object", "callable", "`", "encoder", "fc", "(", "img_tensor_val", ")", "`", "ValueError", "Could", "find", "matching", "function", "call", "loaded", "SavedModel", "Got", "Positional", "arguments", "(", "1", "total", "):", "Tensor", "(\"", "inputs", "0", "\",", "shape", "=(", "1", "120", "64", "),", "dtype", "=", "float32", ")", "Keyword", "arguments", "{}", "Expected", "arguments", "match", "one", "following", "0", "option", "(", "):", "**", "Other", "info", "logs", "**", "W1227", "00", "41", "32", "831883", "139767989909312", "save_impl", "py", "77", "]", "Skipping", "full", "serialization", "Keras", "model", "<", "__main__", "CNN_Encoder", "object", "0x7f1daf5354e0", ">,", "inputs", "defined", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "```", "java", "private", "List", "<", "Delegate", ">", "mDelegates", "=", "new", "ArrayList", "<>();", "mDelegates", "add", "(", "new", "GpuDelegate", "());", "```", "```", "java", "Interpreter", "Options", "options", "=", "null", ";", "(", "interpreterOptions", "!=", "null", ")", "{", "options", "=", "new", "Interpreter", "Options", "().", "setNumThreads", "(", "interpreterOptions", "getNumThreads", "());", "}", "(!", "mDelegates", "isEmpty", "())", "{", "Iterator", "<", "Delegate", ">", "=", "mDelegates", "iterator", "();", "(", "hasNext", "())", "{", "Delegate", "delegate", "=", "next", "();", "mLogger", "debug", "(\"", "addDelegate", "delegate", ");", "options", "addDelegate", "(", "delegate", ");", "}", "}", "mInterpreter", "=", "new", "Interpreter", "(", "bb", "options", ");", "```", "Mobile", "device", "MI", "8", "MIUI", "11", "0", "4", "TensorFlow", "installed", "(", "source", "binary", "):", "implementation", "org", "tensorflow", "tensorflow", "lite", "2", "0", "0", "implementation", "org", "tensorflow", "tensorflow", "lite", "gpu", "2", "0", "0", "**", "Describe", "current", "behavior", "**", "crashed", "load", "attached", "file", "GpuDelegate", "**", "Describe", "expected", "behavior", "**", "load", "attached", "file", "correct", "**", "Code", "reproduce", "issue", "**", "N", "A", "**", "Other", "info", "logs", "**", "```", "text", "java", "lang", "IllegalStateException", "Internal", "error", "Unexpected", "failure", "preparing", "tensor", "allocations", "TfLiteGpuDelegate", "Init", "FULLY_CONNECTED", "Amount", "input", "data", "match", "weights", "width", "TfLiteGpuDelegate", "Prepare", "delegate", "initialized", "Node", "number", "3", "(", "TfLiteGpuDelegateV2", ")", "failed", "prepare", "Restored", "previous", "execution", "plan", "delegate", "application", "failure", "org", "tensorflow", "lite", "NativeInterpreterWrapper", "allocateTensors", "(", "Native", "Method", ")", "org", "tensorflow", "lite", "NativeInterpreterWrapper", "run", "(", "NativeInterpreterWrapper", "java", "162", ")", "org", "tensorflow", "lite", "Interpreter", "runForMultipleInputsOutputs", "(", "Interpreter", "java", "275", ")", "com", "didi", "aoe", "runtime", "tensorflow", "lite", "TensorFlowMultipleInputsOutputsInterpreter", "run", "(", "TensorFlowMultipleInputsOutputsInterpreter", "java", "159", ")", "com", "didi", "aoe", "library", "core", "NativeProcessorWrapper", "run", "(", "NativeProcessorWrapper", "java", "40", ")", "```", "[", "mnist_cnn_keras", "tflite", "zip", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "files", "4004963", "mnist_cnn_keras", "tflite", "zip", ")", "<", "em", ">", "Please", "make", "sure", "build", "installation", "issue", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "build_template", "</", "em", ">", "**", "System", "information", "**", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Ubuntu", "19", "0", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "TensorFlow", "installed", "(", "source", "binary", "):", "Source", "TensorFlow", "version", "2", "0", "Python", "version", "3", "7", "4", "Installed", "using", "virtualenv", "pip", "conda", "pip", "Bazel", "version", "(", "compiling", "source", "):", "1", "1", "0", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "8", "3", "0", "CUDA", "cuDNN", "version", "n", "GPU", "model", "memory", "n", "**", "Describe", "problem", "**", "**", "Provide", "exact", "sequence", "commands", "steps", "executed", "running", "problem", "**", "After", "20", "minutes", "watching", "code", "build", "build", "stopped", "abruptly", "**", "Any", "info", "logs", "**", "Here", "link", "enviorment", "run", "exact", "dev", "env", "cloud", "https", "://", "gitpod", "io", "/#", "https", "://", "github", "com", "JesterOrNot", "tensorflow", "tree", "JesterOrNot", "gitpod", "setup", "```", "./", "tensorflow", "python", "lib", "core", "pybind11_proto", "h", "40", "44", "warning", "pybind11", "::", "str", "pybind11", "::", "detail", "::", "object_api", "<", "Derived", ">::", "str", "()", "const", "[", "wi", "th", "Derived", "=", "pybind11", "::", "handle", "]'", "deprecated", "Use", "py", "::", "str", "(", "obj", ")", "instead", "[-", "Wdeprecated", "declarations", "]", "std", "::", "string", "(", "py_object", "get_type", "().", "str", "()),", "valid", "proto", "\"));", "^", "In", "file", "included", "external", "pybind11", "include", "pybind11", "cast", "h", "13", "external", "pybind11", "include", "pybind11", "attr", "h", "13", "external", "pybind11", "include", "pybind11", "pybind11", "h", "49", "tensorflow", "python", "client", "device_lib_wrapper", "cc", "18", "external", "pybind11", "include", "pybind11", "pytypes", "h", "147", "19", "note", "declared", "pybind11", "::", "str", "str", "()", "const", ";", "^~~", "INFO", "From", "Compiling", "tensorflow", "stream_executor", "stream_executor_pimpl", "cc", "[", "host", "]:", "tensorflow", "stream_executor", "stream_executor_pimpl", "cc", "In", "member", "function", "stream_executor", "::", "DeviceMemoryBase", "stream_executor", "::", "StreamE", "xecutor", "::", "Allocate", "(", "tensorflow", "::", "uint64", "tensorflow", "::", "int64", ")':", "tensorflow", "stream_executor", "stream_executor_pimpl", "cc", "462", "31", "warning", "comparison", "integer", "expressions", "different", "signedness", "lo", "ng", "long", "unsigned", "int", "tensorflow", "::", "int64", "{", "aka", "long", "long", "int", "'}", "[-", "Wsign", "compare", "]", "mem_alloc_bytes_", "size", ">", "memory_limit_bytes_", ")", "{", "~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~", "In", "file", "included", "./", "tensorflow", "core", "platform", "default", "logging", "h", "29", "./", "tensorflow", "core", "platform", "logging", "h", "27", "./", "tensorflow", "core", "platform", "status", "h", "24", "./", "tensorflow", "core", "platform", "errors", "h", "22", "./", "tensorflow", "core", "lib", "core", "errors", "h", "19", "./", "tensorflow", "stream_executor", "device_memory_allocator", "h", "23", "./", "tensorflow", "stream_executor", "stream_executor_pimpl", "h", "28", "tensorflow", "stream_executor", "stream_executor_pimpl", "cc", "20", "./", "tensorflow", "core", "platform", "default", "logging", "h", "In", "instantiation", "std", "::", "__cxx11", "::", "string", "tensorflow", "::", "internal", "::", "Check_EQImpl", "(", "const", "T1", "&,", "const", "T2", "&,", "const", "char", "*)", "[", "T1", "=", "int", ";", "T2", "=", "long", "long", "unsigned", "int", ";", "std", "::", "__cxx11", "::", "string", "=", "std", "::", "__cxx11", "::", "basic_string", "<", "char", ">]':", "tensorflow", "stream_executor", "stream_executor_pimpl", "cc", "700", "3", "required", "./", "tensorflow", "core", "platform", "default", "logging", "h", "386", "25", "warning", "comparison", "integer", "expressions", "different", "signedness", "const", "int", "const", "long", "long", "unsigned", "int", "[-", "Wsign", "compare", "]", "==)", "Compilation", "error", "CHECK_EQ", "(", "NULL", "x", ")?", "./", "tensorflow", "core", "platform", "macros", "h", "88", "49", "note", "definition", "macro", "TF_PREDICT_TRUE", "#", "define", "TF_PREDICT_TRUE", "(", "x", ")", "(", "__builtin_expect", "(!!", "(", "x", "),", "1", "))", "^", "./", "tensorflow", "core", "platform", "default", "logging", "h", "385", "1", "note", "expansion", "macro", "TF_DEFINE_CHECK_OP_IMPL", "TF_DEFINE_CHECK_OP_IMPL", "(", "Check_EQ", "^~~~~~~~~~~~~~~~~~~~~~~", "INFO", "From", "Compiling", "tensorflow", "compiler", "mlir", "tensorflow", "utils", "tpu_rewrite_device_util", "cc", "[", "host", "]:", "tensorflow", "compiler", "mlir", "tensorflow", "utils", "tpu_rewrite_device_util", "cc", "In", "function", "tensorflow", "::", "Status", "tensorflow", "::{", "anonymous", "}::", "GetT", "PUDevices", "(", "tensorflow", "::", "Devices", "llvm", "::", "ArrayRef", "<", "tensorflow", "::", "DeviceNameUtils", "::", "ParsedName", ">,", "llvm", "::", "SmallVectorImpl", "<", "llvm", "::", "SmallVector", "<", "ten", "sorflow", "::", "DeviceNameUtils", "::", "ParsedName", "8", ">", ">*)':", "tensorflow", "compiler", "mlir", "tensorflow", "utils", "tpu_rewrite_device_util", "cc", "129", "27", "warning", "comparison", "integer", "expressions", "differen", "signedness", "int", "size_t", "{", "aka", "long", "unsigned", "int", "'}", "[-", "Wsign", "compare", "]", "(", "num_tpus_per_host", "!=", "host_tpu_devices", "size", "())", "~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~", "INFO", "From", "Compiling", "tensorflow", "core", "kernels", "quantization_utils", "cc", "[", "host", "]:", "In", "file", "included", "external", "gemmlowp", "public", "/../", "internal", "dispatch_gemm_shape", "h", "23", "external", "gemmlowp", "public", "gemmlowp", "h", "19", "./", "tensorflow", "core", "kernels", "quantization_utils", "h", "37", "tensorflow", "core", "kernels", "quantization_utils", "cc", "16", "external", "gemmlowp", "public", "/../", "internal", "multi_thread_gemm", "h", "In", "member", "function", "void", "gemmlowp", "::", "WorkersPool", "::", "LegacyExecuteAndDestroyTa", "sks", "(", "const", "std", "::", "vector", "<", "gemmlowp", "::", "Task", "*>&)':", "external", "gemmlowp", "public", "/../", "internal", "multi_thread_gemm", "h", "405", "23", "warning", "comparison", "integer", "expressions", "different", "signedness", "int", "std", "::", "size_t", "{", "aka", "long", "unsigned", "int", "'}", "[-", "Wsign", "compare", "]", "(", "int", "=", "0", ";", "<", "tasks_count", "1", ";", "++)", "{", "~~^~~~~~~~~~~~~~~~~", "In", "file", "included", "tensorflow", "core", "kernels", "quantization_utils", "cc", "16", "./", "tensorflow", "core", "kernels", "quantization_utils", "h", "In", "function", "void", "tensorflow", "::", "RequantizeManyInNewRangeReference", "(", "const", "qint32", "*,", "tensorflow", "::", "int64", "float", "float", "float", "float", "tensorflow", "::", "quint8", "*)':", "./", "tensorflow", "core", "kernels", "quantization_utils", "h", "271", "32", "warning", "comparison", "integer", "expressions", "different", "signedness", "size_t", "{", "aka", "long", "unsigned", "int", "'}", "tensorflow", "::", "int64", "{", "aka", "long", "long", "int", "'}", "[-", "Wsign", "compare", "]", "(", "size_t", "index", "=", "0", ";", "index", "<", "count", ";", "++", "index", ")", "{", "~~~~~~^~~~~~~", "[", "6", "434", "12", "032", "]", "16", "actions", "running", "Compiling", "tensorflow", "python", "tfe_wrapper", "cc", "[", "host", "];", "77s", "local", "Compiling", "tensorflow", "core", "kernels", "rnn", "lstm_ops", "cc", "[", "host", "];", "44s", "local", "Compiling", "tensorflow", "core", "kernels", "rnn", "gru_ops", "cc", "[", "host", "];", "43s", "local", "Compiling", "tensorflow", "stream_executor", "stream", "cc", "[", "host", "];", "41s", "local", "Compiling", "tensorflow", "core", "kernels", "split_lib_cpu", "cc", "[", "host", "];", "28s", "local", "Compiling", ".../", "core", "kernels", "serialize_sparse_op", "cc", "[", "host", "];", "24s", "local", "tensorflow", "core", "kernels", "deserialize_sparse_string_op", ";", "22s", "local", "Compiling", ".../", "core", "kernels", "sparse_reorder_op", "cc", "[", "host", "];", "22s", "local", "...", "Server", "terminated", "abruptly", "(", "error", "code", "14", "error", "message", "Socket", "closed", "',", "log", "file", "'/", "home", "gitpod", "/.", "cache", "bazel", "_bazel_gitpod", "2c92b5569ddded7b3a6bd5e139451b60", "server", "jvm", "```", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "yes", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Ubuntu", "18", "04", "3", "LTS", "TensorFlow", "installed", "(", "source", "binary", "):", "binary", "TensorFlow", "version", "(", "use", "command", "):", "v2", "1", "0", "rc1", "58", "g9837ece", "2", "1", "0", "rc2", "(", "python3", "c", "import", "tensorflow", "tf", ";", "print", "(", "tf", "version", "GIT_VERSION", "tf", "version", "VERSION", ")\")", "Python", "version", "Python", "3", "6", "8", "CUDA", "cuDNN", "version", "Driver", "Version", "440", "33", "01", "CUDA", "Version", "10", "2", "cuDNN", "7", "6", "2", "GPU", "model", "memory", "Tesla", "V100", "SXM2", "16GB", "**", "Describe", "current", "behavior", "**", "I", "using", "Bijectors", "flexible", "prior", "VAE", "In", "tf2", "1", "autograph", "distributed", "mirrored", "mode", "https", "://", "github", "com", "olegmyrk", "SPADE", "Tensorflow", "blob", "85b5fd7943296561dc3d54557fec5346c2adea58", "SPADE", "py", "#", "L1152", "I", "getting", "```", "google", "protobuf", "message", "DecodeError", "Error", "parsing", "message", "```", "running", "multiple", "GPUs", "(", "running", "single", "GPU", "):", "```", "bijectors", "=", "[]", "range", "(", "16", "):", "bijectors", "append", "(", "tfb", "MaskedAutoregressiveFlow", "(", "shift_and_log_scale_fn", "=", "tfb", "masked_autoregressive_default_template", "(", "code", "hidden_layers", "=[", "1024", "1024", "],", "name", "=", "scope", "\"/", "maf_", "str", "(", "))))", "bijectors", "append", "(", "tfb", "BatchNormalization", "(", "batchnorm_layer", "=", "tf", "layers", "BatchNormalization", "(", "name", "=", "scope", "'/", "batch_norm_", "str", "(", ")),", "name", "=", "scope", "'/", "batch_norm_bijector", "str", "(", ")))", "permutation", "=", "tf", "get_variable", "('", "permutation_", "'+", "str", "(", "),", "initializer", "=", "np", "random", "permutation", "(", "out_channel", ").", "astype", "(\"", "int32", "\"),", "trainable", "=", "False", ")", "bijectors", "append", "(", "tfb", "Permute", "(", "permutation", "))", "flow_bijector", "=", "tfb", "Chain", "(", "list", "(", "reversed", "(", "bijectors", "[:-", "1", "])))", "```", "https", "://", "github", "com", "olegmyrk", "SPADE", "Tensorflow", "blob", "85b5fd7943296561dc3d54557fec5346c2adea58", "SPADE", "py", "#", "L190", "**", "Describe", "expected", "behavior", "**", "Should", "crash", "**", "Code", "reproduce", "issue", "**", "TF2", "x", "code", "https", "://", "github", "com", "olegmyrk", "SPADE", "Tensorflow", "blob", "85b5fd7943296561dc3d54557fec5346c2adea58", "SPADE", "py", "#", "L190", "**", "Other", "info", "logs", "**", "```", "Traceback", "(", "recent", "call", "last", "):", "File", "main", "py", "\",", "line", "134", "<", "module", ">", "main", "()", "File", "main", "py", "\",", "line", "121", "main", "gan", "train", "()", "File", "\"/", "app", "home", "ubuntu", "SPADE", "Tensorflow", "tf2", "SPADE", "py", "\",", "line", "1379", "train", "train_loop", "()", "File", "\"/", "app", "home", "ubuntu", "SPADE", "Tensorflow", "tf2", "SPADE", "py", "\",", "line", "1336", "train_loop", "counter", "result_inputs", "result_losses_det", "result_outputs_det", "result_outputs_resample_det", "result_outputs_random_det", "result_outputs_random_gen_det", "=", "train_det_grad_both", "(", "global_step", "self", "train_main", "inputs", ")", "File", "\"/", "home", "ubuntu", "/.", "local", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "def_function", "py", "\",", "line", "568", "__call__", "result", "=", "self", "_call", "(*", "args", "**", "kwds", ")", "File", "\"/", "home", "ubuntu", "/.", "local", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "def_function", "py", "\",", "line", "615", "_call", "self", "_initialize", "(", "args", "kwds", "add_initializers_to", "=", "initializers", ")", "File", "\"/", "home", "ubuntu", "/.", "local", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "def_function", "py", "\",", "line", "497", "_initialize", "args", "**", "kwds", "))", "File", "\"/", "home", "ubuntu", "/.", "local", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "2389", "_get_concrete_function_internal_garbage_collected", "graph_function", "_", "_", "=", "self", "_maybe_define_function", "(", "args", "kwargs", ")", "File", "\"/", "home", "ubuntu", "/.", "local", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "2703", "_maybe_define_function", "graph_function", "=", "self", "_create_graph_function", "(", "args", "kwargs", ")", "File", "\"/", "home", "ubuntu", "/.", "local", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "2599", "_create_graph_function", "shared_func_graph", "=", "False", ")", "File", "\"/", "home", "ubuntu", "/.", "local", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "1511", "__init__", "func_graph", "self", "_attrs", "self", "_garbage_collector", ")", "File", "\"/", "home", "ubuntu", "/.", "local", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "601", "__init__", "self", "_func_graph", "inputs", "self", "_func_graph", "outputs", "attrs", ")", "File", "\"/", "home", "ubuntu", "/.", "local", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "466", "__init__", "function_def", "ParseFromString", "(", "compat", "as_bytes", "(", "proto_data", "))", "google", "protobuf", "message", "DecodeError", "Error", "parsing", "message", "```", "[", "train", "CelebAMask", "HQ", "tf21", "4xgpu", "maf", "log", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "files", "4001259", "train", "CelebAMask", "HQ", "tf21", "4xgpu", "maf", "log", ")", "**", "System", "information", "**", "OS", "Platform", "Distribution", "Windows10", "x64", "TensorFlow", "installed", "binary", "TensorFlow", "version", "1", "15", "0", "Python", "version", "3", "7", "Installed", "using", "conda", "Bazel", "version", "(", "compiling", "source", "):", "1", "1", "2", "0", "CUDA", "cuDNN", "version", "10", "0", "I", "trying", "inspect", "model", "following", "guide", "[", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "tensorflow", "tools", "graph_transforms", "README", "md", "#", "inspecting", "graphs", ")", "When", "running", "command", "```", "bash", "bazel", "build", "tensorflow", "tools", "graph_transforms", "summarize_graph", "```", "failed", "logs", "```", "INFO", "Writing", "tracer", "profile", "C", ":/", "users", "yy", "_bazel_yy", "zxtlmlwl", "command", "profile", "gz", "INFO", "Options", "provided", "client", "Inherited", "common", "options", "--", "isatty", "=", "1", "--", "terminal_columns", "=", "120", "INFO", "Options", "provided", "client", "build", "options", "--", "python_path", "=", "C", ":/", "Users", "YY", "Anaconda3", "python", "exe", "INFO", "Reading", "rc", "options", "build", "e", ":\\", "tensorflow", "\\", "tensorflow", "\\.", "bazelrc", "build", "options", "--", "apple_platform_type", "=", "macos", "--", "define", "framework_shared_object", "=", "true", "--", "define", "open_source_build", "=", "true", "--", "java_toolchain", "=//", "third_party", "toolchains", "java", "tf_java_toolchain", "--", "host_java_toolchain", "=//", "third_party", "toolchains", "java", "tf_java_toolchain", "--", "define", "=", "use_fast_cpp_protos", "=", "true", "--", "define", "=", "allow_oversize_protos", "=", "true", "--", "spawn_strategy", "=", "standalone", "c", "opt", "--", "announce_rc", "--", "define", "=", "grpc_no_ares", "=", "true", "--", "noincompatible_remove_legacy_whole_archive", "--", "enable_platform_specific_config", "--", "config", "=", "v2", "INFO", "Found", "applicable", "config", "definition", "build", "v2", "file", "e", ":\\", "tensorflow", "\\", "tensorflow", "\\.", "bazelrc", "--", "define", "=", "tf_api_version", "=", "2", "--", "action_env", "=", "TF2_BEHAVIOR", "=", "1", "INFO", "Found", "applicable", "config", "definition", "build", "windows", "file", "e", ":\\", "tensorflow", "\\", "tensorflow", "\\.", "bazelrc", "--", "copt", "=/", "w", "--", "copt", "=/", "D_USE_MATH_DEFINES", "--", "cxxopt", "=/", "std", "c", "++", "14", "--", "host_cxxopt", "=/", "std", "c", "++", "14", "--", "config", "=", "monolithic", "--", "copt", "=-", "DWIN32_LEAN_AND_MEAN", "--", "host_copt", "=-", "DWIN32_LEAN_AND_MEAN", "--", "copt", "=-", "DNOGDI", "--", "host_copt", "=-", "DNOGDI", "--", "linkopt", "=/", "DEBUG", "--", "host_linkopt", "=/", "DEBUG", "--", "linkopt", "=/", "OPT", "REF", "--", "host_linkopt", "=/", "OPT", "REF", "--", "linkopt", "=/", "OPT", "ICF", "--", "host_linkopt", "=/", "OPT", "ICF", "--", "experimental_strict_action_env", "=", "true", "--", "incompatible_windows_native_test_wrapper", "--", "verbose_failures", "--", "distinct_host_configuration", "=", "false", "INFO", "Found", "applicable", "config", "definition", "build", "monolithic", "file", "e", ":\\", "tensorflow", "\\", "tensorflow", "\\.", "bazelrc", "--", "define", "framework_shared_object", "=", "false", "INFO", "Call", "stack", "definition", "repository", "com_google_protobuf", "tf_http_archive", "(", "rule", "definition", "E", ":/", "tensorflow", "tensorflow", "third_party", "repo", "bzl", "121", "19", "):", "E", ":/", "tensorflow", "tensorflow", "tensorflow", "workspace", "bzl", "457", "5", "E", ":/", "tensorflow", "tensorflow", "WORKSPACE", "19", "1", "INFO", "Repository", "com_google_protobuf", "used", "following", "cache", "hits", "instead", "downloading", "corresponding", "file", "Hash", "b9e92f9af8819bbbc514e2902aec860415b70209f31dfc8c4fa72515a5df9d59", "https", "://", "storage", "googleapis", "com", "mirror", "tensorflow", "org", "github", "com", "protocolbuffers", "protobuf", "archive", "310ba5ee72661c081129eb878c1bbcec936b20f0", "tar", "gz", "If", "definition", "com_google_protobuf", "updated", "verify", "hashes", "also", "updated", "ERROR", "An", "error", "occurred", "fetch", "repository", "com_google_protobuf", "':", "Traceback", "(", "recent", "call", "last", "):", "File", "E", ":/", "tensorflow", "tensorflow", "third_party", "repo", "bzl", "\",", "line", "101", "_apply_patch", "(", "ctx", "<", "1", "arguments", ">)", "File", "E", ":/", "tensorflow", "tensorflow", "third_party", "repo", "bzl", "\",", "line", "68", "_apply_patch", "_execute_and_check_ret_code", "(", "ctx", "<", "1", "arguments", ">)", "File", "E", ":/", "tensorflow", "tensorflow", "third_party", "repo", "bzl", "\",", "line", "52", "_execute_and_check_ret_code", "fail", "(<", "1", "arguments", ">)", "Non", "zero", "return", "code", "(", "2", ")", "executing", "C", ":\\", "Windows", "\\", "system32", "\\", "bash", "exe", "l", "c", "patch", "\"-", "p1", "\"-", "C", ":/", "users", "yy", "_bazel_yy", "zxtlmlwl", "external", "com_google_protobuf", "\"-", "E", ":/", "tensorflow", "tensorflow", "third_party", "protobuf", "protobuf", "patch", "\"':", "Stdout", "Stderr", "patch", "****", "Can", "change", "directory", "C", ":/", "users", "yy", "_bazel_yy", "zxtlmlwl", "external", "com_google_protobuf", "No", "file", "directory", "ERROR", "Analysis", "target", "'//", "tensorflow", "tools", "graph_transforms", "summarize_graph", "failed", ";", "build", "aborted", "package", "'@", "com_google_protobuf", "//':", "Traceback", "(", "recent", "call", "last", "):", "File", "E", ":/", "tensorflow", "tensorflow", "third_party", "repo", "bzl", "\",", "line", "101", "_apply_patch", "(", "ctx", "<", "1", "arguments", ">)", "File", "E", ":/", "tensorflow", "tensorflow", "third_party", "repo", "bzl", "\",", "line", "68", "_apply_patch", "_execute_and_check_ret_code", "(", "ctx", "<", "1", "arguments", ">)", "File", "E", ":/", "tensorflow", "tensorflow", "third_party", "repo", "bzl", "\",", "line", "52", "_execute_and_check_ret_code", "fail", "(<", "1", "arguments", ">)", "Non", "zero", "return", "code", "(", "2", ")", "executing", "C", ":\\", "Windows", "\\", "system32", "\\", "bash", "exe", "l", "c", "patch", "\"-", "p1", "\"-", "C", ":/", "users", "yy", "_bazel_yy", "zxtlmlwl", "external", "com_google_protobuf", "\"-", "E", ":/", "tensorflow", "tensorflow", "third_party", "protobuf", "protobuf", "patch", "\"':", "Stdout", "Stderr", "patch", "****", "Can", "change", "directory", "C", ":/", "users", "yy", "_bazel_yy", "zxtlmlwl", "external", "com_google_protobuf", "No", "file", "directory", "INFO", "Elapsed", "time", "3", "975s", "INFO", "0", "processes", "FAILED", "Build", "NOT", "complete", "successfully", "(", "0", "packages", "loaded", "0", "targets", "configured", ")", "currently", "loading", "tensorflow", "```", "I", "tried", "diferent", "versions", "bazel", "0", "20", "1", "1", "0", "2", "0", "0", "\uff0c", "```", "bazel", "clean", "```,", "error", "still", "What", "makes", "confused", "Can", "change", "directory", "C", ":/", "users", "yy", "_bazel_yy", "zxtlmlwl", "external", "com_google_protobuf", "No", "file", "directory", "\",", "fact", "I", "find", "dir", "path", "I", "checked", "similar", "issue", "none", "fix", "error", "I", "see", "many", "users", "last", "2", "weeks", "struggling", "getting", "build", "work", "Windows", "10", "I", "also", "see", "**", "recent", "commits", "**", "improve", "build", "response", "feedback", "As", "[", "stated", "](", "https", "://", "www", "tensorflow", "org", "install", "source_windows", ")", "Windows", "tensorflow", "2", "0", "builds", "following", "configurations", "successful", "[", "image", "](", "https", "://", "user", "images", "githubusercontent", "com", "59223977", "71443261", "34f74d00", "270a", "11ea", "8cc5", "ee2902f336b8", "png", ")", "[", "image", "](", "https", "://", "user", "images", "githubusercontent", "com", "59223977", "71443269", "44769600", "270a", "11ea", "8857", "750f7f3598ee", "png", ")", "Please", "**", "update", "**", "[", "links", "](", "https", "://", "www", "tensorflow", "org", "install", "lang_c", ")", "successful", "windows", "tensorflow", "2", "0", "builds", "provided", "For", "example", "need", "https", "://", "storage", "googleapis", "com", "tensorflow", "libtensorflow", "libtensorflow", "cpu", "windows", "x86_64", "2", "0", "0", "zip", "https", "://", "storage", "googleapis", "com", "tensorflow", "libtensorflow", "libtensorflow", "gpu", "windows", "x86_64", "2", "0", "0", "zip", "_Although", "tentative", "builds", "old_", "provide", "starting", "point", "**", "start", "TESTING", "Tensorflow", "2", "0", "features", "bindings", "**", "**", "System", "information", "**", "TensorFlow", "version", "(", "using", "):", "1", "15", ">=", "2", "0", "Are", "willing", "contribute", "(", "Yes", "No", "):", "Yes", "**", "Describe", "feature", "current", "behavior", "state", "**", "Add", "SO_REUSEPORT", "option", "starting", "tensorflow", "training", "server", "It", "enable", "scan", "ports", "build", "TF_CONFIG", "env", "variable", "It", "necessary", "use", "distributed", "tensorflow", "resource", "managers", "reserve", "ports", "(", "Yarn", ").", "It", "already", "discussed", "ticket", "https", "://", "github", "com", "tensorflow", "tensorflow", "issues", "21492", "It", "unclear", "option", "disabled", "https", "://", "github", "com", "tensorflow", "tensorflow", "commit", "8cf38e81e638db173238a8f95d6ea613c24d3d9f", "**", "Will", "change", "current", "api", "How", "**", "No", "**", "Who", "benefit", "feature", "**", "Projects", "like", "https", "://", "github", "com", "criteo", "tf", "yarn", "(", "tensorflow", "yarn", ")", "use", "implement", "recommended", "way", "create", "cluster", "configuration", "(", "https", "://", "www", "tensorflow", "org", "guide", "distributed_training", "):", "The", "procedure", "Launch", "executors", "process", "scan", "ports", "reserve", "free", "one", "A", "master", "gathers", "ports", "numbers", "Master", "creates", "configuration", "broadcasts", "TF_CONFIG", "variable", "executors", "Launch", "tensorflow", "servers", "**", "Any", "Other", "info", "**", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "Yes", "OS", "Platform", "Distribution", "(", "Android7", "1", "Snapdragon", "625", "):", "Mobile", "device", "(", "HUAWEI", "Nova", "CAZ", "AL", "10", ")", "issue", "happens", "mobile", "device", "TensorFlow", "installed", "(", "source", "):", "TensorFlow", "version", "(", "org", "tensorflow", "tensorflow", "lite", "gpu", "0", "0", "0", "nightly", "):", "**", "Describe", "current", "behavior", "**", "I", "use", "**", "yolov3", "**", "model", "android", "platform", "object", "detection", "When", "I", "object", "detection", "CPU", "results", "right", "I", "add", "GPU", "module", "results", "totally", "different", "**", "Code", "reproduce", "issue", "**", "/**", "Wrapper", "frozen", "detection", "models", "trained", "using", "Tensorflow", "Object", "Detection", "API", "github", "com", "tensorflow", "models", "tree", "master", "research", "object_detection", "*/", "public", "class", "TFLitePanoObjectDetectionAPIModel", "implements", "Classifier", "{", "private", "static", "final", "Logger", "LOGGER", "=", "new", "Logger", "();", "private", "static", "final", "int", "NUM_of_classes", "=", "19", ";", "private", "static", "final", "int", "NUM_THREADS", "=", "4", ";", "private", "boolean", "isModelQuantized", ";", "private", "int", "inputSize", ";", "private", "Vector", "<", "String", ">", "labels", "=", "new", "Vector", "<", "String", ">();", "private", "int", "[]", "intValues", ";", "private", "float", "[][][][]", "output_1", ";", "private", "float", "[][][][]", "output_2", ";", "private", "float", "[][][][]", "output_3", ";", "private", "ByteBuffer", "imgData", ";", "private", "Interpreter", "tflite", ";", "private", "MappedByteBuffer", "tfliteModel", ";", "private", "final", "Interpreter", "Options", "tfliteOptions", "=", "new", "Interpreter", "Options", "();", "private", "GpuDelegate", "gpuDelegate", "=", "null", ";", "private", "NnApiDelegate", "nnapiDelegate", "=", "null", ";", "private", "int", "gridNum", ";", "private", "int", "BoxNum_each_gird", "=", "3", ";", "private", "float", "[][][][]", "floatValues", ";", "private", "TFLitePanoObjectDetectionAPIModel", "()", "{}", "private", "float", "scoreThreshold", "=", "0", "3f", ";", "private", "int", "blockSize", "=", "32", ";", "public", "static", "Classifier", "create", "(", "final", "AssetManager", "assetManager", "final", "String", "modelFilename", "final", "String", "labelFilename", "final", "int", "inputSize", "final", "boolean", "isQuantized", ")", "throws", "IOException", "{", "final", "TFLitePanoObjectDetectionAPIModel", "=", "new", "TFLitePanoObjectDetectionAPIModel", "();", "try", "{", "tfliteModel", "=", "loadModelFile", "(", "assetManager", "modelFilename", ");", "(", "gpuDelegate", "==", "null", ")", "{", "gpuDelegate", "=", "new", "GpuDelegate", "();", "tfliteOptions", "addDelegate", "(", "gpuDelegate", ");", "}", "tflite", "=", "new", "Interpreter", "(", "tfliteModel", "tfliteOptions", ");", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ");", "}", "isModelQuantized", "=", "isQuantized", ";", "Pre", "allocate", "buffers", "int", "numBytesPerChannel", ";", "(", "isQuantized", ")", "{", "numBytesPerChannel", "=", "1", ";", "Quantized", "}", "else", "{", "numBytesPerChannel", "=", "4", ";", "Floating", "point", "}", "imgData", "=", "ByteBuffer", "allocateDirect", "(", "1", "inputSize", "2", "inputSize", "3", "numBytesPerChannel", ");//", "imgData", "order", "(", "ByteOrder", "nativeOrder", "());", "intValues", "=", "new", "int", "[", "inputSize", "2", "inputSize", "];", "gridNum", "=", "inputSize", "32", ";", "floatValues", "=", "new", "float", "[", "1", "][", "inputSize", "][", "2", "inputSize", "][", "3", "];", "output_1", "=", "new", "float", "[", "1", "][][][];", "output_2", "=", "new", "float", "[", "1", "][][][];", "output_3", "=", "new", "float", "[", "1", "][][][];", "return", ";", "}", "}", "Override", "public", "List", "<", "Recognition", ">", "recognizeImage", "(", "final", "Bitmap", "bitmap", ")", "{", "bitmap", "getPixels", "(", "intValues", "0", "bitmap", "getWidth", "(),", "0", "0", "bitmap", "getWidth", "(),", "bitmap", "getHeight", "());", "imgData", "rewind", "();", "(", "int", "=", "0", ";", "<", "inputSize", ";", "++", ")", "{", "(", "int", "j", "=", "0", ";", "j", "<", "2", "inputSize", ";", "++", "j", ")", "{", "int", "pixelValue", "=", "intValues", "[", "2", "inputSize", "j", "];", "Float", "model", "floatValues", "[", "0", "][", "][", "j", "][", "0", "]=((", "pixelValue", ">>", "16", ")", "&", "0xFF", ")/", "255", "0f", ";", "floatValues", "[", "0", "][", "][", "j", "][", "1", "]=((", "pixelValue", ">>", "8", ")", "&", "0xFF", ")/", "255", "0f", ";", "floatValues", "[", "0", "][", "][", "j", "][", "2", "]=(", "pixelValue", "&", "0xFF", ")", "255", "0f", ";", "}", "}", "int", "channelNum", "=", "BoxNum_each_gird", "*(", "NUM_of_classes", "5", ");", "output_1", "=", "new", "float", "[", "1", "][", "gridNum", "][", "2", "gridNum", "][", "channelNum", "];", "output_2", "=", "new", "float", "[", "1", "][", "2", "gridNum", "][", "4", "gridNum", "][", "channelNum", "];", "output_3", "=", "new", "float", "[", "1", "][", "4", "gridNum", "][", "8", "gridNum", "][", "channelNum", "];", "Object", "[]", "inputArray", "=", "{", "floatValues", "};", "Map", "<", "Integer", "Object", ">", "outputMap", "=", "new", "HashMap", "<>();", "outputMap", "put", "(", "0", "output_1", ");", "outputMap", "put", "(", "1", "output_2", ");", "outputMap", "put", "(", "2", "output_3", ");", "Trace", "endSection", "();", "Run", "inference", "call", "Trace", "beginSection", "(\"", "run", "\");", "long", "startTime", "=", "SystemClock", "uptimeMillis", "();", "tflite", "runForMultipleInputsOutputs", "(", "inputArray", "outputMap", ");", "long", "lastingTime", "=", "SystemClock", "uptimeMillis", "()-", "startTime", ";", "LOGGER", "(\"", "runForMultipleInputsOutputs", "time", "image", "lastingTime", "ms", "\");", "Trace", "endSection", "();", "}", "}`", "**", "Describe", "expected", "behavior", "**", "Provide", "reproducible", "test", "case", "bare", "minimum", "necessary", "generate", "problem", "**", "Other", "info", "logs", "**", "Include", "logs", "source", "code", "would", "helpful", "diagnose", "problem", "If", "including", "tracebacks", "please", "include", "full", "traceback", "Large", "logs", "files", "attached", "Add", "support", "SparkFun", "Edge", "board", "Arduino", "library", "build", "Allows", "individuals", "less", "comfortable", "command", "line", "tools", "get", "started", "TFLu", "examples", "**", "dependencies", "**", "[", "Update", "TFLu", "(", "micro", ")", "use", "AmbiqSuite", "SDK", "Release", "2", "2", "0", "Apollo3", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "pull", "35236", ")", "[", "Upgrade", "Edge", "Board", "Support", "Package", "TFLu", "(", "micro", ")](", "https", "://", "github", "com", "tensorflow", "tensorflow", "pull", "35290", ")", "saved", "model", "tf", "api", "**", "tf", "keras", "models", "save_model", "(", "testmodel", "\"./", "1", "/\",", "save_format", "='", "tf", "')**", "I", "load", "tf", "keras", "models", "load_model", "('", "1", "'),", "however", "\uff0c", "I", "got", "issue", "title", "It", "worth", "mentioning", "succed", "I", "saved", "h5", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "centos7", "4", "TensorFlow", "version", "(", "use", "command", "):", "tensorflow", "2", "0", "Python", "version", "3", "7", "NVIDIA", "SMI", "418", "88", "Driver", "Version", "418", "88", "CUDA", "Version", "10", "1", "GPU", "model", "memory", "12", "###", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", ")**:", "YES", "**", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", ")**:", "macOS", "10", "15", "2", "(", "19C57", ")", "**", "TensorFlow", "installed", "(", "source", "binary", ")**:", "binary", "**", "TensorFlow", "version", "(", "use", "command", ")**:", "v2", "0", "0", "rc2", "26", "g64c3d382ca", "2", "0", "0", "**", "Python", "version", "**:", "3", "7", "5", "(", "default", "Oct", "25", "2019", "18", "18", "54", ")", "\\", "n", "[", "Clang", "11", "0", "0", "(", "clang", "1100", "0", "33", "8", ")]", "###", "Describe", "problem", "`", "tf", "data", "Dataset", "`", "supports", "RaggedTensor", "SparseTensor", "`", "tf", "data", "Dataset", "from_generator", "`", "limited", "Tensors", "Please", "support", "types", "Tensors", "###", "Source", "code", "logs", "```", "def", "data_get", "():", "range", "(", "5", "):", "yield", "tf", "ragged", "constant", "([[", "],", "[", "]])", "ds", "=", "tf", "data", "Dataset", "from_generator", "(", "data_get", "tf", "int32", ")", "sample", "ds", "print", "(", "sample", ")", "```", "produces", "Traceback", "(", "recent", "call", "last", "):", "```", "File", "\"/", "Users", "peak", "IdeaProjects", "TFmodels", "venv", "tf2", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "ops", "script_ops", "py", "\",", "line", "221", "__call__", "ret", "=", "func", "(*", "args", ")", "File", "\"/", "Users", "peak", "IdeaProjects", "TFmodels", "venv", "tf2", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "data", "ops", "dataset_ops", "py", "\",", "line", "606", "generator_py_func", "element", "%", ".\"", "%", "(", "dtype", "name", "ret", "))", "TypeError", "`", "generator", "`", "yielded", "element", "could", "converted", "expected", "type", "The", "expected", "type", "int32", "yielded", "element", "<", "tf", "RaggedTensor", "[[", "0", "0", "],", "[", "0", "]]>.", "```", "<", "em", ">", "Please", "make", "sure", "bug", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "bug_template", "</", "em", ">", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "yes", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Windows", "7", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "TensorFlow", "installed", "(", "source", "binary", "):", "TensorFlow", "version", "(", "use", "command", "):", "2", "0", "0", "Python", "version", "3", "7", "Bazel", "version", "(", "compiling", "source", "):", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "CUDA", "cuDNN", "version", "10", "1", "GPU", "model", "memory", "You", "collect", "information", "using", "environment", "capture", "[", "script", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "tree", "master", "tools", "tf_env_collect", "sh", ")", "You", "also", "obtain", "TensorFlow", "version", "1", "TF", "1", "0", "`", "python", "c", "import", "tensorflow", "tf", ";", "print", "(", "tf", "GIT_VERSION", "tf", "VERSION", ")\"`", "2", "TF", "2", "0", "`", "python", "c", "import", "tensorflow", "tf", ";", "print", "(", "tf", "version", "GIT_VERSION", "tf", "version", "VERSION", ")\"`", "Hi", "I", "tried", "follow", "tf", "doc", "build", "model", "follows", "https", "://", "www", "tensorflow", "org", "guide", "keras", "custom_layers_and_models", "`", "class", "CBR", "(", "layers", "Layer", "):", "'''", "Convolution", "Batch", "normalisation", "Relu", "'''", "def", "__int__", "(", "self", "filterNum", "kSize", "strSize", "padMode", "name", "='", "cbr", "',", "**", "kwargs", "):", "super", "(", "CBR", "self", ").", "__init__", "(", "name", "=", "name", "**", "kwargs", ")", "self", "conv3D", "=", "layers", "Conv3D", "(", "filters", "=", "filterNum", "kernel_size", "=", "kSize", "strides", "=", "strSize", "padding", "=", "padMode", "data_format", "='", "channels_first", "')", "self", "BN", "=", "layers", "BatchNormalization", "(", "axis", "=", "1", ")", "def", "call", "(", "self", "inputs", "):", "x", "=", "self", "conv3D", "(", "inputs", ")", "x", "=", "self", "BN", "(", "x", ")", "return", "layers", "Relu", "(", "x", ")", "class", "SimpleUNet", "(", "tf", "keras", "Model", "layers", "Layer", "):", "'''", "Serialise", "basic", "units", "build", "double", "layered", "encoder", "decoder", "U", "Net", "Input", "inDim", "[", "mbSize", "modaility", "channel", "tensor", "dimensions", "]", "classNum", "background", "included", "name", "name", "net", "inputs", "5D", "tf", "tensor", "[", "mbSize", "modaility", "channel", "tensor", "dimensions", "].", "Inputs", "must", "organised", "channel", "first", "Returns", "outputs", "5D", "tf", "tensor", "[", "mbSize", "classNum", "tensor", "dimensions", "]", "'''", "def", "__init__", "(", "self", "inDim", "classNum", "name", "='", "SimpleUNet", "',", "**", "kwargs", "):", "super", "(", "SimpleUNet", "self", ").", "__init__", "(", "name", "=", "name", "**", "kwargs", ")", "self", "inDim", "=", "inDim", "self", "classNum", "=", "classNum", "dimEnSt1End", "=", "np", "array", "(", "inDim", "[", "1", ":])-", "2", "2", "dimEnSt2Ed", "=", "dimEnSt1End", "2", "2", "2", "dimBridgeEnd", "=", "(", "dimEnSt2Ed", "2", "2", "2", ")*", "2", "dimDEStd1End", "=", "(", "dimBridgeEnd", "2", "2", ")*", "2", "outDim", "=", "dimDEStd1End", "2", "2", "2", "temp", "=", "((", "dimEnSt2Ed", "dimBridgeEnd", ")/", "2", ").", "astype", "('", "int32", "')", "crop3d1", "=", "tuple", "(", "np", "tile", "(", "temp", "(", "2", "1", ")).", "T", ")", "temp", "=", "((", "dimEnSt1End", "dimDEStd1End", ")/", "2", ").", "astype", "('", "int32", "')", "crop3d2", "=", "tuple", "(", "np", "tile", "(", "temp", "(", "2", "1", ")).", "T", ")", "#", "list", "basic", "units", "used", "model", "self", "en_st1_cbr1", "=", "CBR", "(", "32", "3", "1", "valid", "')", "self", "en_st1_cbr2", "=", "CBR", "(", "64", "3", "1", "valid", "')", "self", "en_st2_mp", "=", "layers", "MaxPooling3D", "(", "pool_size", "=(", "2", "2", "2", "),", "strides", "=(", "2", "2", "2", "),", "padding", "='", "valid", "',", "data_format", "='", "channels_first", "')", "self", "en_st2_cbr1", "=", "CBR", "(", "64", "3", "1", "valid", "')", "self", "en_st2_cbr2", "=", "CBR", "(", "128", "3", "1", "valid", "')", "self", "bridge_mp", "=", "layers", "MaxPooling3D", "(", "pool_size", "=(", "2", "2", "2", "),", "strides", "=(", "2", "2", "2", "),", "padding", "='", "valid", "',", "data_format", "='", "channels_first", "')", "self", "bridge_cbr1", "=", "CBR", "(", "128", "3", "1", "valid", "')", "self", "bridge_cbr2", "=", "CBR", "(", "256", "3", "1", "valid", "')", "self", "bridge_tconv1", "=", "layers", "Conv3DTranspose", "(", "256", "2", "strides", "=", "2", "padding", "='", "valid", "',", "data_format", "='", "channels_first", "')", "self", "de_3dcrop1", "=", "layers", "Cropping3D", "(", "crop3d1", "data_format", "='", "channels_first", "')", "self", "de_st1_cbr1", "=", "CBR", "(", "256", "3", "1", "valid", "')", "self", "de_st1_cbr2", "=", "CBR", "(", "128", "3", "1", "valid", "')", "self", "de_st1_tconv1", "=", "layers", "Conv3DTranspose", "(", "128", "2", "strides", "=", "2", "padding", "='", "valid", "',", "data_format", "='", "channels_first", "')", "self", "de_3dcrop2", "=", "layers", "Cropping3D", "(", "crop3d2", "data_format", "='", "channels_first", "')", "self", "de_st2_cbr1", "=", "CBR", "(", "64", "3", "1", "valid", "')", "self", "de_st2_cbr2", "=", "CBR", "(", "64", "3", "1", "valid", "')", "self", "final_conv3D", "=", "layers", "Conv3D", "(", "filters", "=", "self", "classNum", "kernel_size", "=", "3", "strides", "=", "1", "padding", "='", "valid", "',", "data_format", "='", "channels_first", "')", "def", "call", "(", "self", "inputs", "):", "x", "=", "self", "en_st1_cbr1", "(", "inputs", ")", "xEnSt1End", "=", "self", "en_st1_cbr2", "(", "x", ")", "x", "=", "self", "en_st2_mp", "(", "xEnSt1End", ")", "x", "=", "self", "en_st2_cbr1", "(", "x", ")", "xEnSt2Ed", "=", "self", "en_st2_cbr2", "(", "x", ")", "x", "=", "self", "bridge_mp", "(", "xEnSt2Ed", ")", "x", "=", "self", "bridge_cbr1", "(", "x", ")", "x", "=", "self", "bridge_cbr2", "(", "x", ")", "xBridgeEnd", "=", "self", "bridge_tconv1", "(", "x", ")", "xCrop1", "=", "self", "de_3dcrop1", "(", "xEnSt2Ed", ")", "x", "=", "layers", "Concatenate", "([", "xBridgeEnd", "xCrop1", "],", "axis", "=", "1", ")", "x", "=", "self", "de_st1_cbr1", "(", "x", ")", "x", "=", "self", "de_st1_cbr2", "(", "x", ")", "xDeSt1End", "=", "self", "de_st1_tconv1", "(", "x", ")", "xCrop2", "=", "self", "de_3dcrop2", "(", "xEnSt1End", ")", "x", "=", "layers", "Concatenate", "([", "xDeSt1End", "xCrop2", "],", "axis", "=", "1", ")", "x", "=", "self", "de_st2_cbr1", "(", "x", ")", "x", "=", "self", "de_st2_cbr2", "(", "x", ")", "x", "=", "self", "final_conv3D", "(", "x", ")", "outputs", "=", "activations", "softmax", "(", "x", "axis", "=", "1", ")", "return", "outputs", "`", "Then", "I", "initialised", "tried", "build", "calling", "SUNet", "build", "`", "classNum", "=", "3", "mbSize", "=", "16", "inDim", "=", "[", "4", "64", "64", "64", "]", "SUNet", "=", "SimpleUNet", "(", "inDim", "classNum", ")", "SUNet", "build", "(", "input_shape", "=", "inDim", ")", "`", "I", "strictly", "followed", "example", "given", "tf", "doc", "error", "raised", "building", "ValueError", "name", "name_scope", "must", "string", "It", "occurred", "CBR", "called", "first", "time", "`", "def", "__int__", "(", "self", "filterNum", "kSize", "strSize", "padMode", "name", "='", "cbr", "',", "**", "kwargs", "):", "super", "(", "CBR", "self", ").", "__init__", "(", "name", "=", "name", "**", "kwargs", ")", "`", "I", "cannot", "figure", "syntactic", "mistake", "Could", "anyone", "give", "hand", "Thanks", "lot", "Or", "model", "cannot", "built", "moment", "actually", "used", "called", "training", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "Yes", "OS", "Platform", "Distribution", "4", "4", "0", "18362", "Microsoft", "TensorFlow", "installed", "Anaconda", "default", "source", "TensorFlow", "version", "1", "15", "Python", "version", "3", "7", "5", "CUDA", "cuDNN", "version", "10", "0", "GPU", "model", "memory", "GeForce", "RTX", "2060", "**", "Describe", "current", "behavior", "**", "I", "trying", "implement", "custom", "loss", "function", "based", "custom", "accuracy", "function", "I", "already", "using", "evaluate", "model", "predictions", "test", "dataset", "The", "conversion", "1", "1", "I", "use", "numpy", "greater", "equal", "functions", "differentiable", "I", "created", "thefore", "custom", "functions", "approximate", "latters", "behavior", "problems", "**", "Describe", "expected", "behavior", "**", "In", "particular", "I", "test", "everything", "fine", "comparing", "results", "obtained", "original", "custom", "accuracy", "f", "new", "loss", "f", "given", "input", "(", "input", "tensorflow", "predictions", "I", "inglobe", "inside", "K", "constant", "convert", "tensors", ").", "What", "I", "noticed", "line", "code", "```", "eps", "=", "sys", "float_info", "epsilon", "return", "0", "5", "*(", "5", "K", "sqrt", "(", "K", "pow", "(", "5", "2", ")", "eps", "))", "```", "problematic", "In", "particular", "array", "float32", "values", "[", "1", "10", "]", "range", "returned", "array", "let", "call", "ret", "',", "ret", "[", "]=", "max", "(", "5", "[", "])", "sometimes", "value", "**", "5", "**", "becomes", "**", "4", "9999995", "**", "instead", "The", "next", "portion", "code", "based", "many", "**", "5", "**", "present", "therefore", "I", "ignore", "problem", "The", "fact", "let", "say", "problematic", "index", "w", "ret", "[", "w", "]=", "4", "9999995", "instead", "5", "I", "use", "code", "equal", "[", "w", "]", "returned", "array", "correctly", "5", "This", "means", "somehow", "batch", "predictions", "one", "something", "working", "This", "case", "K", "sqrt", "K", "pow", "works", "element", "wise", "matter", "array", "1", "multiple", "values", "Out", "almost", "20k", "predictions", "around", "1k", "problem", "deterministic", "(", "always", "problematic", ").", "I", "also", "tried", "use", "```", "eps", "=", "sys", "float_info", "epsilon", "return", "0", "5", "*(", "5", "np", "sqrt", "(", "np", "pow", "(", "5", "2", ")", "eps", "))", "```", "problem", "gone", "thefore", "related", "Keras", "backend", "Last", "info", "I", "tried", "use", "also", "```", "eps", "=", "sys", "float_info", "epsilon", "return", "tf", "math", "ceil", "(", "0", "5", "*(", "5", "K", "sqrt", "(", "K", "pow", "(", "5", "2", ")", "eps", ")))", "```", "completely", "ruins", "returned", "value", "sometimes", "real", "numbers", "4", "5", "rounded", "6", "instead", "5", "If", "informations", "needed", "I", "provide", "**", "System", "information", "**", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Windows", "10", "TensorFlow", "installed", "(", "source", "binary", "):", "installed", "TF", "binary", "2", "0", "Conda", "TensorFlow", "version", "(", "github", "SHA", "source", "):", "TF", "2", "0", "**", "Command", "used", "run", "converter", "code", "\u2019", "using", "Python", "API", "**", "```", "converter", "=", "tf", "lite", "TFLiteConverter", "from_saved_model", "('", "model_mnist", "hd5", "')", "converter", "optimizations", "=", "[", "tf", "lite", "Optimize", "DEFAULT", "]", "converter", "target_spec", "supported_ops", "=", "[", "tf", "lite", "OpsSet", "TFLITE_BUILTINS_INT8", "]", "converter", "inference_input_type", "=", "tf", "uint8", "converter", "inference_output_type", "=", "tf", "uint8", "images", "=", "tf", "cast", "(", "X_train", "tf", "float32", ")", "mnist_ds", "=", "tf", "data", "Dataset", "from_tensor_slices", "((", "images", ")).", "batch", "(", "1", ")", "def", "representative_data_gen", "():", "input_value", "mnist_ds", "take", "(", "100", "):", "yield", "[", "input_value", "]", "converter", "representative_dataset", "=", "representative_data_gen", "tflite_quant_model", "=", "converter", "convert", "()", "open", "('", "model_mnist_quant_uint8", "tflite", "',", "wb", "')", "f", "f", "write", "(", "tflite_quant_model", ")", "interpreter", "=", "tf", "lite", "Interpreter", "(", "model_path", "='", "model_mnist_quant_uint8", "tflite", "')", "interpreter", "allocate_tensors", "()", "img", "=", "X_train", "[", "0", "]", "255", "img", "=", "img", "astype", "('", "uint8", "')", "print", "(", "interpreter", "get_input_details", "())", "interpreter", "set_tensor", "(", "interpreter", "get_input_details", "()[", "0", "]['", "index", "'],", "np", "expand_dims", "(", "img", "axis", "=", "0", "))", "```", "**", "The", "output", "converter", "invocation", "**", "```", "[{'", "name", "':", "flatten_input", "',", "index", "':", "11", "shape", "':", "array", "([", "1", "28", "28", "]),", "dtype", "':", "<", "class", "numpy", "float32", "'>,", "quantization", "':", "(", "0", "0", "0", ")}]", "---------------------------------------------------------------------------", "ValueError", "Traceback", "(", "recent", "call", "last", ")", "<", "ipython", "input", "12", "5a2fa86c9de2", ">", "<", "module", ">", "5", "img", "=", "img", "astype", "('", "uint8", "')", "6", "print", "(", "interpreter", "get_input_details", "())", "---->", "7", "interpreter", "set_tensor", "(", "interpreter", "get_input_details", "()[", "0", "]['", "index", "'],", "np", "expand_dims", "(", "img", "axis", "=", "0", "))", "~\\", "AppData", "\\", "Local", "\\", "Continuum", "\\", "anaconda3", "\\", "envs", "\\", "tensorflow2", "\\", "lib", "\\", "site", "packages", "\\", "tensorflow_core", "\\", "lite", "\\", "python", "\\", "interpreter", "py", "set_tensor", "(", "self", "tensor_index", "value", ")", "344", "ValueError", "If", "interpreter", "could", "set", "tensor", "345", "\"\"\"", "-->", "346", "self", "_interpreter", "SetTensor", "(", "tensor_index", "value", ")", "347", "348", "def", "resize_tensor_input", "(", "self", "input_index", "tensor_size", "):", "~\\", "AppData", "\\", "Local", "\\", "Continuum", "\\", "anaconda3", "\\", "envs", "\\", "tensorflow2", "\\", "lib", "\\", "site", "packages", "\\", "tensorflow_core", "\\", "lite", "\\", "python", "\\", "interpreter_wrapper", "\\", "tensorflow_wrap_interpreter_wrapper", "py", "SetTensor", "(", "self", "value", ")", "134", "135", "def", "SetTensor", "(", "self", "value", "):", "-->", "136", "return", "_tensorflow_wrap_interpreter_wrapper", "InterpreterWrapper_SetTensor", "(", "self", "value", ")", "137", "138", "def", "GetTensor", "(", "self", "):", "ValueError", "Cannot", "set", "tensor", "Got", "tensor", "type", "UINT8", "expected", "type", "FLOAT32", "input", "11", "name", "flatten_input", "```", "**", "Also", "please", "include", "link", "saved", "model", "GraphDef", "**", "```", "#", "Put", "link", "attach", "issue", "```", "**", "Failure", "details", "**", "The", "conversion", "successful", "generated", "model", "wrong", "The", "input", "tensor", "dtype", "uint8", "still", "float32", "I", "tried", "thing", "TF", "1", "15", "0", "In", "case", "every", "things", "works", "expected", "Here", "result", "TF", "1", "15", "0", "```", "[{'", "name", "':", "flatten_input", "',", "index", "':", "11", "shape", "':", "array", "([", "1", "28", "28", "],", "dtype", "=", "int32", "),", "dtype", "':", "<", "class", "numpy", "uint8", "'>,", "quantization", "':", "(", "0", "003921568859368563", "0", ")}]", "```", "**", "Any", "info", "logs", "**", "Include", "logs", "source", "code", "would", "helpful", "diagnose", "problem", "If", "including", "tracebacks", "please", "include", "full", "traceback", "Large", "logs", "files", "attached", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "Yes", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Ubuntu", "18", "04", "TensorFlow", "installed", "(", "source", "binary", "):", "binary", "TensorFlow", "version", "(", "use", "command", "):", "2", "0", "0", "Python", "version", "3", "6", "8", "CUDA", "cuDNN", "version", "10", "2", "7", "6", "5", "32", "1", "cuda10", "2", "GPU", "model", "memory", "NVidia", "Titan", "RTX", "24218", "MiB", "**", "Describe", "current", "behavior", "**", "When", "I", "attempt", "slice", "tensor", "inside", "keras", "util", "Sequence", "model", "fit_generator", "multiprocessing", "=", "True", "TensorFlow", "hangs", "forever", "without", "reporting", "error", "using", "CPU", "GPU", "cycles", "It", "works", "expected", "multiprocessing", "=", "False", "**", "Describe", "expected", "behavior", "**", "TensorFlow", "correctly", "fit", "model", "multiprocessing", "=", "False", "**", "Code", "reproduce", "issue", "**", "In", "order", "reproduce", "substitute", "my_jpeg", "jpeg", "computer", "(", "hopefully", "dimension", "greater", "224px", ").", "Note", "set", "use_multiprocessing", "=", "False", "example", "correctly", "train", "model", "```", "__future__", "import", "absolute_import", "division", "print_function", "unicode_literals", "import", "tensorflow", "tf", "tensorflow", "import", "keras", "#", "In", "order", "reproduce", "use", "whatever", "random", "JPEG", "handy", "#", "It", "larger", "my_crop", "x", "dimension", "my_jpeg", "=", "\"/", "home", "ben", "my_jpeg", "jpg", "my_crop", "=", "224", "#", "Generates", "single", "crop", "TensorFlow", "class", "DataGenerator", "(", "keras", "utils", "Sequence", "):", "def", "__init__", "(", "self", "image_location", "crop_size", "=", "224", "):", "self", "_image_location", "=", "image_location", "self", "_crop_size", "=", "crop_size", "#", "Just", "one", "single", "batch", "returned", "one", "single", "image", "def", "__len__", "(", "self", "):", "return", "1", "#", "Generate", "one", "batch", "data", "def", "__getitem__", "(", "self", "index", "):", "#", "Where", "tensors", "stored", "X", "=", "[]", "=", "[", "1", "]", "#", "Read", "image", "=", "tf", "io", "read_file", "(", "self", "_image_location", ")", "#", "Load", "image", "=", "tf", "image", "decode_jpeg", "(", "image", "channels", "=", "3", ")", "assert", "image", "shape", "[", "2", "]", "==", "3", "#", "MUST", "RGB", "height", "=", "image", "shape", "[", "0", "]", "width", "=", "image", "shape", "[", "1", "]", "#", "Just", "take", "trivial", "crop", "image", "#", "This", "offending", "line", "operation", "hangs", "forever", "image", "=", "image", "[", "0", "self", "_crop_size", "0", "self", "_crop_size", ":]", "#", "This", "line", "equivalent", "also", "hangs", "multiprocessing", "enabled", "#", "image", "=", "tf", "slice", "(", "image", "[", "0", "0", "0", "],", "[", "self", "_crop_size", "self", "_crop_size", "3", "])", "X", "append", "(", "tf", "dtypes", "cast", "(", "image", "tf", "float32", "))", "#", "Tensors", "generally", "assignable", "create", "number", "existing", "ones", "X", "=", "tf", "stack", "(", "X", ")", "=", "tf", "stack", "(", ")", "#", "Preprocess", "X", "/=", "255", "0", "#", "Normalize", "[", "0", "1", "]", "range", "return", "X", "generator", "=", "DataGenerator", "(", "my_jpeg", "my_crop", ")", "model", "=", "tf", "keras", "applications", "ResNet50", "(", "input_shape", "=(", "my_crop", "my_crop", "3", "))", "model", "compile", "(", "loss", "='", "mse", "')", "#", "use_multiprocessing", "=", "False", "works", "#", "use_multiprocessing", "=", "True", "hangs", "model", "fit_generator", "(", "generator", "use_multiprocessing", "=", "True", "workers", "=", "2", ")", "```", "tensorflow", "micro", "**", "System", "information", "**", "Host", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Ubuntu", "18", "04", "(", "Windows", "SL", ")", "TensorFlow", "installed", "(", "source", "binary", "):", "source", "Tensorflow", "version", "(", "commit", "SHA", "source", "):", "Target", "platform", "(", "e", "g", "Arm", "Mbed", "OS", "Arduino", "Nano", "33", "etc", "):", "target", "efr32", "efm32", "(", "tried", "compile", "mbed", ")", "**", "Describe", "problem", "**", "I", "trying", "run", "one", "provided", "projects", "efr", "efm32", "microcontroller", "(", "choose", "magic_wanda", "example", "accelero", "&", "seem", "good", "example", "start", ").", "I", "wanted", "generate", "binary", "file", "first", "make", "changes", "adapt", "code", "external", "accelerometer", "itried", "command", "_make", "f", "tensorflow", "lite", "micro", "tools", "make", "Makefile", "TARGET", "=", "mbed", "TAGS", "=\"", "CMSIS", "efm32pg_stk3401", "magic_wand_bin_", "errors", "appear", "Should", "big", "modifications", "project", "run", "efr32", "efm32", "micro", "Thank", "answers", "**", "Please", "provide", "exact", "sequence", "commands", "steps", "ran", "problem", "**", "_make", "f", "tensorflow", "lite", "micro", "tools", "make", "Makefile", "TARGET", "=", "mbed", "TAGS", "=\"", "CMSIS", "efm32pg_stk3401", "magic_wand_bin", "This", "PR", "addresses", "minor", "spelling", "tweaks", "`", "tensorflow", "lite", "`", "directory", "follow", "#", "34958", "My", "application", "requires", "kTfLiteInt8", "kernels", "However", "kTfLiteFloat32", "kTfLiteUInt8", "kernels", "also", "built", "application", "It", "would", "save", "considerable", "amount", "code", "space", "way", "disable", "building", "unused", "data", "types", "e", "g", "```", "switch", "(", "input", "->", "type", ")", "{", "Already", "know", "types", "#", "ifndef", "TFLITE_FLOAT32_DISABLED", "case", "kTfLiteFloat32", "return", "EvalFloat", "(", "context", "node", "params", "&", "data", "input", "filter", "bias", "nullptr", "nullptr", "output", ");", "break", ";", "#", "endif", "#", "infdef", "TFLITE_INT8_DISABLED", "case", "kTfLiteInt8", "return", "EvalQuantizedPerChannel", "(", "context", "node", "params", "&", "data", "input", "filter", "bias", "output", "nullptr", ");", "break", ";", "#", "endif", "#", "ifndef", "TFLITE_UINT8_DISABLED", "case", "kTfLiteUInt8", "return", "EvalQuantized", "(", "context", "node", "params", "&", "data", "input", "filter", "bias", "nullptr", "nullptr", "output", ");", "break", ";", "#", "endif", "default", "context", "->", "ReportError", "(", "context", "Type", "%", "(%", ")", "supported", "\",", "TfLiteTypeGetName", "(", "input", "->", "type", "),", "input", "->", "type", ");", "return", "kTfLiteError", "```", "Or", "something", "elegant", ";)", "<", "em", ">", "Please", "make", "sure", "build", "installation", "issue", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "build_template", "</", "em", ">", "**", "System", "information", "**", "OS", "Platform", "Windows", "10", "Pro", "desktop", "computer", "TensorFlow", "installed", "source", "TensorFlow", "version", "2", "0", "Python", "version", "3", "7", "Installed", "using", "virtualenv", "pip", "conda", "installed", "via", "command", "line", "git", "clone", "etc", "Bazel", "version", "(", "compiling", "source", "):", "1", "1", "0", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "Visual", "Studio", "2017", "Redistributables", "CUDA", "cuDNN", "version", "---", "(", "ROCm", "selected", ")", "GPU", "model", "memory", "AMD", "FX", "8800P", "R7", "Build", "fails", "see", "listing", "C", ":\\", "Users", "\\", "Bludorf", "\\", "tensorflow", ">", "python", "./", "configure", "py", "WARNING", "Running", "Bazel", "server", "needs", "killed", "startup", "options", "different", "WARNING", "Waiting", "server", "process", "terminate", "(", "waited", "5", "seconds", "waiting", "60", ")", "WARNING", "Waiting", "server", "process", "terminate", "(", "waited", "10", "seconds", "waiting", "60", ")", "WARNING", "--", "batch", "mode", "deprecated", "Please", "instead", "explicitly", "shut", "Bazel", "server", "using", "command", "bazel", "shutdown", "\".", "You", "bazel", "1", "1", "0", "installed", "Please", "specify", "location", "python", "[", "Default", "C", ":\\", "Users", "\\", "Bludorf", "\\", "AppData", "\\", "Local", "\\", "Programs", "\\", "Python", "\\", "Python37", "\\", "python", "exe", "]:", "Found", "possible", "Python", "library", "paths", "C", ":\\", "Users", "\\", "Bludorf", "\\", "AppData", "\\", "Local", "\\", "Programs", "\\", "Python", "\\", "Python37", "\\", "lib", "\\", "site", "packages", "Please", "input", "desired", "Python", "library", "path", "use", "Default", "[", "C", ":\\", "Users", "\\", "Bludorf", "\\", "AppData", "\\", "Local", "\\", "Programs", "\\", "Python", "\\", "Python37", "\\", "lib", "\\", "site", "packages", "]", "Do", "wish", "build", "TensorFlow", "XLA", "JIT", "support", "[", "N", "]:", "XLA", "JIT", "support", "enabled", "TensorFlow", "Do", "wish", "build", "TensorFlow", "ROCm", "support", "[", "N", "]:", "ROCm", "support", "enabled", "TensorFlow", "Do", "wish", "build", "TensorFlow", "CUDA", "support", "[", "N", "]:", "N", "No", "CUDA", "support", "enabled", "TensorFlow", "Please", "specify", "optimization", "flags", "use", "compilation", "bazel", "option", "\"--", "config", "=", "opt", "specified", "[", "Default", "arch", "AVX", "]:", "Would", "like", "override", "eigen", "strong", "inline", "C", "++", "compilation", "reduce", "compilation", "time", "[", "Y", "n", "]:", "Y", "Eigen", "strong", "inline", "overridden", "Preconfigured", "Bazel", "build", "configs", "You", "use", "adding", "\"--", "config", "=<>\"", "build", "command", "See", "bazelrc", "details", "--", "config", "=", "mkl", "#", "Build", "MKL", "support", "--", "config", "=", "monolithic", "#", "Config", "mostly", "static", "monolithic", "build", "--", "config", "=", "ngraph", "#", "Build", "Intel", "nGraph", "support", "--", "config", "=", "numa", "#", "Build", "NUMA", "support", "--", "config", "=", "dynamic_kernels", "#", "(", "Experimental", ")", "Build", "kernels", "separate", "shared", "objects", "--", "config", "=", "v2", "#", "Build", "TensorFlow", "2", "x", "instead", "1", "x", "Preconfigured", "Bazel", "build", "configs", "DISABLE", "default", "features", "--", "config", "=", "noaws", "#", "Disable", "AWS", "S3", "filesystem", "support", "--", "config", "=", "nogcp", "#", "Disable", "GCP", "support", "--", "config", "=", "nohdfs", "#", "Disable", "HDFS", "support", "--", "config", "=", "nonccl", "#", "Disable", "NVIDIA", "NCCL", "support", "C", ":\\", "Users", "\\", "Bludorf", "\\", "tensorflow", ">", "bazel", "build", "--", "config", "=", "v2", "tensorflow", "tools", "pip_package", "build_pip_package", "Starting", "local", "Bazel", "server", "connecting", "...", "WARNING", "The", "following", "configs", "expanded", "[", "v2", "].", "For", "repeatable", "flags", "repeats", "counted", "twice", "may", "lead", "unexpected", "behavior", "INFO", "Writing", "tracer", "profile", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "command", "profile", "gz", "INFO", "Options", "provided", "client", "Inherited", "common", "options", "--", "isatty", "=", "1", "--", "terminal_columns", "=", "120", "INFO", "Options", "provided", "client", "build", "options", "--", "python_path", "=", "C", ":/", "Users", "Bludorf", "AppData", "Local", "Programs", "Python", "Python37", "python", "exe", "INFO", "Reading", "rc", "options", "build", "c", ":\\", "users", "\\", "bludorf", "\\", "tensorflow", "\\.", "bazelrc", "build", "options", "--", "apple_platform_type", "=", "macos", "--", "define", "framework_shared_object", "=", "true", "--", "define", "open_source_build", "=", "true", "--", "java_toolchain", "=//", "third_party", "toolchains", "java", "tf_java_toolchain", "--", "host_java_toolchain", "=//", "third_party", "toolchains", "java", "tf_java_toolchain", "--", "define", "=", "use_fast_cpp_protos", "=", "true", "--", "define", "=", "allow_oversize_protos", "=", "true", "--", "spawn_strategy", "=", "standalone", "c", "opt", "--", "announce_rc", "--", "define", "=", "grpc_no_ares", "=", "true", "--", "noincompatible_remove_legacy_whole_archive", "--", "enable_platform_specific_config", "--", "config", "=", "v2", "INFO", "Reading", "rc", "options", "build", "c", ":\\", "users", "\\", "bludorf", "\\", "tensorflow", "\\.", "tf_configure", "bazelrc", "build", "options", "--", "action_env", "PYTHON_BIN_PATH", "=", "C", ":/", "Users", "Bludorf", "AppData", "Local", "Programs", "Python", "Python37", "python", "exe", "--", "action_env", "PYTHON_LIB_PATH", "=", "C", ":/", "Users", "Bludorf", "AppData", "Local", "Programs", "Python", "Python37", "lib", "site", "packages", "--", "python_path", "=", "C", ":/", "Users", "Bludorf", "AppData", "Local", "Programs", "Python", "Python37", "python", "exe", "--", "config", "=", "xla", "--", "config", "=", "rocm", "--", "define", "=", "override_eigen_strong_inline", "=", "true", "--", "action_env", "TF_CONFIGURE_IOS", "=", "0", "INFO", "Found", "applicable", "config", "definition", "build", "v2", "file", "c", ":\\", "users", "\\", "bludorf", "\\", "tensorflow", "\\.", "bazelrc", "--", "define", "=", "tf_api_version", "=", "2", "--", "action_env", "=", "TF2_BEHAVIOR", "=", "1", "INFO", "Found", "applicable", "config", "definition", "build", "xla", "file", "c", ":\\", "users", "\\", "bludorf", "\\", "tensorflow", "\\.", "bazelrc", "--", "action_env", "=", "TF_ENABLE_XLA", "=", "1", "--", "define", "=", "with_xla_support", "=", "true", "INFO", "Found", "applicable", "config", "definition", "build", "xla", "file", "c", ":\\", "users", "\\", "bludorf", "\\", "tensorflow", "\\.", "tf_configure", "bazelrc", "--", "define", "with_xla_support", "=", "true", "INFO", "Found", "applicable", "config", "definition", "build", "rocm", "file", "c", ":\\", "users", "\\", "bludorf", "\\", "tensorflow", "\\.", "bazelrc", "--", "crosstool_top", "=@", "local_config_rocm", "crosstool", "toolchain", "--", "define", "=", "using_rocm", "=", "true", "--", "define", "=", "using_rocm_hipcc", "=", "true", "--", "action_env", "TF_NEED_ROCM", "=", "1", "INFO", "Found", "applicable", "config", "definition", "build", "v2", "file", "c", ":\\", "users", "\\", "bludorf", "\\", "tensorflow", "\\.", "bazelrc", "--", "define", "=", "tf_api_version", "=", "2", "--", "action_env", "=", "TF2_BEHAVIOR", "=", "1", "INFO", "Found", "applicable", "config", "definition", "build", "windows", "file", "c", ":\\", "users", "\\", "bludorf", "\\", "tensorflow", "\\.", "bazelrc", "--", "copt", "=/", "w", "--", "cxxopt", "=/", "std", "c", "++", "14", "--", "host_cxxopt", "=/", "std", "c", "++", "14", "--", "config", "=", "monolithic", "--", "copt", "=-", "DWIN32_LEAN_AND_MEAN", "--", "host_copt", "=-", "DWIN32_LEAN_AND_MEAN", "--", "copt", "=-", "DNOGDI", "--", "host_copt", "=-", "DNOGDI", "--", "linkopt", "=/", "DEBUG", "--", "host_linkopt", "=/", "DEBUG", "--", "linkopt", "=/", "OPT", "REF", "--", "host_linkopt", "=/", "OPT", "REF", "--", "linkopt", "=/", "OPT", "ICF", "--", "host_linkopt", "=/", "OPT", "ICF", "--", "experimental_strict_action_env", "=", "true", "--", "incompatible_windows_native_test_wrapper", "--", "verbose_failures", "--", "distinct_host_configuration", "=", "false", "INFO", "Found", "applicable", "config", "definition", "build", "monolithic", "file", "c", ":\\", "users", "\\", "bludorf", "\\", "tensorflow", "\\.", "bazelrc", "--", "define", "framework_shared_object", "=", "false", "INFO", "Call", "stack", "definition", "repository", "io_bazel_rules_docker", "git_repository", "(", "rule", "definition", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git", "bzl", "195", "18", "):", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_toolchains", "repositories", "repositories", "bzl", "37", "9", "C", ":/", "users", "bludorf", "tensorflow", "WORKSPACE", "37", "1", "ERROR", "An", "error", "occurred", "fetch", "repository", "io_bazel_rules_docker", "':", "Traceback", "(", "recent", "call", "last", "):", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git", "bzl", "\",", "line", "177", "_clone_or_update", "(", "ctx", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git", "bzl", "\",", "line", "36", "_clone_or_update", "git_repo", "(", "ctx", "directory", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git_worker", "bzl", "\",", "line", "91", "git_repo", "_update", "(", "ctx", "git_repo", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git_worker", "bzl", "\",", "line", "101", "_update", "init", "(", "ctx", "git_repo", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git_worker", "bzl", "\",", "line", "115", "init", "_error", "(", "ctx", "name", "cl", "st", "stderr", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git_worker", "bzl", "\",", "line", "181", "_error", "fail", "(<", "1", "arguments", ">)", "error", "running", "git", "init", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "io_bazel_rules_docker", "working", "io_bazel_rules_docker", "java", "io", "IOException", "ERROR", "src", "main", "native", "windows", "process", "cc", "(", "199", "):", "CreateProcessW", "(\"", "git", "init", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "io_bazel_rules_docker", "):", "Das", "System", "kann", "die", "angegebene", "Datei", "nicht", "finden", "(", "error", "2", ")", "ERROR", "package", "'@", "io_bazel_rules_docker", "repositories", "':", "Traceback", "(", "recent", "call", "last", "):", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git", "bzl", "\",", "line", "177", "_clone_or_update", "(", "ctx", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git", "bzl", "\",", "line", "36", "_clone_or_update", "git_repo", "(", "ctx", "directory", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git_worker", "bzl", "\",", "line", "91", "git_repo", "_update", "(", "ctx", "git_repo", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git_worker", "bzl", "\",", "line", "101", "_update", "init", "(", "ctx", "git_repo", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git_worker", "bzl", "\",", "line", "115", "init", "_error", "(", "ctx", "name", "cl", "st", "stderr", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git_worker", "bzl", "\",", "line", "181", "_error", "fail", "(<", "1", "arguments", ">)", "error", "running", "git", "init", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "io_bazel_rules_docker", "working", "io_bazel_rules_docker", "java", "io", "IOException", "ERROR", "src", "main", "native", "windows", "process", "cc", "(", "199", "):", "CreateProcessW", "(\"", "git", "init", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "io_bazel_rules_docker", "):", "Das", "System", "kann", "die", "angegebene", "Datei", "nicht", "finden", "(", "error", "2", ")", "ERROR", "package", "'@", "io_bazel_rules_docker", "repositories", "':", "Traceback", "(", "recent", "call", "last", "):", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git", "bzl", "\",", "line", "177", "_clone_or_update", "(", "ctx", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git", "bzl", "\",", "line", "36", "_clone_or_update", "git_repo", "(", "ctx", "directory", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git_worker", "bzl", "\",", "line", "91", "git_repo", "_update", "(", "ctx", "git_repo", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git_worker", "bzl", "\",", "line", "101", "_update", "init", "(", "ctx", "git_repo", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git_worker", "bzl", "\",", "line", "115", "init", "_error", "(", "ctx", "name", "cl", "st", "stderr", ")", "File", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "bazel_tools", "tools", "build_defs", "repo", "git_worker", "bzl", "\",", "line", "181", "_error", "fail", "(<", "1", "arguments", ">)", "error", "running", "git", "init", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "io_bazel_rules_docker", "working", "io_bazel_rules_docker", "java", "io", "IOException", "ERROR", "src", "main", "native", "windows", "process", "cc", "(", "199", "):", "CreateProcessW", "(\"", "git", "init", "C", ":/", "users", "bludorf", "_bazel_bludorf", "jkbqqwso", "external", "io_bazel_rules_docker", "):", "Das", "System", "kann", "die", "angegebene", "Datei", "nicht", "finden", "(", "error", "2", ")", "INFO", "Elapsed", "time", "7", "563s", "INFO", "0", "processes", "FAILED", "Build", "NOT", "complete", "successfully", "(", "0", "packages", "loaded", ")", "Incompatible", "flag", "--", "incompatible_restrict_string_escapes", "break", "TensorFlow", "Bazel", "1", "2", "1", "released", "Please", "see", "following", "CI", "builds", "information", "[:", "darwin", "(", "OpenJDK", "8", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "042f4c72", "2a23", "4d7b", "9d3b", "d78619ea3fc7", "target", "=\"", "_blank", "\">:", "darwin", "(", "OpenJDK", "8", ")</", ">)", "[:", "windows", "(", "OpenJDK", "8", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "65246ccf", "c676", "40de", "b693", "3e1408052faa", "target", "=\"", "_blank", "\">:", "windows", "(", "OpenJDK", "8", ")</", ">)", "[:", "ubuntu", "18", "04", "(", "OpenJDK", "11", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "42574ec2", "097a", "4fa6", "9c82", "5de0093a2ed1", "target", "=\"", "_blank", "\">:", "ubuntu", "18", "04", "(", "OpenJDK", "11", ")</", ">)", "Questions", "Please", "file", "issue", "https", "://", "github", "com", "bazelbuild", "continuous", "integration", "**", "Important", "**:", "Please", "NOT", "modify", "issue", "title", "since", "might", "break", "tools", "Incompatible", "flag", "--", "incompatible_load_cc_rules_from_bzl", "break", "TensorFlow", "Bazel", "1", "2", "1", "released", "Please", "see", "following", "CI", "builds", "information", "[:", "darwin", "(", "OpenJDK", "8", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "042f4c72", "2a23", "4d7b", "9d3b", "d78619ea3fc7", "target", "=\"", "_blank", "\">:", "darwin", "(", "OpenJDK", "8", ")</", ">)", "[:", "windows", "(", "OpenJDK", "8", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "65246ccf", "c676", "40de", "b693", "3e1408052faa", "target", "=\"", "_blank", "\">:", "windows", "(", "OpenJDK", "8", ")</", ">)", "[:", "ubuntu", "18", "04", "(", "OpenJDK", "11", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "42574ec2", "097a", "4fa6", "9c82", "5de0093a2ed1", "target", "=\"", "_blank", "\">:", "ubuntu", "18", "04", "(", "OpenJDK", "11", ")</", ">)", "Questions", "Please", "file", "issue", "https", "://", "github", "com", "bazelbuild", "continuous", "integration", "**", "Important", "**:", "Please", "NOT", "modify", "issue", "title", "since", "might", "break", "tools", "Incompatible", "flag", "--", "incompatible_no_implicit_file_export", "break", "TensorFlow", "Bazel", "1", "2", "1", "released", "Please", "see", "following", "CI", "builds", "information", "[:", "darwin", "(", "OpenJDK", "8", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "042f4c72", "2a23", "4d7b", "9d3b", "d78619ea3fc7", "target", "=\"", "_blank", "\">:", "darwin", "(", "OpenJDK", "8", ")</", ">)", "[:", "windows", "(", "OpenJDK", "8", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "65246ccf", "c676", "40de", "b693", "3e1408052faa", "target", "=\"", "_blank", "\">:", "windows", "(", "OpenJDK", "8", ")</", ">)", "[:", "ubuntu", "18", "04", "(", "OpenJDK", "11", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "42574ec2", "097a", "4fa6", "9c82", "5de0093a2ed1", "target", "=\"", "_blank", "\">:", "ubuntu", "18", "04", "(", "OpenJDK", "11", ")</", ">)", "Questions", "Please", "file", "issue", "https", "://", "github", "com", "bazelbuild", "continuous", "integration", "**", "Important", "**:", "Please", "NOT", "modify", "issue", "title", "since", "might", "break", "tools", "Incompatible", "flag", "--", "incompatible_disallow_empty_glob", "break", "TensorFlow", "Bazel", "1", "2", "1", "released", "Please", "see", "following", "CI", "builds", "information", "[:", "darwin", "(", "OpenJDK", "8", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "042f4c72", "2a23", "4d7b", "9d3b", "d78619ea3fc7", "target", "=\"", "_blank", "\">:", "darwin", "(", "OpenJDK", "8", ")</", ">)", "[:", "windows", "(", "OpenJDK", "8", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "65246ccf", "c676", "40de", "b693", "3e1408052faa", "target", "=\"", "_blank", "\">:", "windows", "(", "OpenJDK", "8", ")</", ">)", "[:", "ubuntu", "18", "04", "(", "OpenJDK", "11", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "42574ec2", "097a", "4fa6", "9c82", "5de0093a2ed1", "target", "=\"", "_blank", "\">:", "ubuntu", "18", "04", "(", "OpenJDK", "11", ")</", ">)", "Questions", "Please", "file", "issue", "https", "://", "github", "com", "bazelbuild", "continuous", "integration", "**", "Important", "**:", "Please", "NOT", "modify", "issue", "title", "since", "might", "break", "tools", "<", "em", ">", "Please", "make", "sure", "feature", "request", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "feature_template", "</", "em", ">", "**", "System", "information", "**", "TensorFlow", "version", "(", "using", "):", "2", "0", "0", "Are", "willing", "contribute", "(", "Yes", "No", "):", "Yes", "**", "Describe", "feature", "current", "behavior", "state", "**", "Currently", "whenever", "user", "loads", "keras", "models", "using", "HDF5", "user", "gets", "confirmation", "models", "loaded", "successfully", "([\\[", "1", "\\]](", "https", "://", "www", "tensorflow", "org", "api_docs", "python", "tf", "keras", "Sequential", "#", "load_weights", "),", "[\\[", "2", "\\]](", "https", "://", "www", "tensorflow", "org", "api_docs", "python", "tf", "keras", "Model", "version", "=", "stable", "#", "load_weights", ")", "return", "nothing", ").", "This", "confirmation", "could", "useful", "verifying", "weights", "properly", "loaded", "In", "case", "transfer", "learning", "users", "typically", "want", "load", "specific", "weights", "HDF5file", "This", "currently", "achieved", "using", "`", "load_weights", "(", "by_name", "=", "True", ")`,", "however", "users", "get", "confirmation", "layers", "actually", "loaded", "Also", "case", "matching", "layers", "original", "model", "source", "model", "`", "model", "load_weights", "(", "by_name", "=", "True", ")`", "fails", "without", "raising", "exception", "way", "actually", "debug", "went", "wrong", "model", "loading", "(", "Note", "I", "talking", "name", "mismatch", "weight", "mismatch", ")", "This", "significantly", "affects", "ability", "write", "unit", "tests", "models", "since", "tester", "code", "cannot", "actually", "verify", "layers", "loaded", "HDF5", "file", "**", "Will", "change", "current", "api", "How", "**", "Yes", "changes", "current", "API", "[\\[", "1", "\\]](", "https", "://", "www", "tensorflow", "org", "api_docs", "python", "tf", "keras", "Model", "version", "=", "stable", "#", "load_weights", ")", "[\\[", "2", "\\]](", "https", "://", "www", "tensorflow", "org", "api_docs", "python", "tf", "keras", "Sequential", "#", "load_weights", ")", "adding", "return", "type", "Specifically", "returning", "particular", "data", "structure", "loading", "HDF5", "files", "[", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "c49396cf71dacc32195033507b3bbd985b12c255", "tensorflow", "python", "keras", "engine", "network", "py", "#", "L1131", ").", "My", "current", "idea", "return", "list", "layers", "loaded", "HDF5", "although", "I", "open", "discussion", "return", "type", "**", "Who", "benefit", "feature", "**", "Users", "loading", "weights", "h5py", "files", "want", "verify", "check", "layers", "loaded", "HDF5", "**", "Any", "Other", "info", "**", "N", "A", "Let", "know", "clarification", "information", "needed", "I", "willing", "contribute", "working", "issue", "I", "also", "facing", "similar", "issue", "The", "demo", "API", "gives", "error", "tflite", "load_delegate", "```", "pi", "bpi", "iot", "ros", "ai", ":~/", "coral", "tflite", "python", "examples", "classification", "$", "python3", "classify_image", "py", "--", "model", "models", "mobilenet_v2_1", "0_224_inat_bird_quant_edgetpu", "tflite", "--", "labels", "models", "inat_bird_labels", "txt", "--", "input", "images", "parrot", "jpg", "E", "248", "]", "HIB", "Error", "hib_error_status", "=", "0000000000000001", "hib_first_error_status", "=", "0000000000000001", "E", "248", "]", "HIB", "Error", "hib_error_status", "=", "0000000000000001", "hib_first_error_status", "=", "0000000000000001", "INFO", "Initialized", "TensorFlow", "Lite", "runtime", "----", "INFERENCE", "TIME", "----", "Note", "The", "first", "inference", "Edge", "TPU", "slow", "includes", "loading", "model", "Edge", "TPU", "memory", "pi", "bpi", "iot", "ros", "ai", ":~$", "uname", "Linux", "bpi", "iot", "ros", "ai", "5", "4", "0", "bpi", "r64", "#", "1", "SMP", "PREEMPT", "Mon", "Dec", "16", "16", "00", "08", "IST", "2019", "aarch64", "aarch64", "aarch64", "GNU", "Linux", "pi", "bpi", "iot", "ros", "ai", ":~$", "lscpu", "Architecture", "aarch64", "Byte", "Order", "Little", "Endian", "CPU", "(", "):", "2", "On", "line", "CPU", "(", ")", "list", "0", "1", "Thread", "(", ")", "per", "core", "1", "Core", "(", ")", "per", "socket", "2", "Socket", "(", "):", "1", "CPU", "max", "MHz", "1350", "0000", "CPU", "min", "MHz", "30", "0000", "pi", "bpi", "iot", "ros", "ai", ":~$", "ls", "l", "usr", "lib", "aarch64", "linux", "gnu", "libedge", "lrwxrwxrwx", "1", "root", "root", "17", "Sep", "17", "04", "27", "usr", "lib", "aarch64", "linux", "gnu", "libedgetpu", "1", "->", "libedgetpu", "1", "0", "rwxrwxrwx", "1", "root", "root", "792376", "Sep", "17", "04", "27", "usr", "lib", "aarch64", "linux", "gnu", "libedgetpu", "1", "0", "pi", "bpi", "iot", "ros", "ai", ":~$", "lspci", "00", "00", "0", "PCI", "bridge", "MEDIATEK", "Corp", "Device", "3258", "01", "00", "0", "System", "peripheral", "Device", "1ac1", "089a", "pi", "bpi", "iot", "ros", "ai", ":~$", "ls", "dev", "apex_0", "dev", "apex_0", "pi", "bpi", "iot", "ros", "ai", ":~$", "sudo", "sh", "c", "echo", "SUBSYSTEM", "==\\\"", "apex", "\\\",", "MODE", "=\\\"", "0660", "\\\",", "GROUP", "=\\\"", "apex", "\\\"'", ">>", "etc", "udev", "rules", "65", "apex", "rules", "pi", "bpi", "iot", "ros", "ai", ":~$", "sudo", "groupadd", "apex", "groupadd", "group", "apex", "already", "exists", "pi", "bpi", "iot", "ros", "ai", ":~$", "sudo", "adduser", "$", "USER", "apex", "The", "user", "`", "pi", "already", "member", "`", "apex", "'.", "```", "<", "em", ">", "Please", "make", "sure", "bug", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "bug_template", "</", "em", ">", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "https", "://", "github", "com", "cogaplex", "bts", "bts", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "ubuntu", "1604", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "TensorFlow", "installed", "(", "source", "binary", "):", "pip", "TensorFlow", "version", "(", "use", "command", "):", "1", "13", "2", "Python", "version", "3", "7", "Bazel", "version", "(", "compiling", "source", "):", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "pip", "CUDA", "cuDNN", "version", "10", "0", "GPU", "model", "memory", "1060", "6G", "You", "collect", "information", "using", "environment", "capture", "[", "script", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "tree", "master", "tools", "tf_env_collect", "sh", ")", "You", "also", "obtain", "TensorFlow", "version", "1", "TF", "1", "0", "`", "python", "c", "import", "tensorflow", "tf", ";", "print", "(", "tf", "GIT_VERSION", "tf", "VERSION", ")\"`", "2", "TF", "2", "0", "`", "python", "c", "import", "tensorflow", "tf", ";", "print", "(", "tf", "version", "GIT_VERSION", "tf", "version", "VERSION", ")\"`", "**", "Describe", "current", "behavior", "**", "process", "use", "full", "path", "twice", "load", "tf", "load_op_library", "(", "os", "path", "join", "(", "dname", "build", "libcompute_depth", "'))", "second", "time", "OP_LIST", "empty", "relative", "path", "twice", "tf", "load_op_library", "empty", "**", "Describe", "expected", "behavior", "**", "use", "full", "path", "twice", "tf", "load_op_library", "OP_LIST", "empty", "**", "Code", "reproduce", "issue", "**", "Provide", "reproducible", "test", "case", "bare", "minimum", "necessary", "generate", "problem", "I", "compile", "https", "://", "github", "com", "cogaplex", "bts", "bts", "met", "problem", "But", "I", "think", "general", "problem", "reproduce", "python", "file", "load", "library", "twice", "full", "path", "relative", "path", "**", "Other", "info", "logs", "**", "Include", "logs", "source", "code", "would", "helpful", "diagnose", "problem", "If", "including", "tracebacks", "please", "include", "full", "traceback", "Large", "logs", "files", "attached", "```", "compute_depth_grad_module", "dict", "{'", "__name__", "':", "a11935c229913616b7b14d8da52f01ac", "',", "__doc__", "':", "Python", "wrappers", "around", "TensorFlow", "ops", ".\\", "n", "\\", "nThis", "file", "MACHINE", "GENERATED", "Do", "edit", ".\\", "n", "',", "...", "LIB_HANDLE", "':", "<", "Swig", "Object", "type", "TF_Library", "*'", "0x7ff4ad011f60", ">,", "OP_LIST", "':", "op", "{", "name", "ComputeDepth", "input_arg", "{", "name", "input", "type", "DT_FLOAT", "}", "input_arg", "{", "name", "focal", "type", "DT_FLOAT", "}", "output_arg", "{", "name", "depth", "type", "DT_FLOAT", "}", "attr", "{", "name", "upratio", "type", "int", "}", "}", "op", "{", "name", "ComputeDepthGrad", "input_arg", "{", "name", "depth_grad", "type", "DT_FLOAT", "}", "input_arg", "{", "name", "input", "type", "DT_FLOAT", "}", "input_arg", "{", "name", "focal", "type", "DT_FLOAT", "}", "output_arg", "{", "name", "grad_input", "type", "DT_FLOAT", "}", "output_arg", "{", "name", "grad_focal", "type", "DT_FLOAT", "}", "}", "}", "{'", "__name__", "':", "a11935c229913616b7b14d8da52f01ac", "',", "__doc__", "':", "Python", "wrappers", "around", "TensorFlow", "ops", ".\\", "n", "\\", "nThis", "file", "MACHINE", "GENERATED", "Do", "edit", ".\\", "n", "',", "__package__", "':", "None", "...", "LIB_HANDLE", "':", "<", "Swig", "Object", "type", "TF_Library", "*'", "0x7ff4ad011f60", ">,", "OP_LIST", "':", "op", "{", "name", "ComputeDepth", "input_arg", "{", "name", "input", "type", "DT_FLOAT", "}", "input_arg", "{", "name", "focal", "type", "DT_FLOAT", "}", "output_arg", "{", "name", "depth", "type", "DT_FLOAT", "}", "attr", "{", "name", "upratio", "type", "int", "}", "}", "op", "{", "name", "ComputeDepthGrad", "input_arg", "{", "name", "depth_grad", "type", "DT_FLOAT", "}", "input_arg", "{", "name", "input", "type", "DT_FLOAT", "}", "input_arg", "{", "name", "focal", "type", "DT_FLOAT", "}", "output_arg", "{", "name", "grad_input", "type", "DT_FLOAT", "}", "output_arg", "{", "name", "grad_focal", "type", "DT_FLOAT", "}", "}", "}", "```", "full", "name", "second", "print", "```", "compute_depth_grad_module", "dict", "{'", "__name__", "':", "670cc8cfec5b6d3b8635f39bd583d769", "',", "__doc__", "':", "Python", "wrappers", "around", "TensorFlow", "ops", ".\\", "n", "\\", "nThis", "file", "MACHINE", "GENERATED", "Do", "edit", ".\\", "n", "',", "__package__", "':", "None", "...", "LIB_HANDLE", "':", "<", "Swig", "Object", "type", "TF_Library", "*'", "0x7f6b2a8f3e70", ">,", "OP_LIST", "':", "}", "```", "Object", "detection", "SSD", "trained", "tested", "produce", "expected", "results", "PC", "http", "://", "download", "tensorflow", "org", "models", "object_detection", "ssd_inception_v2_coco_2018_01_28", "tar", "gz", "https", "://", "github", "com", "tensorflow", "models", "blob", "master", "research", "object_detection", "samples", "configs", "ssd_inception_v2_pets", "config", "Model", "works", "well", "produces", "accurate", "results", "PC", "After", "converting", "tflite", "loading", "mobile", "camera", "view", "shows", "incorrect", "detection", "(", "several", "detection", "class", "fixed", "place", "even", "moving", "camera", ").", "This", "PR", "trying", "resolve", "issue", "#", "35179", "boringssl", "latest", "version", "The", "old", "version", "7f63442", "released", "one", "half", "year", "ago", "time", "update", "This", "PR", "updates", "boringssl", "latest", "80ca9f9", "This", "PR", "fixes", "#", "35179", "Signed", "Yong", "Tang", "<", "yong", "tang", "github", "outlook", "com", ">", "Add", "TfLite", "micro", "ExpandDims", "reference", "kernel", "tests", "(", "int8", "uint8", "float32", ")", "Signed", "SiCongLi", "<", "sicong", "li", "arm", "com", ">", "Dear", "I", "point", "DropoutWrapper", "use", "Recurrent", "Neural", "Networks", "Due", "possibility", "dropout", "applied", "state", "output", "(", "state_keep_prob", "output_keep_prob", "),", "I", "found", "recurrent", "process", "state", "propagated", "time", "take", "values", "bounded", "interval", "[-", "1", "1", "].", "This", "probably", "due", "way", "dropout", "implemented", "(", "training", "time", "scaling", "instead", "testing", "time", "expectation", ").", "Since", "dropout", "applied", "activation", "(", "e", "tanh", "),", "feature", "values", "range", "inf", "inf", "This", "point", "bit", "strange", "since", "current", "implementation", "induce", "exploding", "gradient", "issues", "GRU", "LSTM", "process", "cells", "introduced", "deal", "vanishing", "well", "exploding", "gradients", "Please", "could", "supply", "feedback", "issue", "since", "practically", "impact", "people", "commonly", "employ", "Wrapper", "induces", "behaviours", "divergent", "w", "r", "theoretical", "behaviour", "RNN", "(", "GRU", "LSTM", ").", "All", "best", "**", "System", "information", "**", "OS", "Platform", "Windows10", "TensorFlow", "installed", "source", "TensorFlow", "version", "1", "13", "0", "Python", "version", "NO", "Bazel", "version", "(", "compiling", "source", "):", "0", "19", "GCC", "Compiler", "version", "msvc14", "**", "Describe", "problem", "**", "I", "want", "build", "tensorflow", "source", "using", "command", "`", "bazel", "build", "c", "opt", "--", "config", "=", "mkl", "--", "config", "=", "monolithic", "--", "linkopt", "=\"/", "FORCE", "MULTIPLE", "--", "define", "=", "no_tensorflow_py_deps", "=", "true", "tensorflow", "libtensorflow_cc", "tensorflow", "install_headers", "tensorflow", "tools", "lib_package", "libtensorflow", "--", "verbose_failures", "`", "However", "dll", "file", "generated", "symbol", "inside", "dll", "I", "paste", "error", "(", "As", "far", "I", "know", "problem", "accured", "number", "symbol", "limited", "windows", "So", "functions", "tensorflow", "source", "exported", "(", "I", "_check", "exported", "function", "using", "dumpbin", "exe", "EXPORT", "weird", "3000", "symbols", "exported", ")", "_", "`", "tfwrapper", "obj", "error", "LNK2001", "unresolved", "external", "symbol", "class", "tensorflow", "::", "Output", "__cdecl", "tensorflow", "::", "ops", "::", "Const", "(", "class", "tensorflow", "::", "Scope", "const", "&,", "struct", "tensorflow", "::", "Input", "::", "Initializer", "const", "&)\"", "(?", "Const", "ops", "tensorflow", "@@", "YA", "AVOutput", "2", "AEBVScope", "2", "AEBUInitializer", "Input", "2", "@@", "Z", ")`", "`", "tfwrapper", "obj", "error", "LNK2001", "unresolved", "external", "symbol", "public", "__cdecl", "tensorflow", "::", "ops", "::", "DecodePng", "::", "DecodePng", "(", "class", "tensorflow", "::", "Scope", "const", "&,", "class", "tensorflow", "::", "Input", "struct", "tensorflow", "::", "ops", "::", "DecodePng", "::", "Attrs", "const", "&)\"", "(?", "0DecodePng", "ops", "tensorflow", "@@", "QEAA", "AEBVScope", "2", "VInput", "2", "AEBUAttrs", "012", "@@", "Z", ")`", "`", "tfwrapper", "obj", "error", "LNK2001", "unresolved", "external", "symbol", "public", "__cdecl", "tensorflow", "::", "ops", "::", "Placeholder", "::", "Placeholder", "(", "class", "tensorflow", "::", "Scope", "const", "&,", "enum", "tensorflow", "::", "DataType", ")\"", "(?", "0Placeholder", "ops", "tensorflow", "@@", "QEAA", "AEBVScope", "2", "W4DataType", "2", "@@", "Z", ")`", "solving", "issue", "I", "work", "two", "idea", "**", "first", "one", "**", "using", "`", "def_file_filter", "py", "tpl", "`,", "may", "know", "file", "I", "add", "missed", "symbol", "like", "(", "I", "paste", ")", "reconfigure", "&", "recompile", "source", "(", "I", "guess", ").", "But", "solution", "export", "missing", "symbol", "#", "Header", "def", "file", "def_fp", "write", "(\"", "LIBRARY", "args", "target", "\"\\", "n", "\")", "def_fp", "write", "(\"", "EXPORTS", "\\", "n", "\")", "def_fp", "write", "(\"\\", "1OpDef", "tensorflow", "@@", "UEAA", "XZ", "\\", "n", "\")", "def_fp", "write", "(\"\\", "0DecodePng", "ops", "tensorflow", "@@", "QEAA", "AEBVScope", "2", "VInput", "2", "AEBUAttrs", "012", "@@", "Z", "\\", "n", "\")", "def_fp", "write", "(\"\\", "6tensorflow", "@@", "YAAEAV", "?$", "basic_ostream", "DU", "?$", "char_traits", "D", "std", "@@@", "std", "@@", "AEAV12", "AEBVStatus", "0", "@@", "Z", "\\", "n", "\")`", "So", "I", "solve", "problem", "using", "method", "So", "I", "use", "another", "Idea", "I", "got", "Idea", "`", "ashley", "tharp", "`", "(", "see", "great", "work", "[", "link", "](", "https", "://", "github", "com", "robosina", "stuff", "tree", "master", "ai", "tensorflow", "build_tensorflow_1", "14_source_for_Windows", "))", "workaround", "solve", "8", "problems", "Main", "idea", "add", "`", "TF_EXPORT", "`", "macro", "function", "names", "force", "symbol", "include", "dll", "file", "problem", "raised", "DecodePng", "file", "function", "tensorflow", "source", "->`", "tensorflow", "core", "kernels", "decode_image_op", "cc", "`", "function", "signature", "void", "DecodePng", "(", "OpKernelContext", "context", "StringPiece", "input", ")", "I", "find", "But", "examples", "tensorflow", "see", "way", "read", "png", "files", "image_reader", "=", "DecodePng", "(", "root", "WithOpName", "(\"", "png_reader", "\"),", "file_reader", "DecodePng", "::", "Channels", "(", "wanted_channels", "));", "two", "function", "I", "find", "function", "tensorflow", "source", "code", "I", "add", "`", "TF_EXPORT", "`", "macro", "possible", "use", "function", "present", "source", "code", "??", "So", "I", "look", "bazel", "genereated", "files", "function", "(", "`", "bazel", "source", "bazel", "x64_windows", "opt", "genfiles", "tensorflow", "cc", "ops", "image_ops", "h", "`)", "DecodePng", "(", "const", "::", "tensorflow", "::", "Scope", "&", "scope", "::", "tensorflow", "::", "Input", "contents", ");", "DecodePng", "(", "const", "::", "tensorflow", "::", "Scope", "&", "scope", "::", "tensorflow", "::", "Input", "contents", "const", "DecodePng", "::", "Attrs", "&", "attrs", ");", "I", "know", "exactly", "bazel", "created", "add", "`", "TF_EXPORT", "`", "macro", "(", "files", "machine", "generated", "files", "add", "TF_EXPORT", "overwritten", "compile", "time", ")", "###", "**", "System", "information", "**", "OS", "Platform", "Distribution", "Linux", "Ubuntu", "16", "04", "Mobile", "device", "LG", "G7", "TensorFlow", "installed", "(", "source", "binary", "):", "Source", "TensorFlow", "version", "r2", "0", "Python", "version", "3", "5", "Bazel", "version", "0", "24", "1", "Android", "NDK", "version", "r17c", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "GCC", "4", "8", "###", "**", "Describe", "problem", "**", "Built", "Tensorflow", "lite", "source", "inference", "3", "times", "slower", "original", "(", "What", "I", "mean", "original", "prebuilt", "tensorflow", "lite", "downloaded", "Maven", "repository", ".)", "For", "example", "model", "originally", "costs", "20", "ms", "GPU", "takes", "50", "ms", "I", "tried", "different", "versions", "Tensorflow", "Android", "NDK", "resulted", "Below", "process", "I", "done", "build", "tensorflow", "lite", "libraries", "**", "1", "Download", "Tensorflow", "source", "code", "github", "**", "```", "shell", "$", "git", "clone", "https", "://", "github", "com", "tensorflow", "tensorflow", "git", "$", "git", "checkout", "r2", "0", "```", "**", "2", "Download", "Android", "NDK", "install", "standalone", "toolchains", "**", "Download", "NDK", "r17c", "[", "](", "https", "://", "developer", "android", "com", "ndk", "downloads", "older_releases", "html", ").", "Extract", "files", "move", "Android", "Sdk", "directory", "```", "shell", "$", "cd", "Android", "Sdk", "android", "ndk", "r17c", "$", "python", "build", "tools", "make_standalone_toolchain", "py", "--", "arch", "arm64", "--", "api", "21", "$", "export", "ANDROID_NDK", "=/", "path", "ndk", "$", "export", "ANDROID_NDK_HOME", "=$", "ANDROID_NDK", "```", "**", "3", "Download", "install", "Bazel", "**", "Download", "installer", "script", "[", "](", "https", "://", "github", "com", "bazelbuild", "bazel", "releases", "0", "24", "1", ").", "```", "shell", "$", "cd", "path", "download", "$", "chmod", "x", "bazel", "0", "24", "1", "installer", "linux", "x86_64", "sh", "$", "./", "bazel", "0", "24", "1", "installer", "linux", "x86_64", "sh", "--", "user", "```", "**", "4", "Build", "tensorflow", "lite", "aar", "tensorflow", "lite", "gpu", "aar", "**", "```", "shell", "$", "cd", "tensorflow", "$", "./", "configure", "$", "bazel", "build", "--", "cxxopt", "='--", "std", "=", "c", "++", "11", "c", "opt", "--", "fat_apk_cpu", "=", "arm64", "v8a", "armeabi", "v7a", "tensorflow", "lite", "java", "tensorflow", "lite", "$", "bazel", "build", "--", "cxxopt", "='--", "std", "=", "c", "++", "11", "c", "opt", "--", "fat_apk_cpu", "=", "arm64", "v8a", "armeabi", "v7a", "tensorflow", "lite", "java", "tensorflow", "lite", "gpu", "```", "On", "`./", "configure", "`,", "set", "n", "support", "question", "leave", "others", "default", "|", "Configuration", "|", "Value", "|", "|", "---", "|", "---", "|", "|", "XLA", "JIT", "support", "|", "No", "|", "|", "OpenCL", "SYCL", "support", "|", "No", "|", "|", "ROCm", "support", "|", "No", "|", "|", "CUDA", "support", "|", "No", "|", "|", "Fresh", "released", "clang", "|", "No", "|", "|", "MPI", "support", "|", "No", "|", "|", "Bazel", "comilation", "option", "|", "Default", "|", "|", "Android", "./", "WORKSPACE", "configuration", "|", "Yes", "|", "|", "Android", "NDK", "API", "level", "|", "22", "|", "|", "Android", "SDK", "path", "|", "Default", "|", "|", "Android", "SDK", "API", "level", "|", "Default", "(", "29", ")", "|", "|", "Android", "build", "tools", "version", "|", "Default", "(", "29", "0", "2", ")", "|", "**", "5", "Import", "libraries", "Android", "project", "**", "Copy", "generated", "`.", "aar", "`", "files", "Android", "project", "change", "`", "build", "gradle", "`", "file", "```", "gradle", "dependencies", "{", "...", "implementation", "files", "('", "libs", "tensorflow", "lite", "aar", "')", "implementation", "files", "('", "libs", "tensorflow", "lite", "gpu", "aar", "')", "implementation", "org", "tensorflow", "tensorflow", "lite", "2", "0", "0", "implementation", "org", "tensorflow", "tensorflow", "lite", "gpu", "2", "0", "0", "}", "```", "Any", "suggestion", "help", "appreciated", "Thanks", "advance", "I", "like", "understand", "performance", "issue", "I", "faced", "Why", "TF2", "0", "TRT6", "(", "keras", ")", "slower", "TF1", "keras", "4", "times", "GPU", "K80", "TF1", "keras", "(", "separate", "package", ")", "TF2", "TRT6", "integrated", "integrated", "keras", "example", "TF2", "4", "times", "slower", "I", "waiting", "acceleration", "training", "predition", "new", "version", "TRT", "integration", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "Yes", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Ubuntu", "18", "04", "3", "LTS", "(", "docker", "container", ")", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "NA", "TensorFlow", "installed", "(", "source", "binary", "):", "pip", "wheel", "TensorFlow", "version", "(", "use", "command", "):", "2", "0", "0", "Python", "version", "3", "6", "8", "Bazel", "version", "(", "compiling", "source", "):", "NA", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "NA", "CUDA", "cuDNN", "version", "NA", "GPU", "model", "memory", "NA", "**", "Describe", "current", "behavior", "**", "The", "training", "due", "low", "layer", "system", "call", "(", "corrupted", "size", "vs", "prev_size", ").", "process", "immediately", "corrupted", "without", "much", "log", "trace", "**", "Describe", "expected", "behavior", "**", "estimator", "(", "BoostedTreesRegressor", ")", "trained", "normal", "**", "Code", "reproduce", "issue", "**", "```", "import", "os", "import", "uuid", "import", "json", "io", "import", "StringIO", "import", "pandas", "pd", "import", "tensorflow", "tf", "sklearn", "model_selection", "import", "train_test_split", "tensorflow", "estimator", "import", "BoostedTreesRegressor", "def", "split_data", "(", "df", "pd", "DataFrame", ")", "->", "(", "pd", "DataFrame", "pd", "DataFrame", "pd", "DataFrame", "pd", "DataFrame", "):", "\"\"\"", "Split", "data", "train", "test", "sets", "Args", "df", "(", "DataFrame", "):", "pandas", "dataframe", "Returns", "X_train", "X_test", "y_train", "y_test", "\"\"\"", "feature_cols", "=", "[", "c", "c", "df", "columns", "c", "startswith", "('", "FEATURE", "')]", "label_col", "=", "[", "c", "c", "df", "columns", "c", "startswith", "('", "LABEL", "')]", "return", "train_test_split", "(", "df", "[", "feature_cols", "],", "df", "[", "label_col", "],", "test_size", "=.", "2", "random_state", "=", "42", ")", "def", "make_input_fn", "(", "X", "n_epochs", "=", "None", "shuffle", "=", "True", "):", "def", "input_fn", "():", "dataset", "=", "tf", "data", "Dataset", "from_tensor_slices", "((", "dict", "(", "X", "),", "))", "shuffle", "dataset", "=", "dataset", "shuffle", "(", "len", "(", "))", "dataset", "=", "dataset", "repeat", "(", "n_epochs", ")", "dataset", "=", "dataset", "batch", "(", "len", "(", "))", "return", "dataset", "return", "input_fn", "def", "make_serving_receiver_fn", "(", "df", "pd", "DataFrame", "):", "feature_col_names", "=", "[", "c", "c", "df", "columns", "c", "startswith", "('", "FEATURE", "')]", "feature_cols", "=", "[", "tf", "feature_column", "numeric_column", "(", "fc", ")", "fc", "feature_col_names", "]", "feature_spec", "=", "tf", "feature_column", "make_parse_example_spec", "(", "feature_cols", ")", "return", "tf", "estimator", "export", "build_parsing_serving_input_receiver_fn", "(", "feature_spec", ")", "def", "train_model", "(", "df", "pd", "DataFrame", "**", "params", ")", "->", "(", "BoostedTreesRegressor", "dict", "dict", "):", "\"\"\"", "Train", "Boost", "Tree", "Args", "df", "(", "DataFrame", "):", "pandas", "dataframe", "params", "(**", "dict", "):", "parameters", "training", "Returns", "BoostTreesRegressor", "saved", "model", "dir", "dict", "containing", "evaluation", "metrics", "\"\"\"", "feature_col_names", "=", "[", "c", "c", "df", "columns", "c", "startswith", "('", "FEATURE", "')]", "label_col_name", "=", "[", "c", "c", "df", "columns", "c", "startswith", "('", "LABEL", "')]", "feature_cols", "=", "[", "tf", "feature_column", "numeric_column", "(", "fc_name", ")", "fc_name", "feature_col_names", "]", "default_params", "=", "{", "feature_columns", "':", "feature_cols", "n_batches_per_layer", "':", "1", "model_dir", "':", "os", "path", "join", "('../", "output", "',", "str", "(", "uuid", "uuid4", "())),", "}", "default_params", "update", "(", "params", ")", "regressor", "=", "BoostedTreesRegressor", "(**", "default_params", ")", "X_train", "X_valid", "y_train", "y_valid", "=", "train_test_split", "(", "df", "[", "feature_col_names", "],", "df", "[", "label_col_name", "],", "test_size", "=", "0", "2", "random_state", "=", "42", ")", "train_input_fn", "=", "make_input_fn", "(", "X_train", "y_train", ")", "evaluate_input_fn", "=", "make_input_fn", "(", "X_valid", "y_valid", "n_epochs", "=", "1", ")", "regressor", "train", "(", "input_fn", "=", "train_input_fn", ")", "summary", "=", "regressor", "evaluate", "(", "input_fn", "=", "evaluate_input_fn", ")", "receiver_fn", "=", "make_serving_receiver_fn", "(", "df", ")", "export_dir", "=", "regressor", "export_saved_model", "(", "regressor", "model_dir", "receiver_fn", ")", "summary", "=", "{", "k", "float", "(", "v", ")", "k", "v", "summary", "items", "()}", "return", "regressor", "export_dir", "summary", "```", "**", "Other", "info", "logs", "**", "No", "problem", "environment", "__OSX", "10", "14", "5__", "__pyenv", "virtualenv", "3", "7", "0", "(", "default", "Nov", "22", "2019", "12", "39", "30", ")", "\\", "n", "[", "Clang", "11", "0", "0", "(", "clang", "1100", "0", "33", "12", ")]", "__", "No", "problem", "use", "google", "colab", "runtime", "(", "__Ubuntu", "18", "04", "3", "LTS", "Python", "3", "6", "9", "compiled", "GCC", "8", "3", "0__", ").", "See", "__", "[", "notebook", "shared", "](", "https", "://", "colab", "research", "google", "com", "drive", "1aAjJCWOBd7R0Hb6w4d7UCSnkfk4c", "xyE", ")", "__", "Same", "problem", "Kaggle", "runtime", "(", "__Debian", "GNU", "Linux", "9", "Python", "3", "6", "6", "Anaconda", "GCC", "7", "3", "0__", ")", "using", "tensorflow", "2", "0", "0", "Full", "error", "log", "docker", "using", "official", "image", "__tensorflow", "tensorflow", "2", "0", "0", "py3__", "```", "WARNING", "Logging", "flag", "parsing", "goes", "stderr", "I1216", "13", "01", "22", "775628", "140590360139584", "estimator", "py", "1800", "]", "Using", "default", "config", "I1216", "13", "01", "22", "778364", "140590360139584", "estimator", "py", "212", "]", "Using", "config", "{'", "_model_dir", "':", "'/", "app", "WINDMIL_PoC_Data_FE", "service", "estimator", "saved_model", "8f979f53", "4821", "4def", "bc6e", "9692d868e2ea", "',", "_tf_random_seed", "':", "None", "_save_summary_steps", "':", "100", "_save_checkpoints_steps", "':", "None", "_save_checkpoints_secs", "':", "600", "_session_config", "':", "allow_soft_placement", "true", "graph_options", "{", "rewrite_options", "{", "meta_optimizer_iterations", "ONE", "}", "}", "_keep_checkpoint_max", "':", "5", "_keep_checkpoint_every_n_hours", "':", "10000", "_log_step_count_steps", "':", "100", "_train_distribute", "':", "None", "_device_fn", "':", "None", "_protocol", "':", "None", "_eval_distribute", "':", "None", "_experimental_distribute", "':", "None", "_experimental_max_worker_delay_secs", "':", "None", "_session_creation_timeout_secs", "':", "7200", "_service", "':", "None", "_cluster_spec", "':", "<", "tensorflow", "python", "training", "server_lib", "ClusterSpec", "object", "0x7fdd837c5d30", ">,", "_task_type", "':", "worker", "',", "_task_id", "':", "0", "_global_id_in_cluster", "':", "0", "_master", "':", "'',", "_evaluation_master", "':", "'',", "_is_chief", "':", "True", "_num_ps_replicas", "':", "0", "_num_worker_replicas", "':", "1", "}", "W1216", "13", "01", "22", "809657", "140590360139584", "deprecation", "py", "506", "]", "From", "usr", "local", "lib", "python3", "6", "dist", "packages", "tensorflow_core", "python", "ops", "resource_variable_ops", "py", "1630", "calling", "BaseResourceVariable", "__init__", "(", "tensorflow", "python", "ops", "resource_variable_ops", ")", "constraint", "deprecated", "removed", "future", "version", "Instructions", "updating", "If", "using", "Keras", "pass", "_constraint", "arguments", "layers", "W1216", "13", "01", "22", "811977", "140590360139584", "deprecation", "py", "323", "]", "From", "usr", "local", "lib", "python3", "6", "dist", "packages", "tensorflow_core", "python", "training", "training_util", "py", "236", "Variable", "initialized_value", "(", "tensorflow", "python", "ops", "variables", ")", "deprecated", "removed", "future", "version", "Instructions", "updating", "Use", "Variable", "read_value", "Variables", "2", "X", "initialized", "automatically", "eager", "graph", "(", "inside", "tf", "defun", ")", "contexts", "I1216", "13", "01", "22", "888739", "140590360139584", "estimator", "py", "1147", "]", "Calling", "model_fn", "W1216", "13", "01", "22", "968535", "140590360139584", "deprecation", "py", "323", "]", "From", "usr", "local", "lib", "python3", "6", "dist", "packages", "tensorflow_estimator", "python", "estimator", "canned", "head", "py", "437", "to_float", "(", "tensorflow", "python", "ops", "math_ops", ")", "deprecated", "removed", "future", "version", "Instructions", "updating", "Use", "`", "tf", "cast", "`", "instead", "I1216", "13", "01", "23", "278414", "140590360139584", "estimator", "py", "1149", "]", "Done", "calling", "model_fn", "I1216", "13", "01", "23", "278981", "140590360139584", "basic_session_run_hooks", "py", "541", "]", "Create", "CheckpointSaverHook", "W1216", "13", "01", "23", "327183", "140590360139584", "meta_graph", "py", "448", "]", "Issue", "encountered", "serializing", "resources", "Type", "unsupported", "types", "items", "match", "field", "type", "CollectionDef", "Note", "warning", "probably", "safe", "ignore", "_Resource", "object", "attribute", "name", "I1216", "13", "01", "23", "468171", "140590360139584", "monitored_session", "py", "240", "]", "Graph", "finalized", "2019", "12", "16", "13", "01", "23", "468761", "I", "tensorflow", "core", "platform", "cpu_feature_guard", "cc", "142", "]", "Your", "CPU", "supports", "instructions", "TensorFlow", "binary", "compiled", "use", "AVX2", "FMA", "2019", "12", "16", "13", "01", "23", "475253", "I", "tensorflow", "core", "platform", "profile_utils", "cpu_utils", "cc", "94", "]", "CPU", "Frequency", "2904000000", "Hz", "2019", "12", "16", "13", "01", "23", "476582", "I", "tensorflow", "compiler", "xla", "service", "service", "cc", "168", "]", "XLA", "service", "0x4ed0210", "executing", "computations", "platform", "Host", "Devices", "2019", "12", "16", "13", "01", "23", "476657", "I", "tensorflow", "compiler", "xla", "service", "service", "cc", "175", "]", "StreamExecutor", "device", "(", "0", "):", "Host", "Default", "Version", "I1216", "13", "01", "23", "541273", "140590360139584", "session_manager", "py", "500", "]", "Running", "local_init_op", "I1216", "13", "01", "23", "561274", "140590360139584", "session_manager", "py", "502", "]", "Done", "running", "local_init_op", "W1216", "13", "01", "23", "960061", "140590360139584", "meta_graph", "py", "448", "]", "Issue", "encountered", "serializing", "resources", "Type", "unsupported", "types", "items", "match", "field", "type", "CollectionDef", "Note", "warning", "probably", "safe", "ignore", "_Resource", "object", "attribute", "name", "I1216", "13", "01", "24", "019694", "140590360139584", "basic_session_run_hooks", "py", "606", "]", "Saving", "checkpoints", "0", "app", "WINDMIL_PoC_Data_FE", "service", "estimator", "saved_model", "8f979f53", "4821", "4def", "bc6e", "9692d868e2ea", "model", "ckpt", "W1216", "13", "01", "24", "100714", "140590360139584", "meta_graph", "py", "448", "]", "Issue", "encountered", "serializing", "resources", "Type", "unsupported", "types", "items", "match", "field", "type", "CollectionDef", "Note", "warning", "probably", "safe", "ignore", "_Resource", "object", "attribute", "name", "I1216", "13", "01", "24", "385114", "140590360139584", "basic_session_run_hooks", "py", "262", "]", "loss", "=", "0", "017109463", "step", "=", "0", "W1216", "13", "01", "24", "594182", "140590360139584", "basic_session_run_hooks", "py", "724", "]", "It", "seems", "global", "step", "(", "tf", "train", "get_global_step", ")", "increased", "Current", "value", "(", "could", "stable", "):", "0", "vs", "previous", "value", "0", "You", "could", "increase", "global", "step", "passing", "tf", "train", "get_global_step", "()", "Optimizer", "apply_gradients", "Optimizer", "minimize", "corrupted", "size", "vs", "prev_size", "Aborted", "```", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "Yes", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Linux", "4", "14", "106", "+-", "x86_64", "debian", "buster", "sid", "TensorFlow", "installed", "(", "source", "binary", "):", "pip", "install", "TensorFlow", "version", "(", "use", "command", "):", "2", "0", "0", "Python", "version", "3", "6", "6", "**", "Describe", "current", "behavior", "**", "I", "trying", "train", "model", "using", "TF", "2", "0", "Keras", "functional", "API", "Feature", "columns", "`", "DenseFeatures", "`", "input", "layer", "tf", "data", "Dataset", "API", "`", "x", "`", "parameter", "model", "fit", "()", "This", "raises", "ValueError", "I", "sure", "work", "even", "(", "I", "think", ")", "minimal", "example", "I", "suspect", "might", "due", "TF", "trying", "match", "feature", "columns", "inputs", "name", "name", "Input", "tensor", "contains", "suffix", "e", "g", "`", "age", "0", "`,", "I", "may", "well", "mistaken", "Might", "related", "https", "://", "github", "com", "tensorflow", "tensorflow", "issues", "30143", "**", "Describe", "expected", "behavior", "**", "I", "expect", "able", "train", "model", "using", "Keras", "functional", "API", "using", "data", "Dataset", "API", "feature_columns", "fed", "Input", "layers", "**", "Code", "reproduce", "issue", "**", "The", "following", "test", "case", "represent", "use", "case", "reproduce", "problem", "Despite", "simplistic", "example", "suggests", "I", "explicitly", "require", "feature_columns", "functional", "API", "suggesting", "I", "use", "TF", "libraries", "would", "option", "unless", "I", "replicate", "functionality", "minimal", "effort", "```", "python", "import", "tensorflow", "tf", "import", "numpy", "np", "tensorflow", "keras", "layers", "import", "DenseFeatures", "Dense", "Input", "def", "make_model", "(", "features", "):", "feature_columns", "=", "[", "tf", "feature_column", "numeric_column", "(", "key", ")", "key", "features", "]", "nn_input", "=", "{", "key", "Input", "(", "name", "=", "key", "shape", "=(),", "dtype", "=", "tf", "float32", ")", "key", "features", "}", "feat", "=", "DenseFeatures", "(", "feature_columns", ")(", "nn_input", ")", "dense", "=", "Dense", "(", "16", ")(", "feat", ")", "output", "=", "Dense", "(", "1", ")(", "dense", ")", "model", "=", "tf", "keras", "Model", "(", "inputs", "=", "nn_input", "outputs", "=", "output", ")", "model", "compile", "(", "optimizer", "=", "tf", "keras", "optimizers", "Adam", "(", "learning_rate", "=", "0", "001", "),", "loss", "=", "tf", "keras", "losses", "BinaryCrossentropy", "(", "from_logits", "=", "False", "),", "metrics", "=[", "tf", "keras", "metrics", "AUC", "()],", ")", "return", "model", "features", "=", "[\"", "age", "\",", "income", "\"]", "label", "=", "is_male", "input_dataset", "=", "tf", "data", "Dataset", "from_tensor_slices", "(", "{", "key", "np", "ones", "((", "1000", "1", "),", "dtype", "=", "np", "float", ")", "key", "features", "}", ")", "target_dataset", "=", "tf", "data", "Dataset", "from_tensor_slices", "(", "{", "label", "np", "ones", "((", "1000", "1", "),", "dtype", "=", "np", "int", ")}", ")", "complete_dataset", "=", "tf", "data", "Dataset", "zip", "((", "input_dataset", "target_dataset", ")).", "shuffle", "(", "10000", ")", "model", "=", "make_model", "(", "features", ")", "model", "summary", "()", "model", "fit", "(", "complete_dataset", ")", "```", "This", "code", "references", "issue", "created", "durandg12", "Thank", "**", "Stack", "trace", "**", "```", "bash", "---------------------------------------------------------------------------", "KeyError", "Traceback", "(", "recent", "call", "last", ")", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_utils", "py", "standardize_input_data", "(", "data", "names", "shapes", "check_batch_axis", "exception_prefix", ")", "498", "data", "[", "x", "].", "__class__", "__name__", "==", "DataFrame", "else", "data", "[", "x", "]", "-->", "499", "x", "names", "500", "]", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_utils", "py", "<", "listcomp", ">(.", "0", ")", "498", "data", "[", "x", "].", "__class__", "__name__", "==", "DataFrame", "else", "data", "[", "x", "]", "-->", "499", "x", "names", "500", "]", "KeyError", "dense_1", "During", "handling", "exception", "another", "exception", "occurred", "ValueError", "Traceback", "(", "recent", "call", "last", ")", "<", "ipython", "input", "1", "0081a84113eb", ">", "<", "module", ">", "27", "model", "=", "make_model", "(", "features", ")", "28", "model", "summary", "()", "--->", "29", "model", "fit", "(", "complete_dataset", ")", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training", "py", "fit", "(", "self", "x", "batch_size", "epochs", "verbose", "callbacks", "validation_split", "validation_data", "shuffle", "class_weight", "sample_weight", "initial_epoch", "steps_per_epoch", "validation_steps", "validation_freq", "max_queue_size", "workers", "use_multiprocessing", "**", "kwargs", ")", "726", "max_queue_size", "=", "max_queue_size", "727", "workers", "=", "workers", "-->", "728", "use_multiprocessing", "=", "use_multiprocessing", ")", "729", "730", "def", "evaluate", "(", "self", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_v2", "py", "fit", "(", "self", "model", "x", "batch_size", "epochs", "verbose", "callbacks", "validation_split", "validation_data", "shuffle", "class_weight", "sample_weight", "initial_epoch", "steps_per_epoch", "validation_steps", "validation_freq", "**", "kwargs", ")", "322", "mode", "=", "ModeKeys", "TRAIN", "323", "training_context", "=", "training_context", "-->", "324", "total_epochs", "=", "epochs", ")", "325", "cbks", "make_logs", "(", "model", "epoch_logs", "training_result", "ModeKeys", "TRAIN", ")", "326", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_v2", "py", "run_one_epoch", "(", "model", "iterator", "execution_function", "dataset_size", "batch_size", "strategy", "steps_per_epoch", "num_samples", "mode", "training_context", "total_epochs", ")", "121", "step", "=", "step", "mode", "=", "mode", "size", "=", "current_batch_size", ")", "batch_logs", "122", "try", "-->", "123", "batch_outs", "=", "execution_function", "(", "iterator", ")", "124", "except", "(", "StopIteration", "errors", "OutOfRangeError", "):", "125", "#", "TODO", "(", "kaftan", "):", "File", "bug", "tf", "function", "errors", "OutOfRangeError", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_v2_utils", "py", "execution_function", "(", "input_fn", ")", "84", "#", "`", "numpy", "`", "translates", "Tensors", "values", "Eager", "mode", "85", "return", "nest", "map_structure", "(", "_non_none_constant_value", "--->", "86", "distributed_function", "(", "input_fn", "))", "87", "88", "return", "execution_function", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "def_function", "py", "__call__", "(", "self", "args", "**", "kwds", ")", "455", "456", "tracing_count", "=", "self", "_get_tracing_count", "()", "-->", "457", "result", "=", "self", "_call", "(*", "args", "**", "kwds", ")", "458", "tracing_count", "==", "self", "_get_tracing_count", "():", "459", "self", "_call_counter", "called_without_tracing", "()", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "def_function", "py", "_call", "(", "self", "args", "**", "kwds", ")", "501", "#", "This", "first", "call", "__call__", "initialize", "502", "initializer_map", "=", "object_identity", "ObjectIdentityDictionary", "()", "-->", "503", "self", "_initialize", "(", "args", "kwds", "add_initializers_to", "=", "initializer_map", ")", "504", "finally", "505", "#", "At", "point", "know", "initialization", "complete", "(", "less", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "def_function", "py", "_initialize", "(", "self", "args", "kwds", "add_initializers_to", ")", "406", "self", "_concrete_stateful_fn", "=", "(", "407", "self", "_stateful_fn", "_get_concrete_function_internal_garbage_collected", "(", "#", "pylint", "disable", "=", "protected", "access", "-->", "408", "args", "**", "kwds", "))", "409", "410", "def", "invalid_creator_scope", "(*", "unused_args", "**", "unused_kwds", "):", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "_get_concrete_function_internal_garbage_collected", "(", "self", "args", "**", "kwargs", ")", "1846", "self", "input_signature", "1847", "args", "kwargs", "=", "None", "None", "->", "1848", "graph_function", "_", "_", "=", "self", "_maybe_define_function", "(", "args", "kwargs", ")", "1849", "return", "graph_function", "1850", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "_maybe_define_function", "(", "self", "args", "kwargs", ")", "2148", "graph_function", "=", "self", "_function_cache", "primary", "get", "(", "cache_key", "None", ")", "2149", "graph_function", "None", "->", "2150", "graph_function", "=", "self", "_create_graph_function", "(", "args", "kwargs", ")", "2151", "self", "_function_cache", "primary", "[", "cache_key", "]", "=", "graph_function", "2152", "return", "graph_function", "args", "kwargs", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "_create_graph_function", "(", "self", "args", "kwargs", "override_flat_arg_shapes", ")", "2039", "arg_names", "=", "arg_names", "2040", "override_flat_arg_shapes", "=", "override_flat_arg_shapes", "->", "2041", "capture_by_value", "=", "self", "_capture_by_value", "),", "2042", "self", "_function_attributes", "2043", "#", "Tell", "ConcreteFunction", "clean", "graph", "goes", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "framework", "func_graph", "py", "func_graph_from_py_func", "(", "name", "python_func", "args", "kwargs", "signature", "func_graph", "autograph", "autograph_options", "add_control_dependencies", "arg_names", "op_return_value", "collections", "capture_by_value", "override_flat_arg_shapes", ")", "913", "converted_func", ")", "914", "-->", "915", "func_outputs", "=", "python_func", "(*", "func_args", "**", "func_kwargs", ")", "916", "917", "#", "invariant", "`", "func_outputs", "`", "contains", "Tensors", "CompositeTensors", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "def_function", "py", "wrapped_fn", "(*", "args", "**", "kwds", ")", "356", "#", "__wrapped__", "allows", "AutoGraph", "swap", "converted", "function", "We", "give", "357", "#", "function", "weak", "reference", "avoid", "reference", "cycle", "-->", "358", "return", "weak_wrapped_fn", "().", "__wrapped__", "(*", "args", "**", "kwds", ")", "359", "weak_wrapped_fn", "=", "weakref", "ref", "(", "wrapped_fn", ")", "360", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_v2_utils", "py", "distributed_function", "(", "input_iterator", ")", "71", "strategy", "=", "distribution_strategy_context", "get_strategy", "()", "72", "outputs", "=", "strategy", "experimental_run_v2", "(", "--->", "73", "per_replica_function", "args", "=(", "model", "x", "sample_weights", "))", "74", "#", "Out", "PerReplica", "outputs", "reduce", "pick", "values", "return", "75", "all_outputs", "=", "dist_utils", "unwrap_output_dict", "(", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "distribute", "distribute_lib", "py", "experimental_run_v2", "(", "self", "fn", "args", "kwargs", ")", "758", "fn", "=", "autograph", "tf_convert", "(", "fn", "ag_ctx", "control_status_ctx", "(),", "759", "convert_by_default", "=", "False", ")", "-->", "760", "return", "self", "_extended", "call_for_each_replica", "(", "fn", "args", "=", "args", "kwargs", "=", "kwargs", ")", "761", "762", "def", "reduce", "(", "self", "reduce_op", "value", "axis", "):", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "distribute", "distribute_lib", "py", "call_for_each_replica", "(", "self", "fn", "args", "kwargs", ")", "1785", "kwargs", "=", "{}", "1786", "self", "_container_strategy", "().", "scope", "():", "->", "1787", "return", "self", "_call_for_each_replica", "(", "fn", "args", "kwargs", ")", "1788", "1789", "def", "_call_for_each_replica", "(", "self", "fn", "args", "kwargs", "):", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "distribute", "distribute_lib", "py", "_call_for_each_replica", "(", "self", "fn", "args", "kwargs", ")", "2130", "self", "_container_strategy", "(),", "2131", "replica_id_in_sync_group", "=", "constant_op", "constant", "(", "0", "dtypes", "int32", ")):", "->", "2132", "return", "fn", "(*", "args", "**", "kwargs", ")", "2133", "2134", "def", "_reduce_to", "(", "self", "reduce_op", "value", "destinations", "):", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "autograph", "impl", "api", "py", "wrapper", "(*", "args", "**", "kwargs", ")", "290", "def", "wrapper", "(*", "args", "**", "kwargs", "):", "291", "ag_ctx", "ControlStatusCtx", "(", "status", "=", "ag_ctx", "Status", "DISABLED", "):", "-->", "292", "return", "func", "(*", "args", "**", "kwargs", ")", "293", "294", "inspect", "isfunction", "(", "func", ")", "inspect", "ismethod", "(", "func", "):", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_v2_utils", "py", "train_on_batch", "(", "model", "x", "sample_weight", "class_weight", "reset_metrics", ")", "251", "x", "sample_weights", "=", "model", "_standardize_user_data", "(", "252", "x", "sample_weight", "=", "sample_weight", "class_weight", "=", "class_weight", "-->", "253", "extract_tensors_from_dataset", "=", "True", ")", "254", "batch_size", "=", "array_ops", "shape", "(", "nest", "flatten", "(", "x", "expand_composites", "=", "True", ")[", "0", "])[", "0", "]", "255", "#", "If", "`", "model", "_distribution_strategy", "`", "True", "replica", "context", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training", "py", "_standardize_user_data", "(", "self", "x", "sample_weight", "class_weight", "batch_size", "check_steps", "steps_name", "steps", "validation_split", "shuffle", "extract_tensors_from_dataset", ")", "2517", "shapes", "=", "None", "2518", "check_batch_axis", "=", "False", "#", "Don", "enforce", "batch", "size", "->", "2519", "exception_prefix", "='", "target", "')", "2520", "2521", "#", "Generate", "sample", "wise", "weight", "values", "given", "`", "sample_weight", "`", "opt", "conda", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_utils", "py", "standardize_input_data", "(", "data", "names", "shapes", "check_batch_axis", "exception_prefix", ")", "501", "except", "KeyError", "e", "502", "raise", "ValueError", "('", "No", "data", "provided", "\"'", "e", "args", "[", "0", "]", "'\".", "Need", "data", "-->", "503", "key", "str", "(", "names", "))", "504", "elif", "isinstance", "(", "data", "(", "list", "tuple", ")):", "505", "isinstance", "(", "data", "[", "0", "],", "(", "list", "tuple", ")):", "ValueError", "No", "data", "provided", "dense_1", "\".", "Need", "data", "key", "['", "dense_1", "']", "```", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "No", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Windows", "10", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "NA", "TensorFlow", "installed", "(", "source", "binary", "):", "Binary", "(", "pip", ")", "TensorFlow", "version", "(", "use", "command", "):", "v2", "0", "0", "rc2", "26", "g64c3d382ca", "2", "0", "0", "Python", "version", "Python", "3", "6", "8", "Bazel", "version", "(", "compiling", "source", "):", "NA", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "NA", "CUDA", "cuDNN", "version", "CUDA", "10", "0", "130_411", "31", ";", "cuDNN", "10", "0", "v7", "6", "5", "32", "GPU", "model", "memory", "NVIDIA", "Quadro", "P2000", "4", "GB", "**", "Describe", "current", "behavior", "**", "When", "model", "saved", "default", "tf", "format", "warnings", "logged", "trying", "serve", "model", "Examplary", "warning", "logs", "```", "WARNING", "tensorflow", "5", "last", "5", "calls", "<", "function", "recreate_function", ".<", "locals", ">.", "restored_function_body", "0x000001ED79058730", ">", "triggered", "tf", "function", "retracing", "Tracing", "expensive", "excessive", "number", "tracings", "likely", "due", "passing", "python", "objects", "instead", "tensors", "Also", "tf", "function", "experimental_relax_shapes", "=", "True", "option", "relaxes", "argument", "shapes", "avoid", "unnecessary", "retracing", "Please", "refer", "https", "://", "www", "tensorflow", "org", "beta", "tutorials", "eager", "tf_function", "#", "python_or_tensor_args", "https", "://", "www", "tensorflow", "org", "api_docs", "python", "tf", "function", "details", "```", "When", "model", "saved", "hdf5", "format", "warnings", "occur", "**", "Describe", "expected", "behavior", "**", "The", "save", "formats", "equivalent", "behave", "way", "**", "Code", "reproduce", "issue", "**", "Execute", "following", "scripts", "create", "serve", "model", "1", "Run", "first", "script", "`", "format_ext", "=", "''`", "saves", "model", "tf", "format", "**", "restart", "Python", "console", "**,", "serve", "model", "second", "script", "creates", "aforementioned", "warnings", "1", "When", "running", "scripts", "`", "format_ext", "=", "'.", "h5", "'`,", "model", "saved", "hdf5", "format", "warnings", "appear", "Model", "creation", "```", "python", "import", "os", "import", "tensorflow", "tf", "format_ext", "=", "''", "#", "'.", "h5", "empty", "tf", "format", "model_path", "=", "os", "path", "join", "('", "',", "mnist", "classifier", "{}'.", "format", "(", "format_ext", "))", "gpus", "=", "tf", "config", "experimental", "list_physical_devices", "('", "GPU", "')", "tf", "config", "experimental", "set_virtual_device_configuration", "(", "gpus", "[", "0", "],", "[", "tf", "config", "experimental", "VirtualDeviceConfiguration", "(", "memory_limit", "=", "512", "),", "tf", "config", "experimental", "VirtualDeviceConfiguration", "(", "memory_limit", "=", "512", "),", "tf", "config", "experimental", "VirtualDeviceConfiguration", "(", "memory_limit", "=", "512", ")]", ")", "strategy", "=", "tf", "distribute", "MirroredStrategy", "()", "strategy", "scope", "():", "inputs", "=", "tf", "keras", "Input", "(", "shape", "=(", "784", ",),", "name", "='", "digits", "')", "x", "=", "tf", "keras", "layers", "Dense", "(", "64", "activation", "='", "relu", "',", "name", "='", "dense_1", "')(", "inputs", ")", "x", "=", "tf", "keras", "layers", "Dense", "(", "64", "activation", "='", "relu", "',", "name", "='", "dense_2", "')(", "x", ")", "outputs", "=", "tf", "keras", "layers", "Dense", "(", "10", "activation", "='", "softmax", "',", "name", "='", "predictions", "')(", "x", ")", "model", "=", "tf", "keras", "Model", "(", "inputs", "=", "inputs", "outputs", "=", "outputs", ")", "model", "compile", "(", "optimizer", "=", "tf", "keras", "optimizers", "RMSprop", "(),", "#", "Optimizer", "#", "Loss", "function", "minimize", "loss", "=", "tf", "keras", "losses", "SparseCategoricalCrossentropy", "(),", "#", "List", "metrics", "monitor", "metrics", "=[", "tf", "keras", "metrics", "SparseCategoricalAccuracy", "()])", "model", "save", "(", "model_path", ")", "```", "Model", "serving", "```", "python", "import", "os", "import", "tensorflow", "tf", "format_ext", "=", "''", "#", "'.", "h5", "empty", "tf", "format", "model_path", "=", "os", "path", "join", "('", "',", "mnist", "classifier", "{}'.", "format", "(", "format_ext", "))", "gpus", "=", "tf", "config", "experimental", "list_physical_devices", "('", "GPU", "')", "tf", "config", "experimental", "set_virtual_device_configuration", "(", "gpus", "[", "0", "],", "[", "tf", "config", "experimental", "VirtualDeviceConfiguration", "(", "memory_limit", "=", "512", "),", "tf", "config", "experimental", "VirtualDeviceConfiguration", "(", "memory_limit", "=", "512", "),", "tf", "config", "experimental", "VirtualDeviceConfiguration", "(", "memory_limit", "=", "512", ")]", ")", "(", "_", "_", "),", "(", "x_test", "_", ")", "=", "tf", "keras", "datasets", "mnist", "load_data", "()", "x_test", "=", "x_test", "reshape", "(", "10000", "784", ").", "astype", "('", "float32", "')", "255", "strategy", "=", "tf", "distribute", "MirroredStrategy", "()", "strategy", "scope", "():", "loaded_model", "=", "tf", "keras", "models", "load_model", "(", "model_path", ")", "predictions", "=", "loaded_model", "predict", "(", "x_test", "batch_size", "=", "64", ")", "```", "**", "Other", "info", "logs", "**", "The", "warnings", "occur", "two", "vGPUs", "used", "TensorFlow", "version", "(", "using", "):", "2", "0", "Are", "willing", "contribute", "(", "Yes", "No", "):", "Yes", "```", "tf", "keras", "backend", "floatx", "=", "tf", "float64", "f64", "=", "tf", "Variable", "([", "0", "0", "2", "0", "5", "0", "7", "1", "],", "dtype", "=", "tf", "float64", ")", "tf", "(", "f64", ">", "0", "5", "1", ".,", "0", ")", "<", "tf", "Tensor", "id", "=", "16", "shape", "=(", "5", ",),", "dtype", "=", "float32", "numpy", "=", "array", "([", "0", ".,", "0", ".,", "0", ".,", "1", ".,", "1", "],", "dtype", "=", "float32", ")>", "```", "alternatives", "tf", "float64", "models", "lead", "difficult", "read", "code", "```", "tf", "(", "f64", ">", "0", "5", "tf", "constant", "(", "1", ".,", "dtype", "=", "tf", "float64", "),", "tf", "constant", "(", "0", ".,", "dtype", "=", "tf", "float64", ")", ")", "tf", "cast", "(", "tf", "(", "f64", ">", "0", "5", "1", ".,", "0", "),", "dtype", "=", "tf", "float64", ")", "```", "assuming", "tf", "respect", "float", "type", "input", "variable", "floatx", "setting", "change", "api", "better", "would", "```", "tf", "(", "f64", ">", "0", "5", "1", ".,", "0", "dtype", "=", "tf", "float64", ")", "```", "<", "em", ">", "Please", "make", "sure", "build", "installation", "issue", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "build_template", "</", "em", ">", "**", "System", "information", "**", "OS", "Platform", "Distribution", "Ubuntu", "18", "04", "3", "LTS", "TensorFlow", "installed", "(", "source", "binary", "):", "source", "TensorFlow", "version", "v2", "1", "0", "rc1", "I", "building", "using", "docker", "image", "raspberry", "pi", "3", "build", "**", "Describe", "problem", "**", "I", "able", "correctly", "build", "`", "tensorflow", "2", "1", "0rc1", "cp35", "none", "linux_armv7l", "whl", "`", "using", "```", "CI_DOCKER_EXTRA_PARAMS", "=\"-", "e", "CI_BUILD_PYTHON", "=", "python3", "e", "CROSSTOOL_PYTHON_INCLUDE_PATH", "=/", "usr", "include", "python3", "4", "tensorflow", "tools", "ci_build", "ci_build", "sh", "PI", "PYTHON3", "tensorflow", "tools", "ci_build", "pi", "build_raspberry_pi", "sh", "```", "I", "trying", "python", "3", "7", "docker", "images", "`", "PI", "PYTHON37", "`", "(`", "tensorflow", "tools", "ci_build", "Dockerfile", "pi", "python37", "`)", "fails", "```", "ERROR", "workspace", "tensorflow", "lite", "python", "interpreter_wrapper", "BUILD", "8", "1", "C", "++", "compilation", "rule", "'//", "tensorflow", "lite", "python", "interpreter_wrapper", "numpy", "failed", "(", "Exit", "1", ")", "cc1plus", "warning", "command", "line", "option", "'-", "std", "=", "gnu11", "valid", "C", "ObjC", "C", "++", "In", "file", "included", "bazel", "armeabi", "py2", "opt", "bin", "external", "local_config_python", "python_include", "Python", "h", "8", "0", "./", "tensorflow", "lite", "python", "interpreter_wrapper", "numpy", "h", "49", "tensorflow", "lite", "python", "interpreter_wrapper", "numpy", "cc", "17", "bazel", "armeabi", "py2", "opt", "bin", "external", "local_config_python", "python_include", "pyconfig", "h", "13", "55", "fatal", "error", "arm", "linux", "gnueabihf", "python3", "5m", "pyconfig", "h", "No", "file", "directory", "#", "include", "<", "arm", "linux", "gnueabihf", "python3", "5m", "pyconfig", "h", ">", "^", "compilation", "terminated", "INFO", "Elapsed", "time", "339", "221s", "Critical", "Path", "36", "02s", "INFO", "6204", "processes", "6204", "local", "FAILED", "Build", "NOT", "complete", "successfully", "FAILED", "Build", "NOT", "complete", "successfully", "```", "**", "Provide", "exact", "sequence", "commands", "steps", "executed", "running", "problem", "**", "```", "cd", "tensorflow", "git", "checkout", "v2", "1", "0", "rc1", "CI_DOCKER_EXTRA_PARAMS", "=\"-", "e", "CI_BUILD_PYTHON", "=", "python3", "e", "CROSSTOOL_PYTHON_INCLUDE_PATH", "=/", "usr", "include", "python3", "4", "tensorflow", "tools", "ci_build", "ci_build", "sh", "PI", "PYTHON37", "tensorflow", "tools", "ci_build", "pi", "build_raspberry_pi", "sh", "```", "**", "Any", "info", "logs", "**", "Include", "logs", "source", "code", "would", "helpful", "diagnose", "problem", "If", "including", "tracebacks", "please", "include", "full", "traceback", "Large", "logs", "files", "attached", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "Yes", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Linux", "Ubuntu", "16", "04", "Docker", "TensorFlow", "installed", "(", "source", "binary", "):", "pip", "install", "TensorFlow", "version", "(", "use", "command", "):", "v2", "0", "0", "rc2", "26", "g64c3d38", "Python", "version", "3", "5", "CUDA", "cuDNN", "version", "10", "0", "7", "GPU", "model", "memory", "GTX", "1080Ti", "11175MiB", "**", "Describe", "current", "behavior", "**", "Hi", "authors", "developers", "I", "developing", "project", "tf", "=", "2", "0", "0", "eager_mode", "disable", "The", "main", "reason", "tf", "=", "1", "x", "maintained", "third", "party", "libraries", "ready", "tf", "=", "2", "0", "yet", "This", "issues", "separate", "issues", "[#", "35050", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "issues", "35050", "#", "issuecomment", "565395512", ")", "This", "potential", "issue", "somethine", "wrong", "users", "custom", "training", "level", "API", "includes", "`", "tf", "keras", "layers", "BatchNormalization", "()`", "tf", "=", "2", "0", "eager", "model", "disable", "I", "summary", "testcaset", "following", "```", "python", "#%%", "import", "tensorflow", "tf", "tf", "compat", "v1", "disable_eager_execution", "()", "#", "tf", "compat", "v1", "disable_v2_behavior", "()", "import", "numpy", "np", "batch_size", "=", "100", "def", "download_data", "():", "#", "get", "raw", "data", "(", "trainX", "trainY", "),", "(", "testX", "testY", ")", "=", "tf", "keras", "datasets", "cifar10", "load_data", "()", "trainX", "=", "trainX", "astype", "(", "np", "float32", ")", "testX", "=", "testX", "astype", "(", "np", "float32", ")", "#", "ont", "hot", "trainY", "=", "tf", "keras", "utils", "to_categorical", "(", "trainY", "10", ")", "testY", "=", "tf", "keras", "utils", "to_categorical", "(", "testY", "10", ")", "#", "get", "validation", "sets", "training_size", "=", "45000", "validX", "=", "trainX", "[", "training_size", ":,:]", "validY", "=", "trainY", "[", "training_size", ":,:]", "trainX", "=", "trainX", "[:", "training_size", ",:]", "trainY", "=", "trainY", "[:", "training_size", ",:]", "return", "trainX", "trainY", "validX", "validY", "testX", "testY", "def", "data_pipeline", "(", "dataX", "dataY", "):", "dataset", "=", "tf", "data", "Dataset", "from_tensor_slices", "(", "(", "dataX", "dataY", ")", ")", "dataset", "=", "dataset", "shuffle", "(", "batch_size", "8", ")", "dataset", "=", "dataset", "repeat", "()", "dataset", "=", "dataset", "batch", "(", "batch_size", ")", "dataset", "=", "dataset", "prefetch", "(", "tf", "data", "experimental", "AUTOTUNE", ")", "return", "dataset", "class", "custom_model", "():", "def", "__init__", "(", "self", "):", "def", "Acc", "():", "acc", "=", "tf", "keras", "metrics", "categorical_accuracy", "(", "label_ref", "clf_out", ")", "return", "tf", "math", "reduce_mean", "(", "acc", ")", "def", "c_loss", "():", "loss", "=", "tf", "keras", "losses", "categorical_crossentropy", "(", "label_ref", "clf_out", ")", "loss", "=", "tf", "math", "reduce_mean", "(", "loss", ")", "return", "loss", "#", "create", "model", "clf_input", "=", "tf", "keras", "layers", "Input", "(", "shape", "=(", "32", "32", "3", "),", "name", "=\"", "model", "input", "\")", "model", "=", "tf", "keras", "applications", "resnet_v2", "ResNet50V2", "(", "include_top", "=", "True", "weights", "=", "None", "input_tensor", "=", "clf_input", "pooling", "='", "max", "',", "classes", "=", "10", ")", "#", "model", "=", "tf", "keras", "applications", "vgg16", "VGG16", "(", "include_top", "=", "True", "weights", "=", "None", "input_tensor", "=", "clf_input", "pooling", "='", "max", "',", "classes", "=", "10", ")", "model", "compile", "(", "loss", "='", "categorical_crossentropy", "',", "optimizer", "='", "SGD", "',", "metrics", "=['", "accuracy", "'])", "label_ref", "=", "tf", "keras", "layers", "Input", "(", "shape", "=(", "10", ",)", "name", "='", "label_ref", "')", "clf_out", "=", "model", "(", "clf_input", ")", "#", "using", "tf", "keras", "optimizers", "Nadam", "would", "get", "error", "#", "optimizer", "=", "tf", "keras", "optimizers", "Nadam", "(", "lr", "=", "0", "0005", ")", "optimizer", "=", "tf", "compat", "v1", "train", "AdamOptimizer", "(", "learning_rate", "=", "0", "01", ")", "self", "train_op", "=", "optimizer", "minimize", "(", "c_loss", "(),", "var_list", "=[", "model", "trainable_variables", "])", "self", "clf_model", "=", "model", "self", "clf_input", "=", "clf_input", "self", "label_ref", "=", "label_ref", "self", "op_acc", "=", "Acc", "()", "self", "c_loss", "=", "c_loss", "()", "__name__", "==", "__main__", "':", "#", "set", "GPU", "import", "os", "os", "environ", "get", "(\"", "CUDA_VISIBLE_DEVICES", "\")", "None", "os", "environ", "[\"", "CUDA_VISIBLE_DEVICES", "\"]", "=", "0", "#", "reset", "tf", "session", "tf", "compat", "v1", "keras", "backend", "clear_session", "()", "gpu_options", "=", "tf", "compat", "v1", "GPUOptions", "(", "allow_growth", "=", "True", ")", "sess", "=", "tf", "compat", "v1", "Session", "(", "config", "=", "tf", "compat", "v1", "ConfigProto", "(", "gpu_options", "=", "gpu_options", "))", "tf", "compat", "v1", "keras", "backend", "set_session", "(", "sess", ")", "#", "prepare", "data", "trainX", "trainY", "validX", "validY", "testX", "testY", "=", "download_data", "()", "train_gen", "=", "data_pipeline", "(", "trainX", "trainY", ")", "valid_gen", "=", "data_pipeline", "(", "validX", "validY", ")", "test_gen", "=", "data_pipeline", "(", "testX", "testY", ")", "#", "build", "targeted", "model", "model", "=", "tf", "keras", "applications", "resnet_v2", "ResNet50V2", "(", "include_top", "=", "True", "weights", "=", "None", "input_shape", "=(", "32", "32", "3", "),", "pooling", "='", "max", "',", "classes", "=", "10", ")", "#", "model", "=", "tf", "keras", "applications", "vgg16", "VGG16", "(", "include_top", "=", "True", "weights", "=", "None", "input_shape", "=(", "32", "32", "3", "),", "pooling", "=", "None", "classes", "=", "10", ")", "model", "compile", "(", "loss", "='", "categorical_crossentropy", "',", "optimizer", "='", "SGD", "',", "metrics", "=['", "accuracy", "'])", "#", "fit", "evalutate", "model", "fit", "(", "train_gen", "steps_per_epoch", "=", "trainY", "shape", "[", "0", "]", "batch_size", "validation_data", "=", "valid_gen", "validation_steps", "=", "validY", "shape", "[", "0", "]", "batch_size", "epochs", "=", "5", "verbose", "=", "2", ")", "model", "evaluate", "(", "testX", "testY", "verbose", "=", "2", "batch_size", "=", "batch_size", ")", "#", "create", "new", "model", "print", "('", "Make", "sure", "create", "new", "model", ".')", "model", "=", "custom_model", "()", "sess", "run", "(", "tf", "compat", "v1", "global_variables_initializer", "())", "model", "clf_model", "evaluate", "(", "testX", "testY", "verbose", "=", "2", "batch_size", "=", "batch_size", ")", "#", "train", "model", "num_epoch", "=", "5", "total_len", "=", "trainY", "shape", "[", "0", "]", "batch_size", "tf_iter", "=", "tf", "compat", "v1", "data", "make_initializable_iterator", "(", "train_gen", ")", "tf_next", "=", "tf_iter", "get_next", "()", "sess", "run", "(", "tf_iter", "initializer", ")", "epoch", "range", "(", "num_epoch", "):", "c_loss", "acc", "=", "0", "0", "0", "0", "ii", "range", "(", "total_len", "):", "X", "Y", "=", "sess", "run", "(", "tf_next", ")", "[", "b_c_loss", "b_acc", "_", "]", "=", "sess", "run", "([", "model", "c_loss", "model", "op_acc", "model", "train_op", "],", "feed_dict", "={", "model", "clf_input", "X", "model", "label_ref", "Y", "tf", "keras", "backend", "learning_phase", "():", "1", "})", "c_loss", "=", "c_loss", "b_c_loss", "acc", "=", "acc", "b_acc", "c_loss", "=", "c_loss", "total_len", "acc", "=", "acc", "total_len", "print", "('[", "Training", "]", "Epoch", "{:", "}/{:", "}", "loss", "{:.", "3f", "}", "acc", "{:.", "3f", "}'.", "format", "(", "epoch", "1", "num_epoch", "c_loss", "acc", ")", ")", "print", "('", "Show", "loss", "accuracy", "keras", "API", "')", "model", "clf_model", "evaluate", "(", "trainX", "trainY", "verbose", "=", "2", "batch_size", "=", "batch_size", ")", "model", "clf_model", "evaluate", "(", "validX", "validY", "verbose", "=", "2", "batch_size", "=", "batch_size", ")", "model", "clf_model", "evaluate", "(", "testX", "testY", "verbose", "=", "2", "batch_size", "=", "batch_size", ")", "print", "('", "Show", "loss", "accuracy", "low", "level", "API", "')", "#", "evaluate", "num_epoch", "=", "1", "total_len", "=", "validY", "shape", "[", "0", "]", "batch_size", "tf_iter", "=", "tf", "compat", "v1", "data", "make_initializable_iterator", "(", "valid_gen", ")", "tf_next", "=", "tf_iter", "get_next", "()", "sess", "run", "(", "tf_iter", "initializer", ")", "epoch", "range", "(", "num_epoch", "):", "c_loss_t", "acc_t", "c_loss_f", "acc_f", "=", "0", "0", "0", "0", "0", "0", "0", "0", "ii", "range", "(", "total_len", "):", "X", "Y", "=", "sess", "run", "(", "tf_next", ")", "[", "b_c_loss", "b_acc", "]", "=", "sess", "run", "([", "model", "c_loss", "model", "op_acc", "],", "feed_dict", "={", "model", "clf_input", "X", "model", "label_ref", "Y", "tf", "keras", "backend", "learning_phase", "():", "1", "})", "c_loss_t", "=", "c_loss_t", "b_c_loss", "acc_t", "=", "acc_t", "b_acc", "[", "b_c_loss", "b_acc", "]", "=", "sess", "run", "([", "model", "c_loss", "model", "op_acc", "],", "feed_dict", "={", "model", "clf_input", "X", "model", "label_ref", "Y", "tf", "keras", "backend", "learning_phase", "():", "0", "})", "c_loss_f", "=", "c_loss_f", "b_c_loss", "acc_f", "=", "acc_f", "b_acc", "c_loss_t", "=", "c_loss_t", "total_len", "c_loss_f", "=", "c_loss_f", "total_len", "acc_t", "=", "acc_t", "total_len", "acc_f", "=", "acc_f", "total_len", "print", "('[", "Validation", "][", "learning_phase", "=", "1", "]", "Epoch", "{:", "}/{:", "}", "loss", "{:.", "3f", "}", "acc", "{:.", "3f", "}'.", "format", "(", "epoch", "1", "num_epoch", "c_loss_t", "acc_t", ")", ")", "print", "('[", "Validation", "][", "learning_phase", "=", "0", "]", "Epoch", "{:", "}/{:", "}", "loss", "{:.", "3f", "}", "acc", "{:.", "3f", "}'.", "format", "(", "epoch", "1", "num_epoch", "c_loss_f", "acc_f", ")", ")", "#", "evaluate", "num_epoch", "=", "1", "total_len", "=", "testY", "shape", "[", "0", "]", "batch_size", "tf_iter", "=", "tf", "compat", "v1", "data", "make_initializable_iterator", "(", "test_gen", ")", "tf_next", "=", "tf_iter", "get_next", "()", "sess", "run", "(", "tf_iter", "initializer", ")", "epoch", "range", "(", "num_epoch", "):", "c_loss_t", "acc_t", "c_loss_f", "acc_f", "=", "0", "0", "0", "0", "0", "0", "0", "0", "ii", "range", "(", "total_len", "):", "X", "Y", "=", "sess", "run", "(", "tf_next", ")", "[", "b_c_loss", "b_acc", "]", "=", "sess", "run", "([", "model", "c_loss", "model", "op_acc", "],", "feed_dict", "={", "model", "clf_input", "X", "model", "label_ref", "Y", "tf", "keras", "backend", "learning_phase", "():", "1", "})", "c_loss_t", "=", "c_loss_t", "b_c_loss", "acc_t", "=", "acc_t", "b_acc", "[", "b_c_loss", "b_acc", "]", "=", "sess", "run", "([", "model", "c_loss", "model", "op_acc", "],", "feed_dict", "={", "model", "clf_input", "X", "model", "label_ref", "Y", "tf", "keras", "backend", "learning_phase", "():", "0", "})", "c_loss_f", "=", "c_loss_f", "b_c_loss", "acc_f", "=", "acc_f", "b_acc", "c_loss_t", "=", "c_loss_t", "total_len", "c_loss_f", "=", "c_loss_f", "total_len", "acc_t", "=", "acc_t", "total_len", "acc_f", "=", "acc_f", "total_len", "print", "('[", "Testing", "][", "learning_phase", "=", "1", "]", "Epoch", "{:", "}/{:", "}", "loss", "{:.", "3f", "}", "acc", "{:.", "3f", "}'.", "format", "(", "epoch", "1", "num_epoch", "c_loss_t", "acc_t", ")", ")", "print", "('[", "Testing", "][", "learning_phase", "=", "0", "]", "Epoch", "{:", "}/{:", "}", "loss", "{:.", "3f", "}", "acc", "{:.", "3f", "}'.", "format", "(", "epoch", "1", "num_epoch", "c_loss_f", "acc_f", ")", ")", "```", "The", "first", "part", "testing", "case", "training", "model", "high", "leval", "API", "result", "expected", "```", "450", "450", "39s", "loss", "1", "9658", "accuracy", "0", "2993", "val_loss", "1", "7215", "val_accuracy", "0", "3738", "Epoch", "2", "5", "450", "450", "28s", "loss", "1", "5722", "accuracy", "0", "4334", "val_loss", "1", "5897", "val_accuracy", "0", "4152", "Epoch", "3", "5", "450", "450", "27s", "loss", "1", "3876", "accuracy", "0", "4993", "val_loss", "1", "4867", "val_accuracy", "0", "4770", "Epoch", "4", "5", "450", "450", "28s", "loss", "1", "2564", "accuracy", "0", "5477", "val_loss", "1", "3498", "val_accuracy", "0", "5060", "Epoch", "5", "5", "450", "450", "27s", "loss", "1", "1488", "accuracy", "0", "5888", "val_loss", "1", "3380", "val_accuracy", "0", "5232", "10000", "10000", "3s", "loss", "1", "3523", "accuracy", "0", "5289", "```", "I", "got", "strange", "loss", "ourput", "seen", "following", "```", "Make", "sure", "create", "new", "model", "10000", "10000", "3s", "loss", "10", "2004", "accuracy", "0", "1048", "[", "Training", "]", "Epoch", "1", "5", "loss", "2", "288", "acc", "0", "268", "[", "Training", "]", "Epoch", "2", "5", "loss", "1", "513", "acc", "0", "448", "[", "Training", "]", "Epoch", "3", "5", "loss", "1", "285", "acc", "0", "537", "[", "Training", "]", "Epoch", "4", "5", "loss", "1", "426", "acc", "0", "487", "[", "Training", "]", "Epoch", "5", "5", "loss", "1", "306", "acc", "0", "535", "Show", "loss", "accuracy", "keras", "API", "45000", "45000", "9s", "loss", "nan", "accuracy", "0", "1002", "5000", "5000", "1s", "loss", "nan", "accuracy", "0", "0986", "10000", "10000", "2s", "loss", "nan", "accuracy", "0", "1000", "Show", "loss", "accuracy", "low", "level", "API", "[", "Validation", "][", "learning_phase", "=", "1", "]", "Epoch", "1", "1", "loss", "1", "163", "acc", "0", "585", "[", "Validation", "][", "learning_phase", "=", "0", "]", "Epoch", "1", "1", "loss", "nan", "acc", "0", "099", "[", "Testing", "][", "learning_phase", "=", "1", "]", "Epoch", "1", "1", "loss", "1", "179", "acc", "0", "587", "[", "Testing", "][", "learning_phase", "=", "0", "]", "Epoch", "1", "1", "loss", "nan", "acc", "0", "100", "```", "Obviously", "training", "custom", "model", "low", "level", "API", "result", "would", "wrong", "setting", "`", "tf", "keras", "backend", "learning_phase", "():", "0", "`", "Also", "result", "keras", "API", "wrong", "`", "tf", "keras", "backend", "learning_phase", "():", "0", "`", "may", "affect", "behavior", "`", "tf", "keras", "layers", "BatchNormalization", "()`", "I", "sure", "whether", "root", "cause", "I", "tried", "small", "custom", "model", "without", "`", "tf", "keras", "layers", "BatchNormalization", "()`", "MNIST", "dataset", "result", "normal", "The", "testcase", "MNIST", "shown", "following", "```", "python", "import", "tensorflow", "tf", "tf", "compat", "v1", "disable_eager_execution", "()", "#", "tf", "compat", "v1", "disable_v2_behavior", "()", "import", "numpy", "np", "batch_size", "=", "100", "def", "download_data", "():", "#", "get", "raw", "data", "(", "trainX", "trainY", "),", "(", "testX", "testY", ")", "=", "tf", "keras", "datasets", "mnist", "load_data", "()", "trainX", "=", "trainX", "astype", "(", "np", "float32", ")", "testX", "=", "testX", "astype", "(", "np", "float32", ")", "#", "ont", "hot", "trainY", "=", "tf", "keras", "utils", "to_categorical", "(", "trainY", "10", ")", "testY", "=", "tf", "keras", "utils", "to_categorical", "(", "testY", "10", ")", "#", "get", "validation", "sets", "training_size", "=", "55000", "validX", "=", "trainX", "[", "training_size", ":,:]", "validY", "=", "trainY", "[", "training_size", ":,:]", "trainX", "=", "trainX", "[:", "training_size", ",:]", "trainY", "=", "trainY", "[:", "training_size", ",:]", "#", "expand", "dimesion", "trainX", "=", "np", "expand_dims", "(", "trainX", "axis", "=", "3", ")", "validX", "=", "np", "expand_dims", "(", "validX", "axis", "=", "3", ")", "testX", "=", "np", "expand_dims", "(", "testX", "axis", "=", "3", ")", "return", "trainX", "trainY", "validX", "validY", "testX", "testY", "def", "data_pipeline", "(", "dataX", "dataY", "):", "dataset", "=", "tf", "data", "Dataset", "from_tensor_slices", "(", "(", "dataX", "dataY", ")", ")", "dataset", "=", "dataset", "shuffle", "(", "batch_size", "8", ")", "dataset", "=", "dataset", "repeat", "()", "dataset", "=", "dataset", "batch", "(", "batch_size", ")", "dataset", "=", "dataset", "prefetch", "(", "tf", "data", "experimental", "AUTOTUNE", ")", "return", "dataset", "class", "custom_model", "():", "def", "__init__", "(", "self", "):", "def", "Acc", "():", "acc", "=", "tf", "keras", "metrics", "categorical_accuracy", "(", "label_ref", "clf_out", ")", "return", "tf", "math", "reduce_mean", "(", "acc", ")", "def", "c_loss", "():", "loss", "=", "tf", "keras", "losses", "categorical_crossentropy", "(", "label_ref", "clf_out", ")", "loss", "=", "tf", "math", "reduce_mean", "(", "loss", ")", "return", "loss", "#", "declare", "variables", "self", "init_op", "=", "tf", "compat", "v1", "keras", "initializers", "he_normal", "()", "model_layers", "=", "[", "tf", "keras", "layers", "Conv2D", "(", "16", "(", "3", "3", "),", "padding", "=\"", "\",", "activation", "=\"", "relu", "\",", "kernel_initializer", "=", "self", "init_op", "name", "=\"", "clf", "c1", "\"),", "tf", "keras", "layers", "Conv2D", "(", "32", "(", "3", "3", "),", "padding", "=\"", "\",", "activation", "=\"", "relu", "\",", "kernel_initializer", "=", "self", "init_op", "name", "=\"", "clf", "c2", "\"),", "tf", "keras", "layers", "MaxPooling2D", "(", "pool_size", "=(", "2", "2", "),", "name", "=\"", "clf", "p1", "\"),", "tf", "keras", "layers", "Conv2D", "(", "32", "(", "3", "3", "),", "padding", "=\"", "\",", "activation", "=\"", "relu", "\",", "kernel_initializer", "=", "self", "init_op", "name", "=\"", "clf", "c3", "\"),", "tf", "keras", "layers", "Conv2D", "(", "64", "(", "3", "3", "),", "padding", "=\"", "\",", "activation", "=\"", "relu", "\",", "kernel_initializer", "=", "self", "init_op", "name", "=\"", "clf", "c4", "\"),", "tf", "keras", "layers", "MaxPooling2D", "(", "pool_size", "=(", "2", "2", "),", "name", "=\"", "clf", "p2", "\"),", "tf", "keras", "layers", "Flatten", "(", "name", "=\"", "clf", "f1", "\"),", "tf", "keras", "layers", "Dense", "(", "256", "activation", "=\"", "relu", "\",", "kernel_initializer", "=", "self", "init_op", "name", "=\"", "clf", "d1", "\"),", "tf", "keras", "layers", "Dense", "(", "10", "activation", "=", "None", "kernel_initializer", "=", "self", "init_op", "name", "=\"", "clf", "d2", "\"),", "tf", "keras", "layers", "Activation", "('", "softmax", "',", "name", "=\"", "clf", "a1", "\")", "]", "#", "clf_model", "clf_input", "=", "tf", "keras", "layers", "Input", "(", "shape", "=(", "28", "28", "1", "),", "name", "=\"", "model", "input", "\")", "clf_out", "=", "clf_input", "ii", "model_layers", "clf_out", "=", "ii", "(", "clf_out", ")", "clf_model", "=", "tf", "keras", "models", "Model", "(", "inputs", "=", "clf_input", "outputs", "=", "clf_out", "name", "='", "clf_model", "')", "clf_model", "compile", "(", "loss", "='", "categorical_crossentropy", "',", "optimizer", "='", "Nadam", "',", "metrics", "=['", "accuracy", "'])", "label_ref", "=", "tf", "keras", "layers", "Input", "(", "shape", "=(", "10", ",)", "name", "='", "label_ref", "')", "clf_out", "=", "clf_model", "(", "clf_input", ")", "#", "using", "tf", "keras", "optimizers", "Nadam", "would", "get", "error", "#", "optimizer", "=", "tf", "keras", "optimizers", "Nadam", "(", "lr", "=", "0", "0005", ")", "optimizer", "=", "tf", "compat", "v1", "train", "AdamOptimizer", "(", "learning_rate", "=", "0", "01", ")", "self", "train_op", "=", "optimizer", "minimize", "(", "c_loss", "(),", "var_list", "=[", "clf_model", "trainable_variables", "])", "self", "clf_model", "=", "clf_model", "self", "clf_input", "=", "clf_input", "self", "label_ref", "=", "label_ref", "self", "op_acc", "=", "Acc", "()", "self", "c_loss", "=", "c_loss", "()", "__name__", "==", "__main__", "':", "#", "set", "GPU", "import", "os", "os", "environ", "get", "(\"", "CUDA_VISIBLE_DEVICES", "\")", "None", "os", "environ", "[\"", "CUDA_VISIBLE_DEVICES", "\"]", "=", "0", "#", "reset", "tf", "session", "tf", "compat", "v1", "keras", "backend", "clear_session", "()", "gpu_options", "=", "tf", "compat", "v1", "GPUOptions", "(", "allow_growth", "=", "True", ")", "sess", "=", "tf", "compat", "v1", "Session", "(", "config", "=", "tf", "compat", "v1", "ConfigProto", "(", "gpu_options", "=", "gpu_options", "))", "tf", "compat", "v1", "keras", "backend", "set_session", "(", "sess", ")", "#", "prepare", "data", "trainX", "trainY", "validX", "validY", "testX", "testY", "=", "download_data", "()", "train_gen", "=", "data_pipeline", "(", "trainX", "trainY", ")", "valid_gen", "=", "data_pipeline", "(", "validX", "validY", ")", "test_gen", "=", "data_pipeline", "(", "testX", "testY", ")", "#", "create", "new", "model", "print", "('", "Make", "sure", "create", "new", "model", ".')", "model", "=", "custom_model", "()", "sess", "run", "(", "tf", "compat", "v1", "global_variables_initializer", "())", "model", "clf_model", "evaluate", "(", "testX", "testY", "verbose", "=", "2", "batch_size", "=", "batch_size", ")", "#", "train", "model", "num_epoch", "=", "5", "total_len", "=", "trainY", "shape", "[", "0", "]", "batch_size", "tf_iter", "=", "tf", "compat", "v1", "data", "make_initializable_iterator", "(", "train_gen", ")", "tf_next", "=", "tf_iter", "get_next", "()", "sess", "run", "(", "tf_iter", "initializer", ")", "epoch", "range", "(", "num_epoch", "):", "c_loss", "acc", "=", "0", "0", "0", "0", "ii", "range", "(", "total_len", "):", "X", "Y", "=", "sess", "run", "(", "tf_next", ")", "[", "b_c_loss", "b_acc", "_", "]", "=", "sess", "run", "([", "model", "c_loss", "model", "op_acc", "model", "train_op", "],", "feed_dict", "={", "model", "clf_input", "X", "model", "label_ref", "Y", "tf", "keras", "backend", "learning_phase", "():", "1", "})", "c_loss", "=", "c_loss", "b_c_loss", "acc", "=", "acc", "b_acc", "c_loss", "=", "c_loss", "total_len", "acc", "=", "acc", "total_len", "print", "('[", "Training", "]", "Epoch", "{:", "}/{:", "}", "loss", "{:.", "3f", "}", "acc", "{:.", "3f", "}'.", "format", "(", "epoch", "1", "num_epoch", "c_loss", "acc", ")", ")", "print", "('", "Show", "loss", "accuracy", "keras", "API", "')", "model", "clf_model", "evaluate", "(", "trainX", "trainY", "verbose", "=", "2", "batch_size", "=", "batch_size", ")", "model", "clf_model", "evaluate", "(", "validX", "validY", "verbose", "=", "2", "batch_size", "=", "batch_size", ")", "model", "clf_model", "evaluate", "(", "testX", "testY", "verbose", "=", "2", "batch_size", "=", "batch_size", ")", "print", "('", "Show", "loss", "accuracy", "low", "level", "API", "')", "#", "evaluate", "num_epoch", "=", "1", "total_len", "=", "validY", "shape", "[", "0", "]", "batch_size", "tf_iter", "=", "tf", "compat", "v1", "data", "make_initializable_iterator", "(", "valid_gen", ")", "tf_next", "=", "tf_iter", "get_next", "()", "sess", "run", "(", "tf_iter", "initializer", ")", "epoch", "range", "(", "num_epoch", "):", "c_loss_t", "acc_t", "c_loss_f", "acc_f", "=", "0", "0", "0", "0", "0", "0", "0", "0", "ii", "range", "(", "total_len", "):", "X", "Y", "=", "sess", "run", "(", "tf_next", ")", "[", "b_c_loss", "b_acc", "]", "=", "sess", "run", "([", "model", "c_loss", "model", "op_acc", "],", "feed_dict", "={", "model", "clf_input", "X", "model", "label_ref", "Y", "tf", "keras", "backend", "learning_phase", "():", "1", "})", "c_loss_t", "=", "c_loss_t", "b_c_loss", "acc_t", "=", "acc_t", "b_acc", "[", "b_c_loss", "b_acc", "]", "=", "sess", "run", "([", "model", "c_loss", "model", "op_acc", "],", "feed_dict", "={", "model", "clf_input", "X", "model", "label_ref", "Y", "tf", "keras", "backend", "learning_phase", "():", "0", "})", "c_loss_f", "=", "c_loss_f", "b_c_loss", "acc_f", "=", "acc_f", "b_acc", "c_loss_t", "=", "c_loss_t", "total_len", "c_loss_f", "=", "c_loss_f", "total_len", "acc_t", "=", "acc_t", "total_len", "acc_f", "=", "acc_f", "total_len", "print", "('[", "Validation", "][", "learning_phase", "=", "1", "]", "Epoch", "{:", "}/{:", "}", "loss", "{:.", "3f", "}", "acc", "{:.", "3f", "}'.", "format", "(", "epoch", "1", "num_epoch", "c_loss_t", "acc_t", ")", ")", "print", "('[", "Validation", "][", "learning_phase", "=", "0", "]", "Epoch", "{:", "}/{:", "}", "loss", "{:.", "3f", "}", "acc", "{:.", "3f", "}'.", "format", "(", "epoch", "1", "num_epoch", "c_loss_f", "acc_f", ")", ")", "#", "evaluate", "num_epoch", "=", "1", "total_len", "=", "testY", "shape", "[", "0", "]", "batch_size", "tf_iter", "=", "tf", "compat", "v1", "data", "make_initializable_iterator", "(", "test_gen", ")", "tf_next", "=", "tf_iter", "get_next", "()", "sess", "run", "(", "tf_iter", "initializer", ")", "epoch", "range", "(", "num_epoch", "):", "c_loss_t", "acc_t", "c_loss_f", "acc_f", "=", "0", "0", "0", "0", "0", "0", "0", "0", "ii", "range", "(", "total_len", "):", "X", "Y", "=", "sess", "run", "(", "tf_next", ")", "[", "b_c_loss", "b_acc", "]", "=", "sess", "run", "([", "model", "c_loss", "model", "op_acc", "],", "feed_dict", "={", "model", "clf_input", "X", "model", "label_ref", "Y", "tf", "keras", "backend", "learning_phase", "():", "1", "})", "c_loss_t", "=", "c_loss_t", "b_c_loss", "acc_t", "=", "acc_t", "b_acc", "[", "b_c_loss", "b_acc", "]", "=", "sess", "run", "([", "model", "c_loss", "model", "op_acc", "],", "feed_dict", "={", "model", "clf_input", "X", "model", "label_ref", "Y", "tf", "keras", "backend", "learning_phase", "():", "0", "})", "c_loss_f", "=", "c_loss_f", "b_c_loss", "acc_f", "=", "acc_f", "b_acc", "c_loss_t", "=", "c_loss_t", "total_len", "c_loss_f", "=", "c_loss_f", "total_len", "acc_t", "=", "acc_t", "total_len", "acc_f", "=", "acc_f", "total_len", "print", "('[", "Testing", "][", "learning_phase", "=", "1", "]", "Epoch", "{:", "}/{:", "}", "loss", "{:.", "3f", "}", "acc", "{:.", "3f", "}'.", "format", "(", "epoch", "1", "num_epoch", "c_loss_t", "acc_t", ")", ")", "print", "('[", "Testing", "][", "learning_phase", "=", "0", "]", "Epoch", "{:", "}/{:", "}", "loss", "{:.", "3f", "}", "acc", "{:.", "3f", "}'.", "format", "(", "epoch", "1", "num_epoch", "c_loss_f", "acc_f", ")", ")", "```", "Definitely", "got", "normal", "output", "```", "Make", "sure", "create", "new", "model", "10000", "10000", "1s", "loss", "398", "0696", "acc", "0", "1151", "[", "Training", "]", "Epoch", "1", "5", "loss", "11", "997", "acc", "0", "558", "[", "Training", "]", "Epoch", "2", "5", "loss", "0", "474", "acc", "0", "849", "[", "Training", "]", "Epoch", "3", "5", "loss", "0", "282", "acc", "0", "914", "[", "Training", "]", "Epoch", "4", "5", "loss", "0", "213", "acc", "0", "935", "[", "Training", "]", "Epoch", "5", "5", "loss", "0", "181", "acc", "0", "945", "Show", "loss", "accuracy", "keras", "API", "55000", "55000", "1s", "loss", "0", "1555", "acc", "0", "9535", "5000", "5000", "0s", "loss", "0", "1501", "acc", "0", "9584", "10000", "10000", "0s", "loss", "0", "1687", "acc", "0", "9539", "Show", "loss", "accuracy", "low", "level", "API", "[", "Validation", "][", "learning_phase", "=", "1", "]", "Epoch", "1", "1", "loss", "0", "150", "acc", "0", "958", "[", "Validation", "][", "learning_phase", "=", "0", "]", "Epoch", "1", "1", "loss", "0", "150", "acc", "0", "958", "[", "Testing", "][", "learning_phase", "=", "1", "]", "Epoch", "1", "1", "loss", "0", "169", "acc", "0", "954", "[", "Testing", "][", "learning_phase", "=", "0", "]", "Epoch", "1", "1", "loss", "0", "169", "acc", "0", "954", "```", "**", "Describe", "expected", "behavior", "**", "It", "work", "properly", "**", "Code", "reproduce", "issue", "**", "Please", "see", "section", "**", "Describe", "current", "behavior", "**", "**", "Other", "info", "logs", "**", "skip", "...", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "N", "A", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Ubuntu", "16", "04", "6", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "TensorFlow", "installed", "(", "source", "binary", "):", "binary", "TensorFlow", "version", "(", "use", "command", "):", "v2", "0", "0", "rc2", "26", "g64c3d38", "2", "0", "0", "Python", "version", "3", "7", "3", "Bazel", "version", "(", "compiling", "source", "):", "N", "A", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "N", "A", "CUDA", "cuDNN", "version", "V10", "0", "130", "GPU", "model", "memory", "Tesla", "V100", "SXM2", "**", "Describe", "current", "behavior", "**", "In", "Adam", "paper", "subtract", "following", "quantity", "current", "gradient", "[", "0", "]:", "\\", "alpha", "\\", "hat", "{", "m_t", "}", "(\\", "sqrt", "{", "v_t", "(", "1", "-\\", "beta", "^", "t_2", ")}", "\\", "epsilon", ")", "<", "img", "width", "=\"", "475", "alt", "=\"", "Screen", "Shot", "2019", "12", "13", "2", "32", "58", "PM", "src", "=\"", "https", "://", "user", "images", "githubusercontent", "com", "54961543", "70836600", "7f490780", "1db5", "11ea", "9669", "27c50fe48cae", "png", "\">", "The", "Tensorflow", "implementation", "subtracts", "subtly", "different", "quantity", "([", "1", "]):", "\\", "alpha", "\\", "hat", "{", "m_t", "}", "\\", "sqrt", "{", "1", "-\\", "beta", "^", "T_2", "}", "(\\", "sqrt", "{", "v_t", "}", "\\", "epsilon", ")", "<", "img", "width", "=\"", "438", "alt", "=\"", "Screen", "Shot", "2019", "12", "13", "2", "34", "36", "PM", "src", "=\"", "https", "://", "user", "images", "githubusercontent", "com", "54961543", "70836654", "c1724900", "1db5", "11ea", "9260", "5fc0678f6f39", "png", "\">", "The", "difference", "two", "expressions", "first", "de", "bias", "moving", "average", "squared", "gradient", "v_t", "In", "second", "bias", "correction", "also", "applied", "\\", "epsilon", "This", "manifests", "scaling", "epilson", "quite", "lot", "early", "training", "steps", "reducing", "magnitude", "gradient", "update", "Note", "bug", "present", "PyTorch", "prior", "v1", "3", "It", "fixed", "PR", "https", "://", "github", "com", "pytorch", "pytorch", "pull", "22628", "That", "PR", "description", "provides", "useful", "visualization", "**", "Describe", "expected", "behavior", "**", "Implement", "algorithm", "described", "paper", "If", "old", "implementation", "necessary", "preserve", "back", "compat", "providing", "flag", "trigger", "correct", "implementation", "would", "helpful", "[", "0", "]", "https", "://", "arxiv", "org", "pdf", "1412", "6980", "pdf", "see", "final", "2", "lines", "Algorithm", "1", "[", "1", "]", "Notable", "lines", "TF", "implementation", "regarding", "issue", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "r2", "0", "tensorflow", "python", "keras", "optimizer_v2", "adam", "py", "#", "L162", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "r2", "0", "tensorflow", "python", "keras", "optimizer_v2", "adam", "py", "#", "L245", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "tensorflow", "core", "kernels", "training_ops", "cc", "#", "L373", "**", "System", "information", "**", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "OSX", "10", "14", "6", "TensorFlow", "installed", "(", "source", "binary", "):", "source", "TensorFlow", "version", "1", "15", "0", "(", "observation", "version", "2", "0", "),", "https", "://", "github", "com", "tensorflow", "tensorflow", "releases", "tag", "v1", "15", "0", "Python", "version", "python3", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "arm", "none", "eabi", "g", "++", "**", "Describe", "problem", "**", "The", "standalone", "projects", "generated", "Tensorflow", "Lite", "seem", "missing", "headers", "Following", "tutorial", "[", "https", "://", "www", "tensorflow", "org", "lite", "microcontrollers", "library", "#", "generate_projects_for_other_platforms", "](", "https", "://", "www", "tensorflow", "org", "lite", "microcontrollers", "library", "#", "generate_projects_for_other_platforms", ")", "I", "run", "following", "command", "(", "link", "seems", "tutorial", "micro", "another", "subfolder", "experimental", "'):", "`", "gmake", "f", "tensorflow", "lite", "experimental", "micro", "tools", "make", "Makefile", "TARGET", "=", "sparkfun_edge", "generate_projects", "`", "After", "command", "finished", "files", "generated", "expected", "`", "tensorflow", "lite", "experimental", "micro", "tools", "make", "gen", "sparkfun_edge_cortex", "m4", "prj", "`", "But", "trying", "build", "micro_speech", "binary", "like", "```", "cd", "tensorflow", "lite", "experimental", "micro", "tools", "make", "gen", "sparkfun_edge_cortex", "m4", "prj", "micro_speech", "make", "gmake", "```", "I", "getting", "following", "error", "```", "arm", "none", "eabi", "g", "++", "O3", "DNDEBUG", "std", "=", "c", "++", "11", "g", "DTF_LITE_STATIC_MEMORY", "DPART_apollo3", "DAM_PACKAGE_BGA", "DAM_PART_APOLLO3", "DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK", "DTF_LITE_STATIC_MEMORY", "DNDEBUG", "DTF_LITE_MCU_DEBUG_LOG", "D", "__FPU_PRESENT", "=", "1", "DARM_MATH_CM4", "fno", "rtti", "fmessage", "length", "=", "0", "fno", "exceptions", "fno", "unwind", "tables", "fno", "builtin", "ffunction", "sections", "fdata", "sections", "funsigned", "char", "MMD", "mcpu", "=", "cortex", "m4", "mthumb", "mfpu", "=", "fpv4", "sp", "d16", "mfloat", "abi", "=", "hard", "std", "=", "gnu", "++", "11", "Wvla", "Wall", "Wextra", "Wno", "unused", "parameter", "Wno", "missing", "field", "initializers", "Wno", "write", "strings", "Wno", "sign", "compare", "fno", "delete", "null", "pointer", "checks", "fomit", "frame", "pointer", "fpermissive", "nostdlib", "ggdb", "O3", "I", "I", "./", "third_party", "gemmlowp", "I", "./", "third_party", "flatbuffers", "include", "I", "./", "third_party", "kissfft", "c", "tensorflow", "lite", "experimental", "micro", "sparkfun_edge", "debug_log", "cc", "tensorflow", "lite", "experimental", "micro", "sparkfun_edge", "debug_log", "tensorflow", "lite", "experimental", "micro", "sparkfun_edge", "debug_log", "cc", "22", "10", "fatal", "error", "am_bsp", "h", "No", "file", "directory", "#", "include", "am_bsp", "h", "NOLINT", "^~~~~~~~~~", "compilation", "terminated", "make", "***", "[", "tensorflow", "lite", "experimental", "micro", "sparkfun_edge", "debug_log", "]", "Error", "1", "```", "This", "header", "file", "sparkfun", "edge", "board", "I", "want", "build", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "OS", "Platform", "Distribution", "Linux", "Ubuntu", "16", "04", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "TensorFlow", "installed", "(", "source", "binary", "):", "TensorFlow", "version", "(", "use", "command", "):", "2", "0", "Python", "version", "3", "6", "8", "Bazel", "version", "(", "compiling", "source", "):", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "CUDA", "cuDNN", "version", "GPU", "model", "memory", "**", "Describe", "current", "behavior", "**", "<", "img", "width", "=\"", "368", "alt", "=\"", "\u5c4f\u5e55\u5feb\u7167", "2019", "12", "13", "\u4e0b\u53486", "06", "20", "src", "=\"", "https", "://", "user", "images", "githubusercontent", "com", "22017000", "70792077", "6c453000", "1dd3", "11ea", "8489", "5b6131950515", "png", "\">", "**", "Describe", "expected", "behavior", "**", "The", "tf", "data", "Dataset", "instance", "freed", "every", "step", "**", "Code", "reproduce", "issue", "**", "```", "python", "import", "tensorflow", "tf", "import", "os", "import", "numpy", "np", "import", "psutil", "def", "_generator", "():", "range", "(", "100", "):", "yield", "1", "2", "3", "4", "5", "6", "7", "8", "def", "_py_parse_data", "(", "record", "):", "record", "=", "record", "numpy", "()", "record", "=", "bytes", "decode", "(", "record", ")", "rl", "=", "record", "split", "(\",\")", "rl", "=", "[", "str", "(", "int", "(", "r", ")", "1", ")", "r", "rl", "]", "return", "[\",\".", "join", "(", "rl", ")]", "def", "parse_data", "(", "record", "shape", "=", "10", "):", "sparse_data", "=", "tf", "strings", "split", "([", "record", "],", "sep", "=\",\")", "sparse_data", "=", "tf", "strings", "to_number", "(", "sparse_data", "[", "0", "],", "tf", "int64", ")", "ids_num", "=", "tf", "cast", "(", "tf", "size", "(", "sparse_data", "),", "tf", "int64", ")", "indices", "=", "tf", "range", "(", "0", "ids_num", "dtype", "=", "tf", "int64", ")", "indices", "=", "tf", "reshape", "(", "indices", "shape", "=(-", "1", "1", "))", "sparse_data", "=", "tf", "sparse", "SparseTensor", "(", "indices", "sparse_data", "dense_shape", "=(", "shape", ",)", ")", "return", "sparse_data", "process", "=", "psutil", "Process", "(", "os", "getpid", "())", "step", "=", "0", "(", "step", "<", "10000", "):", "=", "tf", "data", "Dataset", "from_generator", "(", "_generator", "output_types", "=", "tf", "string", ")", "=", "map", "(", "lambda", "record", "tf", "py_function", "(", "_py_parse_data", "[", "record", "],", "[", "tf", "string", "]))", "=", "map", "(", "parse_data", ")", "=", "1", "step", "%", "10", "==", "0", "print", "(\"", "Memory", "\",", "process", "memory_info", "().", "rss", ")", "step", "+=", "1", "```", "Thank", "submitting", "TensorFlow", "documentation", "issue", "Per", "GitHub", "policy", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "The", "TensorFlow", "docs", "open", "source", "To", "get", "involved", "read", "documentation", "contributor", "guide", "https", "://", "www", "tensorflow", "org", "community", "contribute", "docs", "##", "URL", "(", ")", "issue", "Please", "provide", "link", "documentation", "entry", "example", "https", "://", "www", "tensorflow", "org", "api_docs", "python", "tf", "audio", "##", "Description", "issue", "(", "needs", "changing", "):", "Currently", "usage", "examples", "tf", "audio", "APIs", "makes", "difficult", "new", "users", "implement", "###", "Clear", "description", "For", "example", "someone", "use", "method", "How", "useful", "**", "Audio", "area", "really", "explored", "machine", "learning", "extent", "image", "text", "While", "TensorFlow", "provide", "good", "amount", "documentation", "general", "Args", "Returns", "various", "functions", "tf", "audio", "since", "new", "users", "little", "experience", "audio", "compared", "tf", "image", "**", "###", "Correct", "links", "Is", "link", "source", "code", "correct", "**", "Yes", "**", "###", "Parameters", "defined", "Are", "parameters", "defined", "formatted", "correctly", "**", "Yes", "**", "###", "Returns", "defined", "Are", "return", "values", "defined", "**", "Yes", "**", "###", "Raises", "listed", "defined", "Are", "errors", "defined", "For", "example", "https", "://", "www", "tensorflow", "org", "versions", "r2", "0", "api_docs", "python", "tf", "feature_column", "categorical_column_with_vocabulary_file", "#", "raises", "**", "No", "**", "###", "Usage", "example", "Is", "usage", "example", "**", "No", "**", "See", "API", "guide", "https", "://", "www", "tensorflow", "org", "community", "contribute", "docs_ref", "write", "testable", "usage", "examples", "###", "Request", "visuals", "applicable", "Are", "currently", "visuals", "If", "clarify", "content", "**", "Formatted", "code", "blocks", "present", "satisfactory", "**", "###", "Submit", "pull", "request", "Are", "planning", "also", "submit", "pull", "request", "fix", "issue", "See", "docs", "contributor", "guide", "https", "://", "www", "tensorflow", "org", "community", "contribute", "docs", "docs", "API", "guide", "https", "://", "www", "tensorflow", "org", "community", "contribute", "docs_ref", "docs", "style", "guide", "https", "://", "www", "tensorflow", "org", "community", "contribute", "docs_style", "**", "Yes", "I", "think", "I", "provide", "detailed", "usage", "example", "**", "TensorFlow", "Lite", "Microcontrollers", "MAXPOOL", "operation", "supports", "float", "uint8", "execution", "int8"], "2020-01-2": ["<", "em", ">", "Please", "make", "sure", "build", "installation", "issue", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "build_template", "</", "em", ">", "**", "System", "information", "**", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Windows", "10", "x64", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "N", "A", "TensorFlow", "installed", "(", "source", "binary", "):", "source", "TensorFlow", "version", "master", "2", "1", "0", "Python", "version", "3", "7", "6", "Installed", "using", "virtualenv", "pip", "conda", "N", "A", "Bazel", "version", "(", "compiling", "source", "):", "1", "2", "1", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "Visual", "Studio", "2019", "C", "++", "compiler", "CUDA", "cuDNN", "version", "10", "2", "7", "6", "5", "GPU", "model", "memory", "RTX2080Ti", "GDDR6", "11GB", "**", "Describe", "problem", "**", "bazel", "build", "failed", "**", "Provide", "exact", "sequence", "commands", "steps", "executed", "running", "problem", "**", "bazel", "build", "tensorflwo", "tools", "pip_package", "build_pip_package", "**", "Any", "info", "logs", "**", "Include", "logs", "source", "code", "would", "helpful", "diagnose", "problem", "If", "including", "tracebacks", "please", "include", "full", "traceback", "Large", "logs", "files", "attached", "```", "ERROR", "D", ":/", "repo", "tensorflow", "tensorflow", "BUILD", "867", "1", "Executing", "genrule", "tensorflow", "tf_python_api_gen_v2", "failed", "(", "Exit", "1", ")", "C", ":\\", "Anaconda3", "\\", "lib", "\\", "site", "packages", "\\", "numpy", "\\", "__init__", "py", "140", "UserWarning", "mkl", "service", "package", "failed", "import", "therefore", "Intel", "(", "R", ")", "MKL", "initialization", "ensuring", "correct", "box", "operation", "condition", "Gnu", "OpenMP", "already", "loaded", "Python", "process", "assured", "Please", "install", "mkl", "service", "package", "see", "http", "://", "github", "com", "IntelPython", "mkl", "service", "import", "_distributor_init", "Traceback", "(", "recent", "call", "last", "):", "File", "C", ":\\", "Anaconda3", "\\", "lib", "\\", "site", "packages", "\\", "numpy", "\\", "core", "\\", "__init__", "py", "\",", "line", "24", "<", "module", ">", "import", "multiarray", "File", "C", ":\\", "Anaconda3", "\\", "lib", "\\", "site", "packages", "\\", "numpy", "\\", "core", "\\", "multiarray", "py", "\",", "line", "14", "<", "module", ">", "import", "overrides", "File", "C", ":\\", "Anaconda3", "\\", "lib", "\\", "site", "packages", "\\", "numpy", "\\", "core", "\\", "overrides", "py", "\",", "line", "7", "<", "module", ">", "numpy", "core", "_multiarray_umath", "import", "(", "ImportError", "DLL", "load", "failed", "The", "specified", "module", "could", "found", "During", "handling", "exception", "another", "exception", "occurred", "Traceback", "(", "recent", "call", "last", "):", "File", "\"\\\\?\\", "C", ":\\", "Users", "\\", "ALAN", "W", "~", "1", "\\", "AppData", "\\", "Local", "\\", "Temp", "\\", "Bazel", "runfiles_t25kvwuy", "\\", "runfiles", "\\", "org_tensorflow", "\\", "tensorflow", "\\", "python", "\\", "tools", "\\", "api", "\\", "generator", "\\", "create_python_api", "py", "\",", "line", "27", "<", "module", ">", "tensorflow", "python", "tools", "api", "generator", "import", "doc_srcs", "File", "\"\\\\?\\", "C", ":\\", "Users", "\\", "ALAN", "W", "~", "1", "\\", "AppData", "\\", "Local", "\\", "Temp", "\\", "Bazel", "runfiles_t25kvwuy", "\\", "runfiles", "\\", "org_tensorflow", "\\", "tensorflow", "\\", "python", "\\", "__init__", "py", "\",", "line", "48", "<", "module", ">", "import", "numpy", "np", "File", "C", ":\\", "Anaconda3", "\\", "lib", "\\", "site", "packages", "\\", "numpy", "\\", "__init__", "py", "\",", "line", "142", "<", "module", ">", "import", "core", "File", "C", ":\\", "Anaconda3", "\\", "lib", "\\", "site", "packages", "\\", "numpy", "\\", "core", "\\", "__init__", "py", "\",", "line", "54", "<", "module", ">", "raise", "ImportError", "(", "msg", ")", "ImportError", "IMPORTANT", "PLEASE", "READ", "THIS", "FOR", "ADVICE", "ON", "HOW", "TO", "SOLVE", "THIS", "ISSUE", "Importing", "numpy", "c", "extensions", "failed", "Try", "uninstalling", "reinstalling", "numpy", "If", "already", "done", "1", "Check", "expected", "use", "Python3", "7", "C", ":\\", "Anaconda3", "\\", "python", "exe", "\",", "directories", "PATH", "PYTHONPATH", "interfere", "Python", "numpy", "version", "1", "18", "1", "trying", "use", "2", "If", "(", "1", ")", "looks", "fine", "open", "new", "issue", "https", "://", "github", "com", "numpy", "numpy", "issues", "Please", "include", "details", "installed", "Python", "installed", "numpy", "operating", "system", "whether", "multiple", "versions", "Python", "installed", "built", "source", "compiler", "versions", "ideally", "build", "log", "If", "working", "numpy", "git", "repository", "try", "`", "git", "clean", "xdf", "`", "(", "removes", "files", "version", "control", ")", "rebuild", "numpy", "Note", "error", "many", "possible", "causes", "please", "comment", "existing", "issue", "open", "new", "one", "instead", "Original", "error", "DLL", "load", "failed", "The", "specified", "module", "could", "found", "Target", "tensorflow", "tools", "pip_package", "build_pip_package", "failed", "build", "ERROR", "D", ":/", "repo", "tensorflow", "tensorflow", "tools", "pip_package", "BUILD", "229", "1", "Executing", "genrule", "tensorflow", "tf_python_api_gen_v2", "failed", "(", "Exit", "1", ")", "```", "This", "PR", "enables", "kernel", "Relu", "float16", "ROCm", "removes", "obsolete", "#", "ifdef", "relu_op_gpu", "cu", "cc", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "yes", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Mac", "OS", "X", "Catalina", "(", "10", "15", "2", ")", "TensorFlow", "installed", "(", "source", "binary", "):", "binary", "TensorFlow", "version", "(", "use", "command", "):", "v2", "0", "0", "rc2", "26", "g64c3d382ca", "2", "0", "0", "Python", "version", "3", "7", "5", "GPU", "model", "memory", "Intel", "Iris", "Pro", "1536", "MB", "**", "Describe", "current", "behavior", "**", "I", "get", "errors", ">", "tensorflow", "python", "eager", "core", "_FallbackException", "This", "function", "handle", "case", "path", "inputs", "already", "EagerTensors", ">", "AttributeError", "Tensor", "object", "attribute", "_datatype_enum", ">", "AttributeError", "ProgbarLogger", "object", "attribute", "log_values", "I", "add", "following", "callback", "list", "callbacks", "`", "my_model", "fit", "`", "```", "my_callback", "=", "tf", "keras", "callbacks", "LambdaCallback", "(", "on_batch_begin", "=", "lambda", "batch", "logs", "tf", "print", "(", "my_model", "losses", "))", "```", "**", "Describe", "expected", "behavior", "**", "No", "error", "**", "Code", "reproduce", "issue", "**", "```", "import", "tensorflow", "tf", "def", "get_model", "():", "inp", "=", "tf", "keras", "layers", "Input", "(", "shape", "=(", "1", ",))", "x", "=", "tf", "keras", "layers", "Dense", "(", "8", "activity_regularizer", "=", "tf", "keras", "regularizers", "l1", "(", "0", "01", "))(", "inp", ")", "x", "=", "tf", "keras", "layers", "Dense", "(", "16", "activity_regularizer", "=", "tf", "keras", "regularizers", "l1", "(", "0", "01", "))(", "x", ")", "=", "tf", "keras", "layers", "Dense", "(", "1", ")(", "x", ")", "model", "=", "tf", "keras", "Model", "(", "inputs", "=", "inp", "outputs", "=", ")", "return", "model", "def", "train", "():", "my_model", "=", "get_model", "()", "my_model", "compile", "(", "optimizer", "=\"", "adam", "\",", "loss", "=\"", "mse", "\")", "my_callback", "=", "tf", "keras", "callbacks", "LambdaCallback", "(", "on_batch_begin", "=", "lambda", "batch", "logs", "tf", "print", "(", "my_model", "losses", "))", "my_model", "fit", "([", "1", "2", "3", "4", "],", "[", "0", "1", "0", "2", "0", "4", "0", "2", "],", "callbacks", "=[", "my_callback", "])", "__name__", "==", "__main__", "':", "train", "()", "```", "This", "issue", "may", "related", "https", "://", "github", "com", "tensorflow", "tensorflow", "issues", "28924", "https", "://", "github", "com", "tensorflow", "tensorflow", "issues", "29931", "Note", "I", "use", "regulariser", "`", "tf", "print", "`", "prints", "empty", "list", "error", "occurs", "**", "System", "information", "**", "Custom", "code", "TensorFlow", "version", "2", "1", "0", "Python", "version", "3", "7", "GPU", "model", "4", "V100", "GPUs", "Kubernetes", "Engine", "**", "Describe", "current", "behavior", "**", "On", "multi", "GPU", "loading", "model", "h5", "file", "working", "**", "Describe", "expected", "behavior", "**", "Saving", "reloading", "model", "h5", "file", "using", "model", "save", "keras", "models", "load_model", "work", "single", "multi", "GPU", "**", "Code", "reproduce", "issue", "**", "```", "python", "import", "tensorflow", "tf", "import", "os", "import", "contextlib", "import", "numpy", "np", "import", "tensorflow", "keras", "keras", "def", "get_model", "():", "model", "=", "keras", "Sequential", "([", "keras", "layers", "Flatten", "(", "input_shape", "=(", "28", "28", ")),", "keras", "layers", "Dense", "(", "10", "activation", "=", "tf", "nn", "softmax", ")", "])", "model", "compile", "(", "optimizer", "=", "tf", "keras", "optimizers", "Adam", "(),", "loss", "='", "sparse_categorical_crossentropy", "')", "return", "model", "def", "get_model_path", "():", "model_dir", "=", "'/", "tmp", "str", "(", "np", "random", "randint", "(", "0", "1000000", "))", "os", "makedirs", "(", "model_dir", ")", "model_path", "=", "os", "path", "join", "(", "model_dir", "model", "')", "return", "model_path", "\".", "h5", "def", "attempt_save_and_reload", "(", "model_path", "distributed_training", "=", "False", "):", "fashion_mnist", "=", "keras", "datasets", "fashion_mnist", "(", "train_images", "train_labels", "),", "(", "test_images", "test_labels", ")", "=", "fashion_mnist", "load_data", "()", "train_images", "=", "train_images", "255", "0", "test_images", "=", "test_images", "255", "0", "strategy", "scope", "()", "distributed_training", "else", "contextlib", "nullcontext", "():", "model", "=", "get_model", "()", "model", "fit", "(", "train_images", "train_labels", "epochs", "=", "1", ")", "model", "save", "(", "model_path", ")", "model", "=", "tf", "keras", "models", "load_model", "(", "model_path", ")", "__name__", "==", "__main__", "':", "strategy", "=", "tf", "distribute", "MirroredStrategy", "()", "distributed_training", "[", "False", "True", "]:", "print", "('", "distributed", "training", "',", "distributed_training", ")", "model_path", "=", "get_model_path", "()", "try", "attempt_save_and_reload", "(", "model_path", "distributed_training", ")", "except", "Exception", "e", "print", "('", "Exception", "raised", "\\", "n", "',", "e", ")", "print", "()", "```", "**", "info", "logs", "**", "I", "need", "use", "h5", "files", "since", "saving", "optimizer", "state", "work", "otherwise", "(", "see", "#", "33424", ").", "The", "logs", "I", "get", "```", "INFO", "tensorflow", "Using", "MirroredStrategy", "devices", "('/", "job", "localhost", "replica", "0", "task", "0", "device", "GPU", "0", "',", "'/", "job", "localhost", "replica", "0", "task", "0", "device", "GPU", "1", "',", "'/", "job", "localhost", "replica", "0", "task", "0", "device", "GPU", "2", "',", "'/", "job", "localhost", "replica", "0", "task", "0", "device", "GPU", "3", "')", "distributed", "training", "False", "Train", "60000", "samples", "60000", "60000", "[==============================]", "3s", "52us", "sample", "loss", "0", "5991", "distributed", "training", "True", "Train", "60000", "samples", "INFO", "tensorflow", "batch_all_reduce", "2", "reduces", "algorithm", "=", "nccl", "num_packs", "=", "1", "agg_small_grads_max_bytes", "=", "0", "agg_small_grads_max_group", "=", "10", "INFO", "tensorflow", "Reduce", "job", "localhost", "replica", "0", "task", "0", "device", "CPU", "0", "broadcast", "('/", "job", "localhost", "replica", "0", "task", "0", "device", "CPU", "0", "',).", "INFO", "tensorflow", "Reduce", "job", "localhost", "replica", "0", "task", "0", "device", "CPU", "0", "broadcast", "('/", "job", "localhost", "replica", "0", "task", "0", "device", "CPU", "0", "',).", "INFO", "tensorflow", "batch_all_reduce", "2", "reduces", "algorithm", "=", "nccl", "num_packs", "=", "1", "agg_small_grads_max_bytes", "=", "0", "agg_small_grads_max_group", "=", "10", "INFO", "tensorflow", "Reduce", "job", "localhost", "replica", "0", "task", "0", "device", "CPU", "0", "broadcast", "('/", "job", "localhost", "replica", "0", "task", "0", "device", "CPU", "0", "',).", "INFO", "tensorflow", "Reduce", "job", "localhost", "replica", "0", "task", "0", "device", "CPU", "0", "broadcast", "('/", "job", "localhost", "replica", "0", "task", "0", "device", "CPU", "0", "',).", "60000", "60000", "[==============================]", "9s", "152us", "sample", "loss", "0", "6016", "Exception", "raised", "`", "handle", "`", "available", "outside", "replica", "context", "`", "tf", "distribute", "Strategy", "update", "()`", "call", "```", "My", "code", "works", "`", "GPU", "`", "based", "tensorflow", "environment", "without", "fuss", "fails", "`", "CPU", "`", "based", "environments", "Some", "people", "also", "facing", "issue", "`", "Training", "`", "works", "without", "issues", "`", "predict", "`", "method", "failing", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "Yes", "TensorFlow", "installed", "(", "source", "binary", "):", "Source", "Other", "system", "related", "information", "```", "Collecting", "system", "information", "...", "tmp", "check_os", "py", "18", "DeprecationWarning", "dist", "()", "linux_distribution", "()", "functions", "deprecated", "Python", "3", "5", "platform", "linux_distribution", "(),", "tmp", "check_os", "py", "19", "DeprecationWarning", "dist", "()", "linux_distribution", "()", "functions", "deprecated", "Python", "3", "5", "platform", "dist", "(),", "cat", "proc", "1", "cgroup", "No", "file", "directory", "2020", "01", "16", "15", "58", "53", "661018", "I", "tensorflow", "core", "platform", "cpu_feature_guard", "cc", "145", "]", "This", "TensorFlow", "binary", "optimized", "Intel", "(", "R", ")", "MKL", "DNN", "use", "following", "CPU", "instructions", "performance", "critical", "operations", "SSE4", "1", "SSE4", "2", "AVX", "AVX2", "FMA", "To", "enable", "non", "MKL", "DNN", "operations", "rebuild", "TensorFlow", "appropriate", "compiler", "flags", "2020", "01", "16", "15", "58", "53", "661360", "I", "tensorflow", "core", "common_runtime", "process_util", "cc", "115", "]", "Creating", "new", "thread", "pool", "default", "inter", "op", "setting", "12", "Tune", "using", "inter_op_parallelism_threads", "best", "performance", "')", "architecture", "('", "64bit", "',", "'')", "machine", "x86_64", "==", "docker", "=============================================", "No", "==", "compiler", "=====================================================", "Apple", "LLVM", "version", "10", "0", "1", "(", "clang", "1001", "0", "46", "4", ")", "Target", "x86_64", "apple", "darwin18", "7", "0", "Thread", "model", "posix", "InstalledDir", "Library", "Developer", "CommandLineTools", "usr", "bin", "==", "check", "pips", "===================================================", "numpy", "1", "17", "4", "protobuf", "3", "11", "2", "tensorflow", "2", "1", "0", "tensorflow", "estimator", "2", "1", "0", "tensorflow", "hub", "0", "7", "0", "==", "check", "virtualenv", "=========================================", "False", "==", "tensorflow", "import", "============================================", "tf", "version", "VERSION", "=", "2", "0", "0", "tf", "version", "GIT_VERSION", "=", "unknown", "tf", "version", "COMPILER_VERSION", "=", "4", "2", "1", "Compatible", "Clang", "4", "0", "1", "(", "tags", "RELEASE_401", "final", ")", "Sanity", "check", "array", "([", "1", "],", "dtype", "=", "int32", ")", "==", "env", "==========================================================", "LD_LIBRARY_PATH", "unset", "DYLD_LIBRARY_PATH", "unset", "==", "nvidia", "smi", "===================================================", "tf_env_cololect", "sh", "line", "147", "nvidia", "smi", "command", "found", "==", "cuda", "libs", "===================================================", "==", "tensorflow", "installed", "info", "==================", "Name", "tensorflow", "Version", "2", "1", "0", "Summary", "TensorFlow", "open", "source", "machine", "learning", "framework", "everyone", "Home", "page", "https", "://", "www", "tensorflow", "org", "Author", "email", "packages", "tensorflow", "org", "License", "Apache", "2", "0", "Location", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "Required", "==", "python", "version", "==============================================", "(", "major", "minor", "micro", "releaselevel", "serial", ")", "(", "3", "7", "6", "final", "',", "0", ")", "==", "bazel", "version", "===============================================", "Build", "label", "1", "2", "1", "Build", "time", "Tue", "Nov", "26", "15", "27", "31", "2019", "(", "1574782051", ")", "Build", "timestamp", "1574782051", "Build", "timestamp", "int", "1574782051", "```", "**", "Describe", "current", "behavior", "**", "The", "code", "running", "successfully", "`", "GPU", "`", "based", "environment", "failing", "`", "CPU", "`", "based", "environments", "**", "Describe", "expected", "behavior", "**", "It", "run", "fail", "way", "`", "GPU", "`", "`", "CPU", "`", "based", "environments", "**", "Code", "reproduce", "issue", "**", "Code", "following", "link", "behavior", "https", "://", "www", "kaggle", "com", "xhlulu", "disaster", "nlp", "keras", "bert", "using", "tfhub", "And", "also", "people", "talking", "issue", "comments", "**", "Other", "info", "logs", "**", "```", "Making", "predictions", "Traceback", "(", "recent", "call", "last", "):", "File", "\"/", "Users", "sardarmrinal", "Egnyte", "Private", "sardar", "mrinal", "workspace", "competitions", "kaggle_nlp_disaster", "working", "NLP_disaster_bert", "py", "\",", "line", "218", "<", "module", ">", "df_sub", "=", "model_bert", "predict", "(", "df_eval", ")", "File", "\"/", "Users", "sardarmrinal", "Egnyte", "Private", "sardar", "mrinal", "workspace", "competitions", "kaggle_nlp_disaster", "working", "NLP_disaster_bert", "py", "\",", "line", "186", "predict", "prediction", "=", "self", "model", "predict", "(", "x", "=", "X", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training", "py", "\",", "line", "909", "predict", "use_multiprocessing", "=", "use_multiprocessing", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_v2", "py", "\",", "line", "462", "predict", "steps", "=", "steps", "callbacks", "=", "callbacks", "**", "kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_v2", "py", "\",", "line", "444", "_model_iteration", "total_epochs", "=", "1", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_v2", "py", "\",", "line", "123", "run_one_epoch", "batch_outs", "=", "execution_function", "(", "iterator", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_v2_utils", "py", "\",", "line", "86", "execution_function", "distributed_function", "(", "input_fn", "))", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "eager", "def_function", "py", "\",", "line", "457", "__call__", "result", "=", "self", "_call", "(*", "args", "**", "kwds", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "eager", "def_function", "py", "\",", "line", "503", "_call", "self", "_initialize", "(", "args", "kwds", "add_initializers_to", "=", "initializer_map", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "eager", "def_function", "py", "\",", "line", "408", "_initialize", "args", "**", "kwds", "))", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "1848", "_get_concrete_function_internal_garbage_collected", "graph_function", "_", "_", "=", "self", "_maybe_define_function", "(", "args", "kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "2150", "_maybe_define_function", "graph_function", "=", "self", "_create_graph_function", "(", "args", "kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "2041", "_create_graph_function", "capture_by_value", "=", "self", "_capture_by_value", "),", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "framework", "func_graph", "py", "\",", "line", "915", "func_graph_from_py_func", "func_outputs", "=", "python_func", "(*", "func_args", "**", "func_kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "eager", "def_function", "py", "\",", "line", "358", "wrapped_fn", "return", "weak_wrapped_fn", "().", "__wrapped__", "(*", "args", "**", "kwds", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_v2_utils", "py", "\",", "line", "73", "distributed_function", "per_replica_function", "args", "=(", "model", "x", "sample_weights", "))", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "distribute", "distribute_lib", "py", "\",", "line", "760", "experimental_run_v2", "return", "self", "_extended", "call_for_each_replica", "(", "fn", "args", "=", "args", "kwargs", "=", "kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "distribute", "distribute_lib", "py", "\",", "line", "1787", "call_for_each_replica", "return", "self", "_call_for_each_replica", "(", "fn", "args", "kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "distribute", "distribute_lib", "py", "\",", "line", "2132", "_call_for_each_replica", "return", "fn", "(*", "args", "**", "kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "autograph", "impl", "api", "py", "\",", "line", "292", "wrapper", "return", "func", "(*", "args", "**", "kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_v2_utils", "py", "\",", "line", "162", "_predict_on_batch", "return", "predict_on_batch", "(", "model", "x", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "keras", "engine", "training_v2_utils", "py", "\",", "line", "370", "predict_on_batch", "return", "model", "(", "inputs", ")", "#", "pylint", "disable", "=", "callable", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "keras", "engine", "base_layer", "py", "\",", "line", "847", "__call__", "outputs", "=", "call_fn", "(", "cast_inputs", "args", "**", "kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "keras", "engine", "network", "py", "\",", "line", "708", "call", "convert_kwargs_to_constants", "=", "base_layer_utils", "call_context", "().", "saving", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "keras", "engine", "network", "py", "\",", "line", "860", "_run_internal_graph", "output_tensors", "=", "layer", "(", "computed_tensors", "**", "kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "keras", "engine", "base_layer", "py", "\",", "line", "847", "__call__", "outputs", "=", "call_fn", "(", "cast_inputs", "args", "**", "kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "autograph", "impl", "api", "py", "\",", "line", "292", "wrapper", "return", "func", "(*", "args", "**", "kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_hub", "keras_layer", "py", "\",", "line", "218", "call", "lambda", "f", "(", "training", "=", "False", "))", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "framework", "smart_cond", "py", "\",", "line", "56", "smart_cond", "return", "false_fn", "()", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_hub", "keras_layer", "py", "\",", "line", "218", "<", "lambda", ">", "lambda", "f", "(", "training", "=", "False", "))", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "saved_model", "load", "py", "\",", "line", "436", "_call_attribute", "return", "instance", "__call__", "(*", "args", "**", "kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "eager", "def_function", "py", "\",", "line", "457", "__call__", "result", "=", "self", "_call", "(*", "args", "**", "kwds", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "eager", "def_function", "py", "\",", "line", "494", "_call", "results", "=", "self", "_stateful_fn", "(*", "args", "**", "kwds", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "1822", "__call__", "graph_function", "args", "kwargs", "=", "self", "_maybe_define_function", "(", "args", "kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "2150", "_maybe_define_function", "graph_function", "=", "self", "_create_graph_function", "(", "args", "kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "2041", "_create_graph_function", "capture_by_value", "=", "self", "_capture_by_value", "),", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "framework", "func_graph", "py", "\",", "line", "915", "func_graph_from_py_func", "func_outputs", "=", "python_func", "(*", "func_args", "**", "func_kwargs", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "eager", "def_function", "py", "\",", "line", "358", "wrapped_fn", "return", "weak_wrapped_fn", "().", "__wrapped__", "(*", "args", "**", "kwds", ")", "File", "\"/", "Users", "sardarmrinal", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "saved_model", "function_deserialization", "py", "\",", "line", "262", "restored_function_body", "\"\\", "n", "\\", "n", "\".", "join", "(", "signature_descriptions", ")))", "ValueError", "Could", "find", "matching", "function", "call", "loaded", "SavedModel", "Got", "Positional", "arguments", "(", "3", "total", "):", "[<", "tf", "Tensor", "inputs", "0", "shape", "=(", "None", "3", ")", "dtype", "=", "int64", ">,", "<", "tf", "Tensor", "inputs_1", "0", "shape", "=(", "None", "3", ")", "dtype", "=", "int64", ">,", "<", "tf", "Tensor", "inputs_2", "0", "shape", "=(", "None", "3", ")", "dtype", "=", "int64", ">]", "False", "None", "Keyword", "arguments", "{}", "Expected", "arguments", "match", "one", "following", "4", "option", "(", "):", "Option", "1", "Positional", "arguments", "(", "3", "total", "):", "[", "TensorSpec", "(", "shape", "=(", "None", "None", "),", "dtype", "=", "tf", "int32", "name", "='", "input_word_ids", "'),", "TensorSpec", "(", "shape", "=(", "None", "None", "),", "dtype", "=", "tf", "int32", "name", "='", "input_mask", "'),", "TensorSpec", "(", "shape", "=(", "None", "None", "),", "dtype", "=", "tf", "int32", "name", "='", "input_type_ids", "')]", "True", "None", "Keyword", "arguments", "{}", "Option", "2", "Positional", "arguments", "(", "3", "total", "):", "[", "TensorSpec", "(", "shape", "=(", "None", "None", "),", "dtype", "=", "tf", "int32", "name", "='", "input_word_ids", "'),", "TensorSpec", "(", "shape", "=(", "None", "None", "),", "dtype", "=", "tf", "int32", "name", "='", "input_mask", "'),", "TensorSpec", "(", "shape", "=(", "None", "None", "),", "dtype", "=", "tf", "int32", "name", "='", "input_type_ids", "')]", "False", "None", "Keyword", "arguments", "{}", "Option", "3", "Positional", "arguments", "(", "3", "total", "):", "[", "TensorSpec", "(", "shape", "=(", "None", "None", "),", "dtype", "=", "tf", "int32", "name", "='", "inputs", "0", "'),", "TensorSpec", "(", "shape", "=(", "None", "None", "),", "dtype", "=", "tf", "int32", "name", "='", "inputs", "1", "'),", "TensorSpec", "(", "shape", "=(", "None", "None", "),", "dtype", "=", "tf", "int32", "name", "='", "inputs", "2", "')]", "True", "None", "Keyword", "arguments", "{}", "Option", "4", "Positional", "arguments", "(", "3", "total", "):", "[", "TensorSpec", "(", "shape", "=(", "None", "None", "),", "dtype", "=", "tf", "int32", "name", "='", "inputs", "0", "'),", "TensorSpec", "(", "shape", "=(", "None", "None", "),", "dtype", "=", "tf", "int32", "name", "='", "inputs", "1", "'),", "TensorSpec", "(", "shape", "=(", "None", "None", "),", "dtype", "=", "tf", "int32", "name", "='", "inputs", "2", "')]", "False", "None", "Keyword", "arguments", "{}", "```", "This", "PR", "implements", "GPU", "kernels", "ApplyAdagrad", "ApplyAdagradV2", "ApplyAdadelta", "ApplyRMSProp", "ApplyCenteredRMSProp", "ROCm", "enables", "corresponding", "unit", "tests", "Minor", "fixes", "StructuredTensor", "pydocs", "incorrect", "example", "code", "Python", "2", "style", "print", "statements", "<", "em", ">", "Please", "make", "sure", "bug", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "bug_template", "</", "em", ">", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Windows", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "TensorFlow", "installed", "(", "source", "binary", "):", "binary", "TensorFlow", "version", "(", "use", "command", "):", "tf", "nightly", "Python", "version", "3", "7", "5", "Bazel", "version", "(", "compiling", "source", "):", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "CUDA", "cuDNN", "version", "GPU", "model", "memory", "You", "collect", "information", "using", "environment", "capture", "[", "script", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "tree", "master", "tools", "tf_env_collect", "sh", ")", "You", "also", "obtain", "TensorFlow", "version", "1", "TF", "1", "0", "`", "python", "c", "import", "tensorflow", "tf", ";", "print", "(", "tf", "GIT_VERSION", "tf", "VERSION", ")\"`", "2", "TF", "2", "0", "`", "python", "c", "import", "tensorflow", "tf", ";", "print", "(", "tf", "version", "GIT_VERSION", "tf", "version", "VERSION", ")\"`", "**", "Describe", "current", "behavior", "**", "File", "\"\\\\?\\", "C", ":\\", "Users", "\\", "RUNNER", "~", "1", "\\", "AppData", "\\", "Local", "\\", "Temp", "\\", "Bazel", "runfiles_e847arzc", "\\", "runfiles", "\\", "__main__", "\\", "tensorflow_addons", "\\", "activations", "\\", "rrelu_test", "py", "\",", "line", "88", "benchmarkRreluOp", "self", "run_op_benchmark", "(", "sess", "result", "op", "min_iters", "=", "25", ")", "File", "C", ":\\", "hostedtoolcache", "\\", "windows", "\\", "Python", "\\", "3", "7", "5", "\\", "x64", "\\", "lib", "\\", "site", "packages", "\\", "tensorflow_core", "\\", "python", "\\", "platform", "\\", "benchmark", "py", "\",", "line", "389", "run_op_benchmark", "throughput", "\":", "mbs", "median_delta", "ZeroDivisionError", "float", "division", "zero", "**", "Describe", "expected", "behavior", "**", "Same", "behavior", "ubuntu", "**", "Code", "reproduce", "issue", "**", "Provide", "reproducible", "test", "case", "bare", "minimum", "necessary", "generate", "problem", "```", "python", "self", "run_op_benchmark", "(", "sess", "result", "op", "min_iters", "=", "25", ")", "```", "**", "Other", "info", "logs", "**", "https", "://", "github", "com", "tensorflow", "addons", "issues", "839", "It", "seems", "[```", "time", "time", "()```](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "590d6eef7e91a6a7392c8ffffb7b58f2e0c8bc6b", "tensorflow", "python", "platform", "benchmark", "py", "#", "L294", ")", "cause", "problem", "```", "timeit", "default_timer", "()```", "could", "fix", "problem", "<", "em", ">", "Please", "make", "sure", "bug", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "bug_template", "</", "em", ">", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "Stateless", "LSTM", "Keras", "tutorial", "using", "tf", "backend", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Windows", "10", "TensorFlow", "installed", "(", "source", "binary", "):", "binary", "TensorFlow", "version", "(", "use", "command", "):", "2", "1", "0", "Python", "version", "3", "7", "4", "CUDA", "cuDNN", "version", "10", "1", "GPU", "model", "memory", "MX150", "10GB", "**", "Describe", "current", "behavior", "**", "When", "using", "tf", "keras", "callbacks", "TensorBoard", "()", "without", "profile_batch", "setting", "gives", "errors", "CUPTI_ERROR_INSUFFICIENT_PRIVILEGES", "CUPTI_ERROR_INVALID_PARAMETER", "tensorflow", "core", "profiler", "internal", "gpu", "cupti_tracer", "cc", "**", "Describe", "expected", "behavior", "**", "With", "profile_batch", "=", "0", "two", "errors", "gone", "But", "comes", "back", "profile_batch", "=", "1", "non", "zero", "values", "**", "Code", "reproduce", "issue", "**", "```", "__future__", "import", "print_function", "import", "numpy", "np", "import", "matplotlib", "pyplot", "plt", "import", "pandas", "pd", "import", "tensorflow", "tf", "tensorflow", "keras", "models", "import", "Sequential", "tensorflow", "keras", "layers", "import", "Dense", "LSTM", "input_len", "=", "1000", "tsteps", "=", "2", "lahead", "=", "1", "batch_size", "=", "1", "epochs", "=", "5", "print", "(\"*\"", "33", ")", "lahead", ">=", "tsteps", "print", "(\"", "STATELESS", "LSTM", "WILL", "ALSO", "CONVERGE", "\")", "else", "print", "(\"", "STATELESS", "LSTM", "WILL", "NOT", "CONVERGE", "\")", "print", "(\"*\"", "33", ")", "np", "random", "seed", "(", "1986", ")", "print", "('", "Generating", "Data", "...')", "def", "gen_uniform_amp", "(", "amp", "=", "1", "xn", "=", "10000", "):", "data_input", "=", "np", "random", "uniform", "(-", "1", "amp", "1", "amp", "xn", ")", "data_input", "=", "pd", "DataFrame", "(", "data_input", ")", "return", "data_input", "to_drop", "=", "max", "(", "tsteps", "1", "lahead", "1", ")", "data_input", "=", "gen_uniform_amp", "(", "amp", "=", "0", "1", "xn", "=", "input_len", "to_drop", ")", "expected_output", "=", "data_input", "rolling", "(", "window", "=", "tsteps", "center", "=", "False", ").", "mean", "()", "lahead", ">", "1", "data_input", "=", "np", "repeat", "(", "data_input", "values", "repeats", "=", "lahead", "axis", "=", "1", ")", "data_input", "=", "pd", "DataFrame", "(", "data_input", ")", "c", "enumerate", "(", "data_input", "columns", "):", "data_input", "[", "c", "]", "=", "data_input", "[", "c", "].", "shift", "(", ")", "expected_output", "=", "expected_output", "[", "to_drop", ":]", "data_input", "=", "data_input", "[", "to_drop", ":]", "def", "create_model", "(", "stateful", "):", "model", "=", "Sequential", "()", "model", "add", "(", "LSTM", "(", "20", "input_shape", "=(", "lahead", "1", "),", "batch_size", "=", "batch_size", "stateful", "=", "stateful", "))", "model", "add", "(", "Dense", "(", "1", "))", "model", "compile", "(", "loss", "='", "mse", "',", "optimizer", "='", "adam", "')", "return", "model", "print", "('", "Creating", "Stateful", "Model", "...')", "model_stateful", "=", "create_model", "(", "stateful", "=", "True", ")", "def", "split_data", "(", "x", "ratio", "=", "0", "8", "):", "to_train", "=", "int", "(", "input_len", "ratio", ")", "to_train", "-=", "to_train", "%", "batch_size", "x_train", "=", "x", "[:", "to_train", "]", "y_train", "=", "[:", "to_train", "]", "x_test", "=", "x", "[", "to_train", ":]", "y_test", "=", "[", "to_train", ":]", "#", "tweak", "match", "batch_size", "to_drop", "=", "x", "shape", "[", "0", "]", "%", "batch_size", "to_drop", ">", "0", "x_test", "=", "x_test", "[:-", "1", "to_drop", "]", "y_test", "=", "y_test", "[:-", "1", "to_drop", "]", "#", "reshaping", "reshape_3", "=", "lambda", "x", "x", "values", "reshape", "((", "x", "shape", "[", "0", "],", "x", "shape", "[", "1", "],", "1", "))", "x_train", "=", "reshape_3", "(", "x_train", ")", "x_test", "=", "reshape_3", "(", "x_test", ")", "reshape_2", "=", "lambda", "x", "x", "values", "reshape", "((", "x", "shape", "[", "0", "],", "1", "))", "y_train", "=", "reshape_2", "(", "y_train", ")", "y_test", "=", "reshape_2", "(", "y_test", ")", "return", "(", "x_train", "y_train", "),", "(", "x_test", "y_test", ")", "(", "x_train", "y_train", "),", "(", "x_test", "y_test", ")", "=", "split_data", "(", "data_input", "expected_output", ")", "print", "('", "x_train", "shape", "',", "x_train", "shape", ")", "print", "('", "y_train", "shape", "',", "y_train", "shape", ")", "print", "('", "x_test", "shape", "',", "x_test", "shape", ")", "print", "('", "y_test", "shape", "',", "y_test", "shape", ")", "print", "('", "Creating", "Stateless", "Model", "...')", "model_stateless", "=", "create_model", "(", "stateful", "=", "False", ")", "import", "os", "import", "datetime", "ROOT_DIR", "=", "os", "getcwd", "()", "log_dir", "=", "os", "path", "join", "('", "callback_tests", "')", "os", "path", "exists", "(", "log_dir", "):", "os", "makedirs", "(", "log_dir", ")", "print", "(", "log_dir", ")", "tensorboard_callback", "=", "tf", "keras", "callbacks", "TensorBoard", "(", "log_dir", "=", "log_dir", ")", "print", "('", "Training", "')", "history", "=", "model_stateless", "fit", "(", "x_train", "y_train", "batch_size", "=", "batch_size", "epochs", "=", "epochs", "verbose", "=", "1", "validation_data", "=(", "x_test", "y_test", "),", "shuffle", "=", "False", "callbacks", "=[", "tensorboard_callback", "]", ")", "```", "**", "Other", "info", "logs", "**", "Train", "800", "samples", "validate", "200", "samples", "2020", "01", "14", "21", "30", "27", "591905", "I", "tensorflow", "core", "profiler", "lib", "profiler_session", "cc", "225", "]", "Profiler", "session", "started", "2020", "01", "14", "21", "30", "27", "594743", "I", "tensorflow", "core", "profiler", "internal", "gpu", "cupti_tracer", "cc", "1259", "]", "Profiler", "found", "1", "GPUs", "2020", "01", "14", "21", "30", "27", "599172", "I", "tensorflow", "stream_executor", "platform", "default", "dso_loader", "cc", "44", "]", "Successfully", "opened", "dynamic", "library", "cupti64_101", "dll", "2020", "01", "14", "21", "30", "27", "704083", "E", "tensorflow", "core", "profiler", "internal", "gpu", "cupti_tracer", "cc", "1307", "]", "function", "cupti_interface_", "->", "Subscribe", "(", "&", "subscriber_", "(", "CUpti_CallbackFunc", ")", "ApiCallback", ")", "failed", "error", "CUPTI_ERROR_INSUFFICIENT_PRIVILEGES", "2020", "01", "14", "21", "30", "27", "716790", "E", "tensorflow", "core", "profiler", "internal", "gpu", "cupti_tracer", "cc", "1346", "]", "function", "cupti_interface_", "->", "ActivityRegisterCallbacks", "(", "AllocCuptiActivityBuffer", "FreeCuptiActivityBuffer", ")", "failed", "error", "CUPTI_ERROR_INSUFFICIENT_PRIVILEGES", "Epoch", "1", "5", "2020", "01", "14", "21", "30", "28", "370429", "I", "tensorflow", "stream_executor", "platform", "default", "dso_loader", "cc", "44", "]", "Successfully", "opened", "dynamic", "library", "cublas64_10", "dll", "2020", "01", "14", "21", "30", "28", "651767", "I", "tensorflow", "stream_executor", "platform", "default", "dso_loader", "cc", "44", "]", "Successfully", "opened", "dynamic", "library", "cudnn64_7", "dll", "2020", "01", "14", "21", "30", "29", "662864", "E", "tensorflow", "core", "profiler", "internal", "gpu", "cupti_tracer", "cc", "1329", "]", "function", "cupti_interface_", "->", "EnableCallback", "(", "0", "subscriber_", "CUPTI_CB_DOMAIN_DRIVER_API", "cbid", ")", "failed", "error", "CUPTI_ERROR_INVALID_PARAMETER", "2020", "01", "14", "21", "30", "29", "670282", "I", "tensorflow", "core", "profiler", "internal", "gpu", "device_tracer", "cc", "88", "]", "GpuTracer", "collected", "0", "callback", "api", "events", "0", "activity", "events", "800", "800", "[==============================]", "5s", "6ms", "sample", "loss", "0", "0011", "val_loss", "0", "0011", "Epoch", "2", "5", "800", "800", "[==============================]", "3s", "4ms", "sample", "loss", "8", "5921e", "04", "val_loss", "0", "0010", "Epoch", "3", "5", "800", "800", "[==============================]", "3s", "3ms", "sample", "loss", "8", "5613e", "04", "val_loss", "0", "0010", "Epoch", "4", "5", "800", "800", "[==============================]", "3s", "4ms", "sample", "loss", "8", "5458e", "04", "val_loss", "9", "9713e", "04", "Epoch", "5", "5", "800", "800", "[==============================]", "3s", "4ms", "sample", "loss", "8", "5345e", "04", "val_loss", "9", "8825e", "04", "<", "em", ">", "Please", "make", "sure", "bug", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "bug_template", "</", "em", ">", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "Yes", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "colab", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "TensorFlow", "installed", "(", "source", "binary", "):", "TensorFlow", "version", "(", "use", "command", "):", "2", "1", "0", "rc1", "Python", "version", "3", "6", "9", "Bazel", "version", "(", "compiling", "source", "):", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "CUDA", "cuDNN", "version", "V10", "1", "243", "GPU", "model", "memory", "**", "Describe", "current", "behavior", "**", "I", "use", "tf", "image", "random_brightness", "api", "augmentation", "With", "dataset", "api", "I", "put", "augmentation", "functions", "parser", "method", "use", "Dataset", "map", "api", "applying", "method", "dataset", "_Transformed", "dataset_", "reproducible", "I", "put", "non", "negative", "integer", ">", "0", "_num_parallel_calls_", "argument", "Dataset", "map", "api", "It", "also", "I", "use", "tf", "data", "experimental", "AUTOTUNE", "num_parallel_calls", "argument", "**", "Code", "reproduce", "issue", "**", "[", "colab", "link", "reproduce", "issue", "](", "https", "://", "colab", "research", "google", "com", "drive", "1uNpn1Rf1_WvG2lnAS41g36IDWOB2IW7", "-)", "**", "Other", "info", "logs", "**", "It", "looks", "like", "tf", "random", "uniform", "method", "reason", "happening", "The", "implementation", "tf", "image", "random_brightness", "use", "tensorflow", "random", "uniform", "method", "method", "reproducible", "multiprocessing", "I", "tested", "tf", "image", "random_contrast", "tf", "image", "random_saturation", "They", "reproducible", "also", "**", "System", "information", "**", "TensorFlow", "version", "(", "using", "):", "TF", "2", "0", "0", "Are", "willing", "contribute", "(", "Yes", "No", "):", "Yes", "**", "Describe", "feature", "current", "behaviour", "state", "**", "Currently", "`", "tf", "keras", "models", "Model", "fit", "`", "method", "allows", "user", "pass", "either", "sample_weight", "class_weight", "parameters", "These", "used", "compute", "[", "point", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "1cf0898dd4331baf93fe77205550f2c2e6c90ee5", "tensorflow", "python", "keras", "engine", "training", "py", "#", "L2527", ")", "standardised", "sample_weights", "used", "later", "calculating", "loss", "This", "feature", "request", "extending", "tf", "keras", "Model", "evaluate", "API", "permits", "using", "`", "class_weight", "`", "directly", "The", "`", "evaluate", "`", "function", "already", "permits", "`", "sample_weight", "`.", "**", "Will", "change", "current", "api", "How", "**", "current", "API", "```", "evaluate", "(", "x", "=", "None", "=", "None", "batch_size", "=", "None", "verbose", "=", "1", "sample_weight", "=", "None", "steps", "=", "None", "callbacks", "=", "None", "max_queue_size", "=", "10", "workers", "=", "1", "use_multiprocessing", "=", "False", ")", "```", "new", "API", "```", "evaluate", "(", "x", "=", "None", "=", "None", "batch_size", "=", "None", "verbose", "=", "1", "sample_weight", "=", "None", ">>>", "class_weight", "=", "None", "steps", "=", "None", "callbacks", "=", "None", "max_queue_size", "=", "10", "workers", "=", "1", "use_multiprocessing", "=", "False", ")", "```", "**", "Who", "benefit", "feature", "**", "Those", "users", "API", "would", "like", "perform", "evaluation", "model", "trained", "bespoke", "class", "weights", "**", "Any", "Other", "info", "**", "https", "://", "github", "com", "tensorflow", "examples", "blob", "master", "courses", "udacity_intro_to_tensorflow_lite", "tflite_c04_exercise_convert_model_to_tflite_solution", "ipynb", "Under", "Create", "Dataset", "Images", "Labels", "\",", "code", "`", "train_batches", "=", "train_examples", "cache", "().", "shuffle", "(", "num_examples", "4", ").", "batch", "(", "BATCH_SIZE", ").", "map", "(", "format_example", ").", "prefetch", "(", "1", ")`", "similar", "validation", "test", "examples", "...", "Is", "right", "practise", "??", "Shouldn", "first", "format", "raw", "images", "batch", "together", "rather", "opposite", "way", "<", "em", ">", "Please", "make", "sure", "build", "installation", "issue", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "build_template", "</", "em", ">", "**", "System", "information", "**", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Windows", "10", "home", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "PC", "TensorFlow", "installed", "(", "source", "binary", "):", "1", "13", "0", "TensorFlow", "version", "Python", "version", "3", "6", "Installed", "using", "virtualenv", "pip", "conda", "conda", "Bazel", "version", "(", "compiling", "source", "):", "0", "21", "0", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "CUDA", "cuDNN", "version", "10", "0", "7", "4", "2", "24", "GPU", "model", "memory", "RTX", "2080", "Ti", "CPU", "model", "make", "AMD", "Ryzen", "7", "3800X", "8", "Core", "Processor", "3", "89GHz", "Anaconda", "Python", "Command", "Prompt", "**", "Describe", "problem", "**", "Trying", "build", "TF", "1", "13", "source", "Issue", "creation", "wheel", "file", "bazel", "Attached", "exact", "sequence", "commands", "issued", "Trying", "conver", "*.", "pb", "file", "TFLite", "file", "trained", "tensorflow", "1", "13", "**", "Exact", "sequence", "commands", "steps", "executed", "running", "problem", "**", "conda", "update", "n", "base", "c", "defaults", "conda", "conda", "update", "--", "conda", "create", "n", "tensorflow", "build", "pip", "python", "=", "3", "6", "conda", "activate", "tensorflow", "build", "python", "pip", "install", "--", "upgrade", "pip", "conda", "install", "c", "anaconda", "git", "set", "PATH", "=%", "PATH", "%;", "C", ":\\", "msys64", "\\", "usr", "\\", "bin", "pip", "install", "six", "numpy", "wheel", "pip", "install", "keras_applications", "==", "1", "0", "6", "--", "deps", "pip", "install", "keras_preprocessing", "==", "1", "0", "5", "--", "deps", "conda", "install", "c", "conda", "forge", "bazel", "=", "0", "21", "0", "mkdir", "C", ":\\", "tensorflow", "build", "cd", "C", ":\\", "tensorflow", "build", "git", "clone", "https", "://", "github", "com", "tensorflow", "tensorflow", "git", "cd", "tensorflow", "git", "checkout", "r1", "13", "python", "./", "configure", "py", "You", "bazel", "0", "21", "0", "(@", "non", "git", ")", "installed", "Please", "specify", "location", "python", "[", "Default", "C", ":\\", "ProgramData", "\\", "Anaconda3", "\\", "envs", "\\", "tensorflow", "build", "\\", "python", "exe", "]:", "Found", "possible", "Python", "library", "paths", "C", ":\\", "ProgramData", "\\", "Anaconda3", "\\", "envs", "\\", "tensorflow", "build", "\\", "lib", "\\", "site", "packages", "Please", "input", "desired", "Python", "library", "path", "use", "Default", "[", "C", ":\\", "ProgramData", "\\", "Anaconda3", "\\", "envs", "\\", "tensorflow", "build", "\\", "lib", "\\", "site", "packages", "]", "Do", "wish", "build", "TensorFlow", "XLA", "JIT", "support", "[", "N", "]:", "n", "No", "XLA", "JIT", "support", "enabled", "TensorFlow", "Do", "wish", "build", "TensorFlow", "ROCm", "support", "[", "N", "]:", "n", "No", "ROCm", "support", "enabled", "TensorFlow", "Do", "wish", "build", "TensorFlow", "CUDA", "support", "[", "N", "]:", "Please", "specify", "CUDA", "SDK", "version", "want", "use", "[", "Leave", "empty", "default", "CUDA", "10", "0", "]:", "10", "0", "Please", "specify", "location", "CUDA", "10", "0", "toolkit", "installed", "Refer", "README", "md", "details", "[", "Default", "C", ":/", "Program", "Files", "NVIDIA", "GPU", "Computing", "Toolkit", "CUDA", "v10", "0", "]:", "Please", "specify", "cuDNN", "version", "want", "use", "[", "Leave", "empty", "default", "cuDNN", "7", "]:", "7", "4", "Please", "specify", "location", "cuDNN", "7", "library", "installed", "Refer", "README", "md", "details", "[", "Default", "C", ":/", "Program", "Files", "NVIDIA", "GPU", "Computing", "Toolkit", "CUDA", "v10", "0", "]:", "Please", "specify", "list", "comma", "separated", "Cuda", "compute", "capabilities", "want", "build", "You", "find", "compute", "capability", "device", "https", "://", "developer", "nvidia", "com", "cuda", "gpus", "Please", "note", "additional", "compute", "capability", "significantly", "increases", "build", "time", "binary", "size", "[", "Default", "3", "5", "7", "0", "]:", "7", "5", "Please", "specify", "optimization", "flags", "use", "compilation", "bazel", "option", "\"--", "config", "=", "opt", "specified", "[", "Default", "arch", "AVX", "]:", "Would", "like", "override", "eigen", "strong", "inline", "C", "++", "compilation", "reduce", "compilation", "time", "[", "Y", "n", "]:", "Eigen", "strong", "inline", "overridden", "bazel", "build", "--", "config", "=", "opt", "--", "config", "=", "cuda", "--", "define", "=", "no_tensorflow_py_deps", "=", "true", "tensorflow", "tools", "pip_package", "build_pip_package", "**", "info", "logs", "**", "////////////////////////////////////////////////////////", "LOG", "/////////////////////////////////////////////////////", "ERROR", "C", ":/", "tensorflow", "build", "tensorflow", "tensorflow", "BUILD", "579", "1", "Executing", "genrule", "tensorflow", "tf_python_api_gen_v1", "failed", "(", "Exit", "1", "):", "bash", "exe", "failed", "error", "executing", "command", "cd", "C", ":/", "users", "eduar", "_bazel_eduar", "j7bi4x5j", "execroot", "org_tensorflow", "SET", "CUDA_TOOLKIT_PATH", "=", "C", ":/", "Program", "Files", "NVIDIA", "GPU", "Computing", "Toolkit", "CUDA", "v10", "0", "SET", "CUDNN_INSTALL_PATH", "=", "C", ":/", "Program", "Files", "NVIDIA", "GPU", "Computing", "Toolkit", "CUDA", "v10", "0", "SET", "PATH", "=", "C", ":\\", "msys64", "\\", "usr", "\\", "bin", ";", "C", ":\\", "msys64", "\\", "bin", "SET", "PYTHON_BIN_PATH", "=", "C", ":/", "Users", "eduar", "/.", "conda", "envs", "tensorflow", "build", "python", "exe", "SET", "PYTHON_LIB_PATH", "=", "C", ":/", "Users", "eduar", "/.", "conda", "envs", "tensorflow", "build", "lib", "site", "packages", "SET", "TF_CUDA_CLANG", "=", "0", "SET", "TF_CUDA_COMPUTE_CAPABILITIES", "=", "7", "5", "SET", "TF_CUDA_VERSION", "=", "10", "0", "SET", "TF_CUDNN_VERSION", "=", "7", "SET", "TF_NEED_CUDA", "=", "1", "SET", "TF_NEED_OPENCL_SYCL", "=", "0", "SET", "TF_NEED_ROCM", "=", "0", "C", ":/", "msys64", "usr", "bin", "bash", "exe", "bazel", "x64_windows", "opt", "genfiles", "tensorflow", "tf_python_api_gen_v1", "genrule_script", "sh", "Execution", "platform", "bazel_tools", "platforms", "host_platform", "Traceback", "(", "recent", "call", "last", "):", "File", "\"\\\\?\\", "C", ":\\", "Users", "\\", "eduar", "\\", "AppData", "\\", "Local", "\\", "Temp", "\\", "Bazel", "runfiles_fxnhn1zo", "\\", "runfiles", "\\", "org_tensorflow", "\\", "tensorflow", "\\", "python", "\\", "pywrap_tensorflow", "py", "\",", "line", "58", "<", "module", ">", "tensorflow", "python", "pywrap_tensorflow_internal", "import", "File", "\"\\\\?\\", "C", ":\\", "Users", "\\", "eduar", "\\", "AppData", "\\", "Local", "\\", "Temp", "\\", "Bazel", "runfiles_fxnhn1zo", "\\", "runfiles", "\\", "org_tensorflow", "\\", "tensorflow", "\\", "python", "\\", "pywrap_tensorflow_internal", "py", "\",", "line", "28", "<", "module", ">", "_pywrap_tensorflow_internal", "=", "swig_import_helper", "()", "File", "\"\\\\?\\", "C", ":\\", "Users", "\\", "eduar", "\\", "AppData", "\\", "Local", "\\", "Temp", "\\", "Bazel", "runfiles_fxnhn1zo", "\\", "runfiles", "\\", "org_tensorflow", "\\", "tensorflow", "\\", "python", "\\", "pywrap_tensorflow_internal", "py", "\",", "line", "24", "swig_import_helper", "_mod", "=", "imp", "load_module", "('", "_pywrap_tensorflow_internal", "',", "fp", "pathname", "description", ")", "File", "C", ":\\", "Users", "\\", "eduar", "\\.", "conda", "\\", "envs", "\\", "tensorflow", "build", "\\", "lib", "\\", "imp", "py", "\",", "line", "243", "load_module", "return", "load_dynamic", "(", "name", "filename", "file", ")", "File", "C", ":\\", "Users", "\\", "eduar", "\\.", "conda", "\\", "envs", "\\", "tensorflow", "build", "\\", "lib", "\\", "imp", "py", "\",", "line", "343", "load_dynamic", "return", "_load", "(", "spec", ")", "ImportError", "DLL", "load", "failed", "The", "specified", "module", "could", "found", "During", "handling", "exception", "another", "exception", "occurred", "Traceback", "(", "recent", "call", "last", "):", "File", "\"\\\\?\\", "C", ":\\", "Users", "\\", "eduar", "\\", "AppData", "\\", "Local", "\\", "Temp", "\\", "Bazel", "runfiles_fxnhn1zo", "\\", "runfiles", "\\", "org_tensorflow", "\\", "tensorflow", "\\", "python", "\\", "tools", "\\", "api", "\\", "generator", "\\", "create_python_api", "py", "\",", "line", "27", "<", "module", ">", "tensorflow", "python", "tools", "api", "generator", "import", "doc_srcs", "File", "\"\\\\?\\", "C", ":\\", "Users", "\\", "eduar", "\\", "AppData", "\\", "Local", "\\", "Temp", "\\", "Bazel", "runfiles_fxnhn1zo", "\\", "runfiles", "\\", "org_tensorflow", "\\", "tensorflow", "\\", "python", "\\", "__init__", "py", "\",", "line", "49", "<", "module", ">", "tensorflow", "python", "import", "pywrap_tensorflow", "File", "\"\\\\?\\", "C", ":\\", "Users", "\\", "eduar", "\\", "AppData", "\\", "Local", "\\", "Temp", "\\", "Bazel", "runfiles_fxnhn1zo", "\\", "runfiles", "\\", "org_tensorflow", "\\", "tensorflow", "\\", "python", "\\", "pywrap_tensorflow", "py", "\",", "line", "74", "<", "module", ">", "raise", "ImportError", "(", "msg", ")", "ImportError", "Traceback", "(", "recent", "call", "last", "):", "File", "\"\\\\?\\", "C", ":\\", "Users", "\\", "eduar", "\\", "AppData", "\\", "Local", "\\", "Temp", "\\", "Bazel", "runfiles_fxnhn1zo", "\\", "runfiles", "\\", "org_tensorflow", "\\", "tensorflow", "\\", "python", "\\", "pywrap_tensorflow", "py", "\",", "line", "58", "<", "module", ">", "tensorflow", "python", "pywrap_tensorflow_internal", "import", "File", "\"\\\\?\\", "C", ":\\", "Users", "\\", "eduar", "\\", "AppData", "\\", "Local", "\\", "Temp", "\\", "Bazel", "runfiles_fxnhn1zo", "\\", "runfiles", "\\", "org_tensorflow", "\\", "tensorflow", "\\", "python", "\\", "pywrap_tensorflow_internal", "py", "\",", "line", "28", "<", "module", ">", "_pywrap_tensorflow_internal", "=", "swig_import_helper", "()", "File", "\"\\\\?\\", "C", ":\\", "Users", "\\", "eduar", "\\", "AppData", "\\", "Local", "\\", "Temp", "\\", "Bazel", "runfiles_fxnhn1zo", "\\", "runfiles", "\\", "org_tensorflow", "\\", "tensorflow", "\\", "python", "\\", "pywrap_tensorflow_internal", "py", "\",", "line", "24", "swig_import_helper", "_mod", "=", "imp", "load_module", "('", "_pywrap_tensorflow_internal", "',", "fp", "pathname", "description", ")", "File", "C", ":\\", "Users", "\\", "eduar", "\\.", "conda", "\\", "envs", "\\", "tensorflow", "build", "\\", "lib", "\\", "imp", "py", "\",", "line", "243", "load_module", "return", "load_dynamic", "(", "name", "filename", "file", ")", "File", "C", ":\\", "Users", "\\", "eduar", "\\.", "conda", "\\", "envs", "\\", "tensorflow", "build", "\\", "lib", "\\", "imp", "py", "\",", "line", "343", "load_dynamic", "return", "_load", "(", "spec", ")", "ImportError", "DLL", "load", "failed", "The", "specified", "module", "could", "found", "Failed", "load", "native", "TensorFlow", "runtime", "See", "https", "://", "www", "tensorflow", "org", "install", "errors", "common", "reasons", "solutions", "Include", "entire", "stack", "trace", "error", "message", "asking", "help", "Target", "tensorflow", "tools", "pip_package", "build_pip_package", "failed", "build", "INFO", "Elapsed", "time", "1319", "085s", "Critical", "Path", "291", "62s", "INFO", "4651", "processes", "4651", "local", "FAILED", "Build", "NOT", "complete", "successfully", "///////////////////////////////////////////////////////////////////////////////////////////////////////////////////", "Include", "logs", "source", "code", "would", "helpful", "diagnose", "problem", "If", "including", "tracebacks", "please", "include", "full", "traceback", "Large", "logs", "files", "attached", "<", "em", ">", "Please", "make", "sure", "build", "installation", "issue", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "build_template", "</", "em", ">", "**", "System", "information", "**", "OS", "Platform", "Distribution", "Windows", "10", "TensorFlow", "installed", "(", "source", "binary", "):", "Source", "TensorFlow", "version", "2", "1", "Python", "version", "3", "7", "Bazel", "version", "(", "compiling", "source", "):", "0", "29", "1", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "VS2019", "CUDA", "cuDNN", "version", "10", "1", "7", "6", "GPU", "model", "memory", "2070", "Max", "Q", "I", "setup", "using", "configure", "following", "options", "selected", "XLA", "JIT", "Cuda", "arch", "AVX", "Eigen", "strong", "inline", "overridden", "When", "attempting", "build", "source", "using", "following", "command", "bazel", "build", "--", "config", "=", "opt", "--", "config", "=", "cuda", "--", "define", "=", "no_tensorflow_py_deps", "=", "true", "tensorflow", "libtensorflow", "I", "get", "following", "error", "ERROR", "C", ":/", "sdks", "tensorflow", "tensorflow", "compiler", "xla", "service", "gpu", "BUILD", "1616", "1", "C", "++", "compilation", "rule", "'//", "tensorflow", "compiler", "xla", "service", "gpu", "hlo_algorithm_blacklist", "failed", "(", "Exit", "2", ")", "cl", "Command", "line", "warning", "D9002", "ignoring", "unknown", "option", "'-", "std", "=", "c", "++", "14", "tensorflow", "compiler", "xla", "service", "gpu", "hlo_algorithm_blacklist", "cc", "(", "28", "):", "error", "C2131", "expression", "evaluate", "constant", "external", "com_google_absl", "\\", "absl", "strings", "string_view", "h", "(", "186", "):", "note", "non", "constant", "(", "sub", "-)", "expression", "encountered", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "see", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Windows", "Linux", "TensorFlow", "installed", "(", "source", "binary", "):", "pip", "TensorFlow", "version", "(", "use", "command", "):", "2", "1", "0", "Python", "version", "3", "7", "6", "**", "Describe", "current", "behavior", "**", "In", "example", "error", "raised", "although", "session", "kwargs", "supported", "eager", "mode", "kwargs", "simply", "silently", "ignored", "```", "import", "tensorflow", "tf", "tensorflow", "import", "keras", "fetches", "=", "[", "lambda", "whatever_I_write_here_is_ignored", "]", "var", "=", "tf", "Variable", "([[", "3", "0", "]])", "model", "=", "keras", "models", "Sequential", "([", "keras", "layers", "Dense", "(", "1", "input_shape", "=(", "1", ",))])", "model", "compile", "(", "loss", "=\"", "mse", "\",", "optimizer", "=\"", "adam", "\")", "model", "_function_kwargs", "=", "{\"", "fetches", "\":", "fetches", "should_fail", "\":", "ignored_as_well", "\"}", "model", "fit", "([[", "7", "0", "]],", "[[", "9", "0", "]],", "epochs", "=", "2", ")", "```", "**", "Describe", "expected", "behavior", "**", "An", "error", "raised", "I", "aware", "`", "model", "_function_kwargs", "`", "part", "public", "API", "`", "keras", "`", "(", "opposed", "`", "tf", "keras", "`)", "raise", "error", "```", "import", "keras", "import", "tensorflow", "tf", "fetches", "=", "[", "lambda", "whatever_I_write_here_is_ignored", "]", "var", "=", "tf", "Variable", "([[", "3", "0", "]])", "model", "=", "keras", "models", "Sequential", "([", "keras", "layers", "Dense", "(", "1", "input_shape", "=(", "1", ",))])", "model", "compile", "(", "loss", "=\"", "mse", "\",", "optimizer", "=\"", "adam", "\")", "model", "_function_kwargs", "=", "{\"", "fetches", "\":", "fetches", "should_fail", "\":", "ignored_as_well", "\"}", "model", "fit", "([[", "7", "0", "]],", "[[", "9", "0", "]],", "epochs", "=", "2", ")", "```", "outputs", "```", "Exception", "occurred", "ValueError", "Session", "keyword", "arguments", "support", "eager", "execution", "You", "passed", "{'", "fetches", "':", "[<", "function", "<", "lambda", ">", "0x7f94681be3b0", ">],", "should_fail", "':", "ignored_as_well", "'}", "File", "\"/", "home", "bersbersbers", "/.", "pyenv", "versions", "3", "7", "6", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "keras", "backend", "py", "\",", "line", "3759", "function", "```", "Somewhat", "related", "https", "://", "github", "com", "tensorflow", "tensorflow", "issues", "34448", "Tf", "Version", "2", "0", "0", "Python", "3", "7", "5", "IDE", "Spyder", "OS", "Windows", "I", "wrote", "subclass", "custom", "loss", "function", "tried", "list", "arguments", "checkpoint", "follows", "The", "model", "arbitrary", "one", "```", "class", "SoftDiceLoss", "(", "tf", "keras", "losses", "Loss", "):", "'''", "SoftDiceLoss", "calculates", "multi", "class", "soft", "dice", "loss", "loss", "=", "avg_batch", "(", "1", "-(", "sum", "(", "W_k", "sum", "(", "yPred", "yTrue", ")))/(", "sum", "(", "W_ksum", "(", "yPred", "^", "2", "yTrue", "^", "2", "))))", "W_k", "=", "1", "/(", "number", "voxels", "class", "k", ")^", "wPow", "Class", "number", "segmented", "regions", "includes", "background", "Args", "yPred", "yTrue", "prediced", "desired", "outputs", "shaped", "[", "mbSize", "classNum", "tensor", "dimensions", "].", "Also", "must", "float", "point", "wPow", "power", "weiight", "A", "higher", "one", "favours", "classes", "smaller", "number", "voxels", "Return", "loss", "scalar", "tensor", "'''", "def", "__init__", "(", "self", "wPow", "=", "2", "0", "name", "='", "SoftDiceLoss", "'):", "super", "().", "__init__", "(", "name", "=", "name", ")", "self", "epsilon", "=", "1e", "16", "self", "wPow", "=", "wPow", "def", "call", "(", "self", "yPred", "yTrue", "):", "yTrue", "=", "tf", "dtypes", "cast", "(", "yTrue", "dtype", "=", "yPred", "dtype", ")", "#", "Dot", "product", "yPred", "yTrue", "sum", "datum", "class", "crossProd", "=", "tf", "multiply", "(", "yPred", "yTrue", ")", "#", "As", "symbolic", "tensor", "dimensions", "shapes", "etc", "cannot", "extracted", "data", "used", "subroutines", "crossProdSum", "=", "tf", "math", "reduce_sum", "(", "crossProd", "axis", "=", "np", "arange", "(", "2", "5", "))", "#", "tf", "rank", "(", "yTrue", ")))", "#", "Calculate", "weight", "datum", "class", "weight", "=", "tf", "math", "reduce_sum", "(", "yTrue", "axis", "=", "np", "arange", "(", "2", "5", "))#", "tf", "rank", "(", "yTrue", ")))", "#", "weight", "=", "tf", "math", "divide", "(", "1", "tf", "math", "square", "(", "weight", ")+", "self", "epsilon", ")", "weight", "=", "tf", "math", "divide", "(", "1", "tf", "math", "pow", "(", "weight", "self", "wPow", ")+", "self", "epsilon", ")", "#", "Weighted", "sum", "classes", "numerator", "=", "2", "tf", "math", "reduce_sum", "(", "tf", "multiply", "(", "crossProdSum", "weight", "),", "axis", "=", "1", ")", "#", "Saquared", "summation", "yySum", "=", "tf", "math", "reduce_sum", "(", "tf", "math", "square", "(", "yPred", ")", "tf", "math", "square", "(", "yTrue", "),", "axis", "=", "np", "arange", "(", "2", "5", "))#", "tf", "rank", "(", "yTrue", ")))", "#", "Weighted", "sum", "classes", "denominator", "=", "tf", "math", "reduce_sum", "(", "tf", "multiply", "(", "weight", "yySum", "),", "axis", "=", "1", ")", "#", "Get", "individual", "loss", "average", "minibatch", "loss", "=", "tf", "math", "reduce_mean", "(", "1", "tf", "math", "divide", "(", "numerator", "denominator", "self", "epsilon", "))", "return", "loss", "def", "get_config", "(", "self", "):", "config", "=", "super", "(", "SoftDiceLoss", "self", ").", "get_config", "()", "return", "config", "curOpt", "=", "tf", "keras", "optimizers", "Adam", "(", "learning_rate", "=", "1e", "4", ")", "lossFunc", "=", "SoftDiceLoss", "(", "2", "0", ")", "ckpt", "=", "tf", "train", "Checkpoint", "(", "model", "=", "myModel", "(...),", "optimizer", "=", "curOpt", "lossFunc", "=", "lossFunc", "accFunc", "=", "accFunc", ")", "```", "I", "got", "following", "error", "```", "ckpt", "=", "tf", "train", "Checkpoint", "(", "model", "=", "myModel", "(...),", "optimizer", "=", "curOpt", "lossFunc", "=", "lossFunc", "accFunc", "=", "accFunc", ")", "Traceback", "(", "recent", "call", "last", "):", "File", "\"<", "ipython", "input", "17", "a4d9163bdda3", ">\",", "line", "2", "<", "module", ">", "optimizer", "=", "curOpt", "lossFunc", "=", "lossFunc", "accFunc", "=", "accFunc", ")", "File", "D", ":\\", "TProgramFiles", "\\", "Anaconda3", "\\", "envs", "\\", "keras", "gpu", "\\", "lib", "\\", "site", "packages", "\\", "tensorflow_core", "\\", "python", "\\", "training", "\\", "tracking", "\\", "util", "py", "\",", "line", "1779", "__init__", "%", "(", "v", ",))", "ValueError", "`", "Checkpoint", "`", "expecting", "trackable", "object", "(", "object", "derived", "`", "TrackableBase", "`),", "got", "<", "SoftDiceLoss", "object", "0x0000000011F6F7C8", ">.", "If", "believe", "object", "trackable", "(", "e", "part", "TensorFlow", "Python", "API", "manages", "state", "),", "please", "open", "issue", "```", "I", "sure", "subclass", "trackable", "Is", "intention", "design", "Or", "shall", "feature", "added", "By", "way", "I", "change", "subclass", "normal", "function", "works", "fine", "Actually", "accFunc", "(...)", "normal", "function", "<", "em", ">", "Please", "make", "sure", "bug", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "bug_template", "</", "em", ">", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "yes", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Mac", "OS", "10", "14", "5", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "N", "A", "TensorFlow", "installed", "(", "source", "binary", "):", "binary", "TensorFlow", "version", "(", "use", "command", "):", "2", "1", "0", "Python", "version", "3", "6", "8", "Bazel", "version", "(", "compiling", "source", "):", "N", "A", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "N", "A", "CUDA", "cuDNN", "version", "N", "A", "GPU", "model", "memory", "N", "A", "**", "Describe", "current", "behavior", "**", "See", "code", "```", "import", "numpy", "np", "import", "tensorflow", "tf", "=", "3", "n", "=", "3", "x", "=", "tf", "cast", "(", "np", "random", "randn", "(", "1", "32", "),", "tf", "float32", ")", "z", "=", "tf", "tile", "(", "x", "[", "n", "1", "1", "])", "layer", "=", "tf", "keras", "layers", "Dense", "(", "32", ")", "w", "=", "layer", "(", "z", ")", "tf", "print", "(", "tf", "norm", "(", "z", "[", "0", ":,", ":]", "z", "[", "1", ":,", ":]),", "tf", "norm", "(", "z", "[", "1", ":,", ":]", "z", "[", "n", "1", ":,", ":]))", "tf", "print", "(", "tf", "norm", "(", "w", "[", "0", ":,", ":]", "w", "[", "1", ":,", ":]),", "tf", "norm", "(", "w", "[", "1", ":,", ":]", "w", "[", "n", "1", ":,", ":]))", "```", "In", "code", "replicate", "input", "`", "x", "`", "3", "times", "apply", "dense", "layer", "upon", "We", "expect", "get", "results", "3", "replicates", "In", "fact", "1st", "2nd", "results", "indeed", "3rd", "result", "different", "Here", "results", "script", "```", "0", "0", "0", "1", "0617149e", "06", "#", "error", "fixed", "run", "```", "expect", "results", "0", "Strangely", "enough", "bug", "appears", "`(", "n", ")`", "pairs", "(", "example", "`", "=", "n", "=", "3", "`).", "I", "ran", "code", "`", "`", "`", "n", "`", "1", "100", "found", "~", "40", "%", "combinations", "cause", "bug", "I", "find", "obvious", "pattern", "...", "**", "System", "information", "**", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Windows", "10", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "N", "A", "TensorFlow", "installed", "(", "source", "binary", "):", "binary", "TensorFlow", "version", "2", "1", "0", "Python", "version", "3", "6", "10", "Installed", "using", "virtualenv", "pip", "conda", "pip", "Bazel", "version", "(", "compiling", "source", "):", "N", "A", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "N", "A", "CUDA", "cuDNN", "version", "N", "A", "GPU", "model", "memory", "N", "A", "**", "Describe", "problem", "**", "TensorFlow", "2", "1", "0", "added", "`", "scipy", "`", "required", "dependency", "However", "far", "I", "tell", "TensorFlow", "actually", "need", "scipy", "Judging", "PR", "https", "://", "github", "com", "tensorflow", "tensorflow", "pull", "35278", "(", "introduced", "requirement", "),", "intention", "avoid", "bug", "scipy", "==", "1", "4", "0", "But", "seems", "simply", "scipy", "installed", "would", "another", "way", "avoid", "bug", "adding", "scipy", "requirement", "every", "tensorflow", "installation", "seems", "like", "kind", "drastic", "solution", "It", "also", "mentioned", "release", "notes", "I", "wondering", "whether", "intentional", "change", "**", "Provide", "exact", "sequence", "commands", "steps", "executed", "running", "problem", "**", "`", "pip", "install", "tensorflow", "`", "**", "System", "information", "**", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Linux", "Ubuntu", "18", "04", "TensorFlow", "installed", "(", "source", "binary", "):", "binary", "TensorFlow", "version", "1", "14", "Python", "version", "3", "7", "4", "Installed", "using", "virtualenv", "pip", "conda", "conda", "Bazel", "version", "(", "compiling", "source", "):", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "7", "4", "CUDA", "cuDNN", "version", "10", "2", "GPU", "model", "memory", "GeForce", "GTX", "960M", "PCIe", "SSE2", "16GB", "**", "Describe", "problem", "**", "2020", "01", "09", "12", "25", "17", "491189", "F", "tensorflow", "lite", "toco", "graph_transformations", "quantize", "cc", "611", "]", "Check", "failed", "is_rnn_state_array", "**", "Provide", "exact", "sequence", "commands", "steps", "executed", "running", "problem", "**", "I", "converting", "quantized", "graph", "def", "(.", "pb", ")", "quantized", "tflite", "(.", "tflite", ")", "using", "dummy", "quantization", "encounter", "error", "follows", "```", "(", "tf_gpu_clone", ")", "ridlr", "ridlr107", ":~/", "TensorFlow", "exported_model_12k_quantized", "$", "tflite_convert", "--", "output_file", "tflite_graph", "tflite", "--", "graph_def_file", "tflite_graph", "pb", "--", "input_arrays", "image_tensor", "--", "output_arrays", "TFLite_Detection_PostProcess", "--", "input_shapes", "1", "576", "720", "3", "--", "allow_custom_ops", "--", "inference_type", "QUANTIZED_UINT8", "--", "std_dev_values", "127", "--", "mean_values", "128", "--", "default_ranges_min", "0", "--", "default_ranges_max", "6", "2020", "01", "09", "12", "25", "15", "452049", "I", "tensorflow", "core", "platform", "cpu_feature_guard", "cc", "142", "]", "Your", "CPU", "supports", "instructions", "TensorFlow", "binary", "compiled", "use", "AVX2", "FMA", "2020", "01", "09", "12", "25", "15", "474575", "I", "tensorflow", "core", "platform", "profile_utils", "cpu_utils", "cc", "94", "]", "CPU", "Frequency", "2808000000", "Hz", "2020", "01", "09", "12", "25", "15", "475004", "I", "tensorflow", "compiler", "xla", "service", "service", "cc", "168", "]", "XLA", "service", "0x561bb6736540", "executing", "computations", "platform", "Host", "Devices", "2020", "01", "09", "12", "25", "15", "475031", "I", "tensorflow", "compiler", "xla", "service", "service", "cc", "175", "]", "StreamExecutor", "device", "(", "0", "):", "<", "undefined", ">,", "<", "undefined", ">", "Traceback", "(", "recent", "call", "last", "):", "File", "\"/", "home", "ridlr", "anaconda3", "bin", "tflite_convert", "\",", "line", "10", "<", "module", ">", "sys", "exit", "(", "main", "())", "File", "\"/", "home", "ridlr", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow", "lite", "python", "tflite_convert", "py", "\",", "line", "503", "main", "app", "run", "(", "main", "=", "run_main", "argv", "=", "sys", "argv", "[:", "1", "])", "File", "\"/", "home", "ridlr", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow", "python", "platform", "app", "py", "\",", "line", "40", "run", "_run", "(", "main", "=", "main", "argv", "=", "argv", "flags_parser", "=", "_parse_flags_tolerate_undef", ")", "File", "\"/", "home", "ridlr", "anaconda3", "lib", "python3", "7", "site", "packages", "absl", "app", "py", "\",", "line", "299", "run", "_run_main", "(", "main", "args", ")", "File", "\"/", "home", "ridlr", "anaconda3", "lib", "python3", "7", "site", "packages", "absl", "app", "py", "\",", "line", "250", "_run_main", "sys", "exit", "(", "main", "(", "argv", "))", "File", "\"/", "home", "ridlr", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow", "lite", "python", "tflite_convert", "py", "\",", "line", "499", "run_main", "_convert_tf1_model", "(", "tflite_flags", ")", "File", "\"/", "home", "ridlr", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow", "lite", "python", "tflite_convert", "py", "\",", "line", "193", "_convert_tf1_model", "output_data", "=", "converter", "convert", "()", "File", "\"/", "home", "ridlr", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow", "lite", "python", "lite", "py", "\",", "line", "904", "convert", "**", "converter_kwargs", ")", "File", "\"/", "home", "ridlr", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow", "lite", "python", "convert", "py", "\",", "line", "373", "toco_convert_graph_def", "input_data", "SerializeToString", "())", "File", "\"/", "home", "ridlr", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow", "lite", "python", "convert", "py", "\",", "line", "172", "toco_convert_protos", "TOCO", "failed", "See", "console", "info", ".\\", "n", "%", "\\", "n", "%", "\\", "n", "%", "(", "stdout", "stderr", "))", "tensorflow", "lite", "python", "convert", "ConverterError", "TOCO", "failed", "See", "console", "info", "2020", "01", "09", "12", "25", "16", "861669", "I", "tensorflow", "lite", "toco", "import_tensorflow", "cc", "1336", "]", "Converting", "unsupported", "operation", "TFLite_Detection_PostProcess", "2020", "01", "09", "12", "25", "16", "957738", "I", "tensorflow", "lite", "toco", "graph_transformations", "graph_transformations", "cc", "39", "]", "Before", "Removing", "unused", "ops", "1537", "operators", "2264", "arrays", "(", "0", "quantized", ")", "2020", "01", "09", "12", "25", "17", "017901", "I", "tensorflow", "lite", "toco", "graph_transformations", "graph_transformations", "cc", "39", "]", "Before", "general", "graph", "transformations", "1537", "operators", "2264", "arrays", "(", "0", "quantized", ")", "2020", "01", "09", "12", "25", "17", "482076", "I", "tensorflow", "lite", "toco", "graph_transformations", "graph_transformations", "cc", "39", "]", "After", "general", "graph", "transformations", "pass", "1", "181", "operators", "341", "arrays", "(", "0", "quantized", ")", "2020", "01", "09", "12", "25", "17", "485583", "I", "tensorflow", "lite", "toco", "graph_transformations", "graph_transformations", "cc", "39", "]", "Before", "pre", "quantization", "graph", "transformations", "181", "operators", "341", "arrays", "(", "0", "quantized", ")", "2020", "01", "09", "12", "25", "17", "486877", "I", "tensorflow", "lite", "toco", "graph_transformations", "graph_transformations", "cc", "39", "]", "After", "pre", "quantization", "graph", "transformations", "pass", "1", "99", "operators", "259", "arrays", "(", "0", "quantized", ")", "2020", "01", "09", "12", "25", "17", "488034", "I", "tensorflow", "lite", "toco", "graph_transformations", "graph_transformations", "cc", "39", "]", "Before", "Group", "bidirectional", "sequence", "lstm", "rnn", "99", "operators", "259", "arrays", "(", "0", "quantized", ")", "2020", "01", "09", "12", "25", "17", "489088", "I", "tensorflow", "lite", "toco", "graph_transformations", "graph_transformations", "cc", "39", "]", "Before", "default", "min", "max", "range", "propagation", "graph", "transformations", "99", "operators", "259", "arrays", "(", "0", "quantized", ")", "2020", "01", "09", "12", "25", "17", "489972", "I", "tensorflow", "lite", "toco", "graph_transformations", "graph_transformations", "cc", "39", "]", "After", "default", "min", "max", "range", "propagation", "graph", "transformations", "pass", "1", "99", "operators", "259", "arrays", "(", "0", "quantized", ")", "2020", "01", "09", "12", "25", "17", "491160", "I", "tensorflow", "lite", "toco", "graph_transformations", "graph_transformations", "cc", "39", "]", "Before", "quantization", "graph", "transformations", "99", "operators", "259", "arrays", "(", "0", "quantized", ")", "2020", "01", "09", "12", "25", "17", "491189", "F", "tensorflow", "lite", "toco", "graph_transformations", "quantize", "cc", "611", "]", "Check", "failed", "is_rnn_state_array", "Fatal", "Python", "error", "Aborted", "Current", "thread", "0x00007fb839eed740", "(", "recent", "call", "first", "):", "File", "\"/", "home", "ridlr", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow", "lite", "toco", "python", "toco_from_protos", "py", "\",", "line", "33", "execute", "File", "\"/", "home", "ridlr", "anaconda3", "lib", "python3", "7", "site", "packages", "absl", "app", "py", "\",", "line", "250", "_run_main", "File", "\"/", "home", "ridlr", "anaconda3", "lib", "python3", "7", "site", "packages", "absl", "app", "py", "\",", "line", "299", "run", "File", "\"/", "home", "ridlr", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow", "python", "platform", "app", "py", "\",", "line", "40", "run", "File", "\"/", "home", "ridlr", "anaconda3", "lib", "python3", "7", "site", "packages", "tensorflow", "lite", "toco", "python", "toco_from_protos", "py", "\",", "line", "59", "main", "File", "\"/", "home", "ridlr", "anaconda3", "bin", "toco_from_protos", "\",", "line", "10", "<", "module", ">", "Aborted", "(", "core", "dumped", ")", "```", "However", "I", "include", "following", "specifiers", "*.", "tflite", "created", "`--", "inference_type", "QUANTIZED_UINT8", "--", "std_dev_values", "127", "--", "mean_values", "128", "--", "default_ranges_min", "0", "--", "default_ranges_max", "6", "`", "This", "*.", "tflite", "file", "used", "convert", "_edgetpu", "tflite", "(", "model", "used", "run", "inference", "Google", "coral", ")", "gives", "following", "error", "```", "(", "tf_gpu_clone", ")", "ridlr", "ridlr107", ":~/", "TensorFlow", "exported_model_12k_quantized", "$", "edgetpu_compiler", "tflite_graph", "tflite", "Edge", "TPU", "Compiler", "version", "2", "0", "267685300", "Invalid", "model", "tflite_graph", "tflite", "Model", "quantized", "```", "Hence", "necessary", "include", "specifiers", "quantization", "In", "working", "TF", "2", "0", "I", "noticed", "TF", "Feature", "Columns", "API", "seems", "overlap", "Keras", "Preprocessing", "layers", "(", "Keras", "Utils", ").", "For", "example", "create", "`", "tf", "feature_column", "indicator_column", "()`", "creates", "bunch", "dummy", "variables", "one", "hot", "encoded", "matrix", "based", "upon", "categorical", "variable", "With", "Keras", "preprocessing", "Utils", "use", "`", "tf", "keras", "backend", "one_hot", "()`", "function", "perform", "operation", "I", "think", "similar", "overlaps", "TF", "Feature", "Columns", "like", "embedding", "columns", "similar", "Keras", "functions", "embedding", "columns", "I", "wondering", "steering", "committees", "Tensorflow", "direction", "whether", "plan", "promote", "one", "set", "functions", "versus", "Are", "plans", "deprecate", "one", "set", "versus", "For", "question", "invest", "time", "planning", "code", "might", "change", "future", "Seems", "like", "maintaining", "redundancy", "package", "potentially", "lead", "performance", "differences", "similar", "functions", "confusion", "setting", "code", "etc", "**", "NB", "**", "Oh", "yes", "I", "actually", "asked", "question", "Tensorflow", "Discussion", "forum", "one", "answered", "dynamicwebpaige", "even", "forwarded", "message", "karmel", "Mark", "Omernick", "one", "responded", "Hence", "I", "posted", "Hi", "guys", "Here", "prefetch", "enabled", "input", "stream", "yet", "another", "random", "access", "file", "buffer", "talked", "earlier", "#", "33023", "Here", "come", "code", "benchmark", "numbers", "way", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "No", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "CentOS", "Linux", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "TensorFlow", "installed", "(", "source", "binary", "):", "pip", "install", "TensorFlow", "version", "(", "use", "command", "):", "v2", "0", "0", "rc2", "26", "g64c3d38", "2", "0", "0", "Python", "version", "3", "6", "9", "Bazel", "version", "(", "compiling", "source", "):", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "CUDA", "cuDNN", "version", "GPU", "model", "memory", "CPU", "**", "Describe", "current", "behavior", "**", "For", "reference", "numpy", "planning", "register", "numpy", "ndarray", "Sequence", "https", "://", "github", "com", "numpy", "numpy", "issues", "2776", "The", "sample", "ResNet50", "code", "https", "://", "keras", "io", "applications", "runs", "fine", "But", "ndarray", "registered", "sequence", "TF2", "throws", "InvalidArgumentError", "**", "Code", "reproduce", "issue", "**", "```", "keras", "applications", "resnet50", "import", "ResNet50", "keras", "preprocessing", "import", "image", "keras", "applications", "resnet50", "import", "preprocess_input", "decode_predictions", "import", "numpy", "np", "import", "typing", "typing", "Sequence", "register", "(", "np", "ndarray", ")", "model", "=", "ResNet50", "(", "weights", "='", "imagenet", "')", "img_path", "=", "elephant", "jpg", "img", "=", "image", "load_img", "(", "img_path", "target_size", "=(", "224", "224", "))", "x", "=", "image", "img_to_array", "(", "img", ")", "x", "=", "np", "expand_dims", "(", "x", "axis", "=", "0", ")", "x", "=", "preprocess_input", "(", "x", ")", "preds", "=", "model", "predict", "(", "x", ")", "#", "decode", "results", "list", "tuples", "(", "class", "description", "probability", ")", "#", "(", "one", "list", "sample", "batch", ")", "print", "('", "Predicted", ":',", "decode_predictions", "(", "preds", "top", "=", "3", ")[", "0", "])", "#", "Predicted", "[(", "u", "n02504013", "',", "u", "Indian_elephant", "',", "0", "82658225", "),", "(", "u", "n01871265", "',", "u", "tusker", "',", "0", "1122357", "),", "(", "u", "n02504458", "',", "u", "African_elephant", "',", "0", "061040461", ")]", "```", "Two", "extra", "lines", "added", "sample", "ResNet50", "code", "```", "import", "typing", "typing", "Sequence", "register", "(", "np", "ndarray", ")", "```", "The", "error", "```", "2020", "01", "07", "13", "48", "16", "421816", "W", "tensorflow", "core", "common_runtime", "base_collective_executor", "cc", "216", "]", "BaseCollectiveExecutor", "::", "StartAbort", "Invalid", "argument", "The", "first", "dimension", "padding", "\\", "must", "rank", "inputs", "[", "4", "2", "]", "[]", "[[{{", "node", "conv1_pad", "Pad", "}}]]", "Traceback", "(", "recent", "call", "last", "):", "File", "test_d3m_imports", "py", "\",", "line", "16", "<", "module", ">", "preds", "=", "model", "predict", "(", "x", ")", "File", "\"/", "data", "dsbox", "kyao", "miniconda3", "envs", "dsbox", "eval", "2019", "winter", "lib", "python3", "6", "site", "packages", "keras", "engine", "training", "py", "\",", "line", "1462", "predict", "callbacks", "=", "callbacks", ")", "File", "\"/", "data", "dsbox", "kyao", "miniconda3", "envs", "dsbox", "eval", "2019", "winter", "lib", "python3", "6", "site", "packages", "keras", "engine", "training_arrays", "py", "\",", "line", "324", "predict_loop", "batch_outs", "=", "f", "(", "ins_batch", ")", "File", "\"/", "data", "dsbox", "kyao", "miniconda3", "envs", "dsbox", "eval", "2019", "winter", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "keras", "backend", "py", "\",", "line", "3740", "__call__", "outputs", "=", "self", "_graph_fn", "(*", "converted_inputs", ")", "File", "\"/", "data", "dsbox", "kyao", "miniconda3", "envs", "dsbox", "eval", "2019", "winter", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "1081", "__call__", "return", "self", "_call_impl", "(", "args", "kwargs", ")", "File", "\"/", "data", "dsbox", "kyao", "miniconda3", "envs", "dsbox", "eval", "2019", "winter", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "1121", "_call_impl", "return", "self", "_call_flat", "(", "args", "self", "captured_inputs", "cancellation_manager", ")", "File", "\"/", "data", "dsbox", "kyao", "miniconda3", "envs", "dsbox", "eval", "2019", "winter", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "1224", "_call_flat", "ctx", "args", "cancellation_manager", "=", "cancellation_manager", ")", "File", "\"/", "data", "dsbox", "kyao", "miniconda3", "envs", "dsbox", "eval", "2019", "winter", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "function", "py", "\",", "line", "511", "call", "ctx", "=", "ctx", ")", "File", "\"/", "data", "dsbox", "kyao", "miniconda3", "envs", "dsbox", "eval", "2019", "winter", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "eager", "execute", "py", "\",", "line", "67", "quick_execute", "six", "raise_from", "(", "core", "_status_to_exception", "(", "e", "code", "message", "),", "None", ")", "File", "\"<", "string", ">\",", "line", "3", "raise_from", "tensorflow", "python", "framework", "errors_impl", "InvalidArgumentError", "The", "first", "dimension", "paddings", "must", "rank", "inputs", "[", "4", "2", "]", "[]", "[[", "node", "conv1_pad", "Pad", "(", "defined", "data", "dsbox", "kyao", "miniconda3", "envs", "dsbox", "eval", "2019", "winter", "lib", "python3", "6", "site", "packages", "tensorflow_core", "python", "framework", "ops", "py", "1751", ")", "]]", "[", "O", "\\", "p", "__inference_keras_scratch_graph_10370", "]", "Function", "call", "stack", "keras_scratch_graph", "```", "<", "em", ">", "Please", "make", "sure", "build", "installation", "issue", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "build_template", "</", "em", ">", "**", "System", "information", "**", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "official", "tensorflow", "image", "docker", "hub", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "n", "TensorFlow", "installed", "(", "source", "binary", "):", "n", "TensorFlow", "version", "1", "15", "0", "Python", "version", "3", "Installed", "using", "virtualenv", "pip", "conda", "Docker", "Bazel", "version", "(", "compiling", "source", "):", "n", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "n", "CUDA", "cuDNN", "version", "10", "GPU", "model", "memory", "n", "**", "Describe", "problem", "**", "Simple", "image", "built", "`", "FROM", "tensorflow", "tensorflow", "tag", "`", "fails", "build", "including", "`", "mysql", "client", "`", "```", "dockerfile", "FROM", "tensorflow", "tensorflow", "1", "15", "0", "gpu", "py3", "jupyter", "#", "Avoid", "ERROR", "invoke", "rc", "policy", "rc", "denied", "execution", "start", "#", "RUN", "sed", "/^", "exit", "101", "$/", "exit", "0", "/\"", "usr", "sbin", "policy", "rc", "#", "---", "Install", "needed", "packages", "specified", "requirements", "apt", "COPY", "requirements", "apt", "RUN", "apt", "get", "update", "&&", "xargs", "apt", "get", "install", "<", "requirements", "apt", "#", "---", "Install", "needed", "packages", "specified", "requirements", "pip", "COPY", "requirements", "pip", "RUN", "pip", "install", "U", "--", "trusted", "host", "pypi", "python", "org", "r", "requirements", "pip", "#", "activate", "jupyter", "extensions", "RUN", "jupyter", "contrib", "nbextension", "install", "\\", "&&", "jupyter", "nbextension", "enable", "codefolding", "main", "\\", "&&", "jupyter", "nbextension", "enable", "collapsible_headings", "main", "```", "**", "Provide", "exact", "sequence", "commands", "steps", "executed", "running", "problem", "**", "A", "MWE", "[", "repo", "](", "https", "://", "gitlab", "com", "SumNeuron", "mytf", ")", "contains", "following", "files", "`", "Dockerfile", "ai", "`:", "custom", "image", "built", "top", "official", "tensorflow", "tensorflow", "`", "docker", "compose", "ai", "development", "yml", "`:", "specifies", "`", "Dockerfile", "ai", "`", "build", "file", "mounts", "`", "notebooks", "`", "directory", "`", "requirements", "pip", "`:", "pip", "requirements", "may", "used", "images", "`", "Dockerfile", "ai", "`", "`", "requirements", "apt", "`:", "packages", "needed", "installed", "via", "`", "apt", "get", "`", "For", "convenience", "python", "script", "`", "docker", "py", "`", "provided", "e", "g", "```", "python", "docker", "py", "c", "{", "build", "|", "|", "}", "```", "instead", "```", "docker", "compose", "f", "docker", "compose", "ai", "development", "yml", "{", "build", "|", "|", "}", "```", "**", "Any", "info", "logs", "**", "Include", "logs", "source", "code", "would", "helpful", "diagnose", "problem", "If", "including", "tracebacks", "please", "include", "full", "traceback", "Large", "logs", "files", "attached", "Thank", "submitting", "TensorFlow", "documentation", "issue", "Per", "GitHub", "policy", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "The", "TensorFlow", "docs", "open", "source", "To", "get", "involved", "read", "documentation", "contributor", "guide", "https", "://", "www", "tensorflow", "org", "community", "contribute", "docs", "##", "URL", "(", ")", "issue", "Please", "provide", "link", "documentation", "entry", "example", "https", "://", "www", "tensorflow", "org", "api_docs", "python", "tf", "gradients", "version", "=", "stable", "##", "Description", "issue", "(", "needs", "changing", "):", "It", "unclear", "many", "list", "items", "returned", "`", "tf", "gradients", "`.", "The", "second", "paragraph", "states", "It", "returns", "list", "Tensor", "length", "`", "len", "(", "xs", ")`", "tensor", "`", "sum", "(", "dy", "dx", ")`", "`", "ys", "`.\"", "The", "Returns", "section", "says", "A", "list", "`", "sum", "(", "dy", "dx", ")`", "x", "`", "xs", "`.\"", "So", "...", "one", "`", "sum", "(", "dy", "dx", ")`", "x", "`", "xs", "`", "`", "sum", "(", "dy", "dx", ")`", "`", "ys", "`?", "Besides", "inconsistency", "summation", "notation", "documentation", "ambiguous", "When", "says", "\"`", "sum", "(", "dy", "dx", ")`", "x", "`", "xs", "`\"", "mean", "`", "dy", "dx", "`", "summed", "`", "ys", "`", "axis", "one", "element", "produced", "`", "xs", "`", "way", "around", "A", "clarifying", "example", "would", "help", "statement", "along", "lines", "returns", "list", "<", "whatever", ">", "many", "elements", "`", "xs", "`\"", "(", "`", "ys", "`", "--", "I", "know", ").", "###", "Clear", "description", "For", "example", "someone", "use", "method", "How", "useful", "###", "Correct", "links", "Is", "link", "source", "code", "correct", "###", "Parameters", "defined", "Are", "parameters", "defined", "formatted", "correctly", "###", "Returns", "defined", "Are", "return", "values", "defined", "###", "Raises", "listed", "defined", "Are", "errors", "defined", "For", "example", "https", "://", "www", "tensorflow", "org", "versions", "r2", "0", "api_docs", "python", "tf", "feature_column", "categorical_column_with_vocabulary_file", "#", "raises", "###", "Usage", "example", "Is", "usage", "example", "See", "API", "guide", "https", "://", "www", "tensorflow", "org", "community", "contribute", "docs_ref", "write", "testable", "usage", "examples", "###", "Request", "visuals", "applicable", "Are", "currently", "visuals", "If", "clarify", "content", "###", "Submit", "pull", "request", "Are", "planning", "also", "submit", "pull", "request", "fix", "issue", "See", "docs", "contributor", "guide", "https", "://", "www", "tensorflow", "org", "community", "contribute", "docs", "docs", "API", "guide", "https", "://", "www", "tensorflow", "org", "community", "contribute", "docs_ref", "docs", "style", "guide", "https", "://", "www", "tensorflow", "org", "community", "contribute", "docs_style", "The", "codelab", "still", "links", "experimental", "folder", "makefile", "incorrect", "Visual", "[", "image", "](", "https", "://", "user", "images", "githubusercontent", "com", "997157", "71787651", "3bc27180", "2fe0", "11ea", "8318", "424dc887efc5", "png", ")", "Update", "codelab", "link", "https", "://", "codelabs", "developers", "google", "com", "codelabs", "sparkfun", "tensorflow", "/#", "3", "Code", "read", "```", "make", "f", "tensorflow", "lite", "micro", "tools", "make", "Makefile", "\\", "TARGET", "=", "sparkfun_edge", "micro_speech_bin", "```", "##", "URL", "(", ")", "issue", "https", "://", "codelabs", "developers", "google", "com", "codelabs", "sparkfun", "tensorflow", "/#", "3", "Hi", "I", "running", "training", "loop", "using", "gradientTape", "works", "well", "however", "I", "getting", "different", "training", "accuracy", "metrics", "training", "using", "gradientTape", "loop", "vs", "straight", "model", "fit", "method", "I", "apologise", "question", "stack", "overflow", "however", "best", "knowledge", "parameters", "therefore", "producing", "exactly", "results", "(", "close", "least", ")..", "I", "therefore", "think", "may", "bug", "one", "help", "elucidate", "would", "really", "appreciate", "I", "prepared", "sequential", "model", "follows", "```", "model", "=", "tf", "keras", "models", "Sequential", "()", "model", "add", "(", "tf", "keras", "layers", "Dense", "(", "units", "=", "64", "input_dim", "=", "5078", "activation", "=\"", "relu", "\"))", "model", "add", "(", "tf", "keras", "layers", "Dense", "(", "units", "=", "32", "activation", "=\"", "relu", "\"))", "model", "add", "(", "tf", "keras", "layers", "Dense", "(", "units", "=", "100", "activation", "=\"", "relu", "\"))", "model", "add", "(", "tf", "keras", "layers", "Dense", "(", "units", "=", "24", "activation", "=\"", "sigmoid", "\"))", "```", "`", "model", "fit", "`", "method", "fit", "follows", "```", "model", "compile", "(", "optimizer", "=\"", "Adam", "\",", "loss", "=\"", "binary_crossentropy", "\",", "metrics", "=[\"", "acc", "\"])", "model", "fit", "(", "X_train", "y_train", "batch_size", "=", "32", "epochs", "=", "100", "verbose", "=", "1", "validation_split", "=", "0", "15", "shuffle", "=", "True", ")", "```", "This", "works", "well", "produces", "following", "results", "(", "please", "note", "100", "epochs", "overkill", "model", "overfits", "however", "keep", "epochs", "gradientTape", "loop", "otherwise", "would", "early", "stopping", "callback", "normally", "...", "The", "model", "metrics", "follows", "```", "32", "119", "[=======>......................]", "ETA", "0s", "loss", "0", "0699", "acc", "0", "9753", "119", "119", "[==============================]", "0s", "168us", "sample", "**", "loss", "0", "0668", "**", "acc", "**", "0", "9779", "**", "val_loss", "**", "0", "2350", "**", "val_acc", "**", "0", "9048", "**", "```", "This", "expected", "behaviour", "(", "minus", "overfitting", ")...", "Now", "I", "create", "gradientTape", "loop", "follows", "accuracy", "metrics", "~", "4", "5", "%", "100", "epochs", "reason", "suspect", "bug", "believe", "using", "appropriate", "metrics", "```", "def", "random_batch", "(", "X", "batch_size", "=", "32", "):", "idx", "=", "np", "random", "randint", "(", "len", "(", "X", "),", "size", "=", "batch_size", ")", "return", "X", "[", "idx", "],", "[", "idx", "]", "##", "Further", "split", "train", "data", "training", "set", "validation", "set", "X_train", "X_val", "y_train", "y_val", "=", "train_test_split", "(", "X_train", "y_train", "test_size", "=", "0", "15", "random_state", "=", "1", ")", "```", "```", "##", "Run", "autodiff", "model", "n_epochs", "=", "100", "batch_size", "=", "32", "n_steps", "=", "len", "(", "X_train", ")//", "batch_size", "optimizer", "=", "tf", "keras", "optimizers", "Adam", "()", "loss", "=", "tf", "keras", "losses", "BinaryCrossentropy", "()", "metricLoss", "=", "tf", "keras", "metrics", "BinaryCrossentropy", "()", "metricsAcc", "=", "tf", "keras", "metrics", "BinaryAccuracy", "()", "val_acc_metric", "=", "tf", "keras", "metrics", "BinaryAccuracy", "()", "val_acc_loss", "=", "tf", "keras", "metrics", "BinaryCrossentropy", "()", "train_loss_results", "=", "[]", "train_accuracy_results", "=", "[]", "validation_loss_results", "=", "[]", "validation_accuracy_results", "=", "[]", "#", "loop", "iterate", "epochs", "epoch", "range", "(", "n_epochs", "):", "print", "(\"", "Epoch", "{}/{}\".", "format", "(", "epoch", "n_epochs", "))", "#", "loop", "iterate", "batches", "step", "range", "(", "1", "n_steps", "1", "):", "X_batch", "y_batch", "=", "random_batch", "(", "X_train", "values", "y_train", ")", "#", "gradientTape", "autodiff", "tf", "GradientTape", "()", "tape", "y_pred", "=", "model", "(", "X_batch", "training", "=", "True", ")", "loss_values", "=", "loss", "(", "y_batch", "y_pred", ")", "gradients", "=", "tape", "gradient", "(", "loss_values", "model", "trainable_weights", ")", "optimizer", "apply_gradients", "(", "zip", "(", "gradients", "model", "trainable_weights", "))", "metricLoss", "(", "y_batch", "y_pred", ")", "metricsAcc", "update_state", "(", "y_batch", "y_pred", ")", "#", "Loss", "accuracy", "train_loss_results", "append", "(", "loss_values", ")", "train_accuracy_results", "append", "(", "metricsAcc", "result", "())", "#", "Read", "training", "results", "readout", "=", "Epoch", "{},", "Training", "loss", "{},", "Training", "accuracy", "{}'", "print", "(", "readout", "format", "(", "epoch", "1", "loss_values", "metricsAcc", "result", "()", "100", "))", "metricsAcc", "reset_states", "#", "Run", "validation", "loop", "end", "epoch", "valbatch", "range", "(", "1", "n_steps", "1", "):", "X_batchVal", "y_batchVal", "=", "random_batch", "(", "X_val", "values", "y_val", ")", "val_logits", "=", "model", "(", "X_batchVal", ")", "#", "Update", "val", "metrics", "val_acc_metric", "(", "y_batchVal", "val_logits", ")", "val_acc", "=", "val_acc_metric", "result", "()", "val_acc_metric", "update_state", "(", "y_batchVal", "val_logits", ")", "val_loss", "=", "val_acc_loss", "(", "y_batchVal", "val_logits", ")", "validation_loss_results", "append", "(", "val_loss", ")", "validation_accuracy_results", "append", "(", "val_acc_metric", "result", "())", "#", "Read", "validation", "results", "print", "(", "Validation", "loss", "float", "(", "val_loss", "),'", "Validation", "acc", "%", "%", "(", "float", "(", "val_acc", "100", "),)", ")", "val_acc_metric", "reset_states", "()", "```", "When", "run", "code", "works", "fine", "iterations", "update", "states", "accuracy", "loss", "however", "training", "accuracy", "much", "lower", "model", "fit", "method", "running", "also", "100", "epochs", "showing", "final", "epoch", "result", "printed", "(", "epoch", "iterating", "batch", "):", "Epoch", "100", "Training", "loss", "0", "027735430747270584", "Training", "accuracy", "93", "6534423828125", "Epoch", "100", "Training", "loss", "0", "03832387551665306", "Training", "accuracy", "93", "67249298095703", "**", "Epoch", "100", "Training", "loss", "0", "035500235855579376", "Training", "accuracy", "93", "69097900390625", "**", "Validation", "loss", "0", "3204055726528168", "Validation", "acc", "90", "36458587646484", "Validation", "loss", "0", "32066160440444946", "Validation", "acc", "89", "71354675292969", "Validation", "loss", "0", "32083287835121155", "Validation", "acc", "90", "49479675292969", "Validation", "loss", "0", "3209479749202728", "Validation", "acc", "90", "10416412353516", "**", "Validation", "loss", "0", "32088229060173035", "Validation", "acc", "90", "625", "**", "As", "see", "training", "accuracy", "~", "4", "5", "%", "lower", "compared", "model", "fit", "method", "The", "loss", "records", "fine", "also", "validation", "data", "looks", "pretty", "much", "like", "validation", "data", "model", "fit", "method", "Additionally", "plot", "accuracy", "loss", "model", "fit", "geadientTape", "methods", "shape", "curves", "look", "pretty", "much", "begin", "overfit", "similar", "points", "huge", "discrepancy", "training", "accuracy", "I", "specified", "adam", "optimizer", "well", "binary_crossentropy", "loss", "model", "fit", "gradientTape", "For", "model", "fit", "I", "specific", "accuracy", "acc", "metrics", "understanding", "call", "binary_accuracy", "calculating", "accuracy", "So", "far", "I", "aware", "parameters", "similar", "results", "fairly", "similar", "Additionally", "call", "`", "model", "compile", "`", "training", "model", "`", "gradientTape", "`", "confirm", "evaluation", "results", "slightly", "different", "look", "like", "model", "fit", "method", "```", "**", "Training", "**", "model", "compile", "(", "optimizer", "=", "optimizer", "loss", "=", "tf", "keras", "losses", "binary_crossentropy", "metrics", "=['", "acc", "'])", "print", "('\\", "n", "',", "model", "evaluate", "(", "X_train", "y_train", "verbose", "=", "1", ")[", "1", "])", "32", "101", "[========>.....................]", "ETA", "0s", "loss", "0", "0336", "acc", "0", "9948", "101", "101", "[==============================]", "0s", "307us", "sample", "**", "loss", "0", "0330", "acc", "0", "9942", "**", "**", "Validation", "**", "model", "compile", "(", "optimizer", "=", "optimizer", "loss", "=", "tf", "keras", "losses", "binary_crossentropy", "metrics", "=['", "acc", "'])", "print", "('\\", "n", "',", "model", "evaluate", "(", "X_val", "y_val", "verbose", "=", "1", ")[", "1", "])", "18", "18", "[==============================]", "0s", "111us", "sample", "**", "loss", "0", "3879", "acc", "0", "9028", "**", "```", "Now", "model", "evaluate", "shows", "loss", "accuracy", "similar", "model", "fit", "method", "call", "evaluate", "X_train", "y_train", "This", "suspect", "bug", "Interestingly", "model", "evaluate", "validation", "data", "look", "similar", "gradientTape", "loop", "leaves", "really", "confused", "therefore", "unsure", "true", "training", "accuracy", "loss", "If", "anyone", "help", "would", "really", "appreciate", "...", "I", "happy", "provide", "code", "upstream", "model", "etc", "..", "Again", "apologies", "bug", "seems", "really", "confusing", "like", "incorrect", "behaviour", "...", "Hi", "We", "TF", "code", "create", "graph", "later", "loaded", "Scala", "Java", "application", "[", "Code", "generate", "graph", "](", "https", "://", "github", "com", "JohnSnowLabs", "spark", "nlp", "blob", "9407da076eced850ec840cfc61e665887400de12", "python", "tensorflow", "lib", "ner", "ner_model", "py", ")", "In", "TF", "`", "1", "12", "0", "`", "TF", "`", "1", "13", "1", "`", "used", "see", "device", "placement", "logs", "console", "TF", "`", "1", "15", "0", "`", "logs", "thousands", "lines", "complaining", "```", "Failed", "place", "graph", "without", "changing", "devices", "resources", "Some", "operations", "(", "colocated", "resource", "generating", "operations", ")", "supported", "resources", "devices", "Current", "candidate", "devices", "[", "job", "localhost", "replica", "0", "task", "0", "device", "CPU", "0", "].", "```", "The", "full", "log", "due", "length", "https", "://", "gist", "github", "com", "maziyarpanahi", "83f179e01634db2de12cb82501177c8d", "I", "understand", "log", "saying", "I", "know", "way", "control", "logging", "level", "Java", "API", "I", "would", "like", "understand", "changed", "TF", "1", "15", "0", "logs", "without", "change", "process", "Issue", "It", "really", "hard", "debug", "many", "logs", "console", "also", "Travis", "fails", "due", "exceeding", "logs", "limit", "since", "many", "unit", "tests", "using", "graph", "every", "time", "1000", "lines", "logs", "saying", "something", "really", "care", "Any", "help", "manage", "suppress", "logs", "would", "highly", "appreciated", "**", "System", "information", "**", "Google", "Colab", "system", "(", "GPU", "mode", ")", "TensorFlow", "2", "1", "rc2", "Python", "3", "**", "Describe", "current", "behavior", "**", "Take", "long", "time", "build", "compile", "seq2seq", "model", "use", "``", "set_floatx", "('", "float16", "')``", "instead", "float32", "(", "default", ")", "**", "Describe", "expected", "behavior", "**", "I", "know", "normal", "default", "value", "``", "float32", "``", "takes", "1", "2", "second", "**", "Code", "reproduce", "issue", "**", "I", "coded", "example", "[", "](", "https", "://", "drive", "google", "com", "open", "id", "=", "170KpjIGFmNNt", "SS", "6oXgVbRnZR4", "7ah_", ")", "**", "Base", "System", "information", "**", "Linux", "Ubuntu", "18", "04", "nvidia", "docker", "Docker", "version", "19", "03", "5", "build", "633a0ea838", "nvidia", "driver", "via", "`", "sudo", "apt", "get", "install", "nvidia", "driver", "418", "`", "CUDA", "cuDNN", "version", "10", "1", "GPU", "model", "memory", "```", "$", "nvidia", "smi", "Thu", "Jan", "2", "12", "08", "27", "2020", "+-----------------------------------------------------------------------------+", "|", "NVIDIA", "SMI", "430", "64", "Driver", "Version", "430", "64", "CUDA", "Version", "10", "1", "|", "|-------------------------------+----------------------+----------------------+", "|", "GPU", "Name", "Persistence", "M", "|", "Bus", "Id", "Disp", "A", "|", "Volatile", "Uncorr", "ECC", "|", "|", "Fan", "Temp", "Perf", "Pwr", "Usage", "Cap", "|", "Memory", "Usage", "|", "GPU", "Util", "Compute", "M", "|", "|===============================+======================+======================|", "|", "0", "GeForce", "GT", "710", "Off", "|", "00000000", "AF", "00", "0", "N", "A", "|", "N", "A", "|", "|", "40", "%", "46C", "P0", "N", "A", "N", "A", "|", "0MiB", "2002MiB", "|", "N", "A", "Default", "|", "+-------------------------------+----------------------+----------------------+", "|", "1", "GeForce", "RTX", "207", "...", "Off", "|", "00000000", "D8", "00", "0", "Off", "|", "N", "A", "|", "|", "34", "%", "39C", "P0", "1W", "215W", "|", "0MiB", "7982MiB", "|", "0", "%", "Default", "|", "+-------------------------------+----------------------+----------------------+", "+-----------------------------------------------------------------------------+", "|", "Processes", "GPU", "Memory", "|", "|", "GPU", "PID", "Type", "Process", "name", "Usage", "|", "|=============================================================================|", "|", "0", "Not", "Supported", "|", "+-----------------------------------------------------------------------------+", "```", "**", "Docker", "container", "information", "**", "Linux", "Ubuntu", "18", "04", "TensorFlow", "installed", "pip3", "TensorFlow", "version", "1", "14", "0", "Python", "version", "3", "6", "9", "CUDA", "cuDNN", "version", "GPU", "model", "memory", "nvidia", "smi", "output", "(", "see", ")", "Dockerfile", "```", "#", "https", "://", "www", "tensorflow", "org", "install", "gpu", "FROM", "nvidia", "cuda", "10", "0", "base", "ubuntu18", "04", "ENV", "PATH", "=/", "bin", ":/", "usr", "local", "sbin", ":/", "usr", "local", "bin", ":/", "usr", "sbin", ":/", "usr", "bin", ":/", "opt", "conda", "bin", ":$", "PATH", "RUN", "apt", "get", "update", "&&", "apt", "get", "upgrade", "&&", "apt", "get", "install", "\\", "nodejs", "\\", "npm", "\\", "python3", "pip", "\\", "wget", "\\", "libmysqlclient", "dev", "\\", "python", "dev", "#", "RUN", "wget", "nv", "https", "://", "repo", "anaconda", "com", "miniconda", "Miniconda3", "latest", "Linux", "x86_64", "sh", "&&", "bash", "Miniconda3", "latest", "Linux", "x86_64", "sh", "b", "p", "opt", "conda", "&&", "rm", "Miniconda3", "latest", "Lin", "$", "RUN", "mkdir", "etc", "skel", "notebooks", "RUN", "npm", "install", "g", "configurable", "http", "proxy", "&&", "pip3", "install", "\\", "jupyterhub", "\\", "jupyterhub", "ldapauthenticator", "\\", "jupyterlab", "\\", "notebook", "\\", "tensorflow", "gpu", "RUN", "pip3", "install", "\\", "folium", "\\", "keras", "\\", "matplotlib", "\\", "mysql", "\\", "mysql", "connector", "\\", "pandas", "\\", "pymysql", "\\", "seaborn", "\\", "sklearn", "VOLUME", "[\"/", "home", "\"]", "RUN", "useradd", "ms", "bin", "bash", "user", "p", "\"$(", "openssl", "passwd", "1", "test", ")\"", "COPY", "./", "jupyterhub_config", "py", "etc", "jupyterhub", "jupyterhub_config", "py", "COPY", "./", "jupyterhub_cookie_secret", "etc", "jupyterhub", "jupyterhub_cookie_secret", "COPY", "./", "jupyterhub", "sqlite", "etc", "jupyterhub", "jupyterhub", "sqlite", "#", "CMD", "[\"/", "usr", "local", "bin", "jupyterhub", "\",", "upgrade", "db", "\",", "\"--", "db", "=", "sqlite", ":////", "etc", "jupyterhub", "jupyterhub", "sqlite", "\"]", "EXPOSE", "8000", "CMD", "[\"/", "usr", "local", "bin", "jupyterhub", "\",", "\"-", "f", "\",", "\"/", "etc", "jupyterhub", "jupyterhub_config", "py", "\",", "\"--", "debug", "\"]", "```", "**", "Describe", "problem", "**", "I", "created", "Docker", "container", "based", "Dockerfile", "(", "see", ")", "multiuser", "jupyterhub", "(", "notebook", "lab", ").", "The", "basics", "works", "fine", "I", "log", "use", "desired", "python", "packages", "running", "projects", "However", "container", "lacks", "GPU", "capabiltites", "container", "started", "`$", "nvidia", "docker", "run", "p", "8000", "8000", "--", "runtime", "=", "nvidia", "--", "restart", "unless", "stopped", "--", "gpus", "v", "~/", "myDocker", "home", ":/", "home", "jupyterhub", "`", "`", "nvidia", "smi", "`", "works", "within", "container", "`", "device_lib", "list_local_devices", "()`", "prints", "```[", "name", "\"/", "device", "CPU", "0", "device_type", "CPU", "memory_limit", "268435456", "locality", "{", "}", "incarnation", "9710542890831123693", "name", "\"/", "device", "XLA_GPU", "0", "device_type", "XLA_GPU", "memory_limit", "17179869184", "locality", "{", "}", "incarnation", "12724683280898329209", "physical_device_desc", "device", "XLA_GPU", "device", "name", "\"/", "device", "XLA_GPU", "1", "device_type", "XLA_GPU", "memory_limit", "17179869184", "locality", "{", "}", "incarnation", "12608392157467121046", "physical_device_desc", "device", "XLA_GPU", "device", "name", "\"/", "device", "XLA_CPU", "0", "device_type", "XLA_CPU", "memory_limit", "17179869184", "locality", "{", "}", "incarnation", "16188673672643731433", "physical_device_desc", "device", "XLA_CPU", "device", "]", "```", "`", "keras", "import", "backend", "K", "K", "tensorflow_backend", "_get_available_gpus", "()`", "prints", "empty", "field", "`", "tf", "test", "is_gpu_available", "()`", "says", "`", "False", "`", "I", "see", "tensorflow", "looking", "following", "ones", "cannot", "find", "libcublas", "10", "0", "libcufft", "10", "0", "libcurand", "10", "0", "libcusolver", "10", "0", "libcusparse", "10", "0", "libcudnn", "7", "It", "strange", "I", "never", "installed", "nvidia", "smi", "within", "container", "I", "seems", "deployed", "docker", "necessary", "parts", "missing", "tensorflow", "However", "I", "install", "CUDA", "nvidia", "toolkits", "software", "parts", "container", "tensorflow", "reporting", "incorpatible", "versions", "```", "2020", "01", "01", "20", "50", "11", "429852", "I", "tensorflow", "core", "platform", "cpu_feature_guard", "cc", "142", "]", "Your", "CPU", "supports", "instructions", "TensorFlow", "binary", "compiled", "use", "AVX2", "AVX512F", "FMA", "2020", "01", "01", "20", "50", "11", "466847", "I", "tensorflow", "stream_executor", "platform", "default", "dso_loader", "cc", "42", "]", "Successfully", "opened", "dynamic", "library", "libcuda", "1", "2020", "01", "01", "20", "50", "11", "468037", "E", "tensorflow", "stream_executor", "cuda", "cuda_driver", "cc", "318", "]", "failed", "call", "cuInit", "CUDA_ERROR_SYSTEM_DRIVER_MISMATCH", "system", "unsupported", "display", "driver", "cuda", "driver", "combination", "2020", "01", "01", "20", "50", "11", "468085", "I", "tensorflow", "stream_executor", "cuda", "cuda_diagnostics", "cc", "169", "]", "retrieving", "CUDA", "diagnostic", "information", "host", "9f9f93453aee", "2020", "01", "01", "20", "50", "11", "468093", "I", "tensorflow", "stream_executor", "cuda", "cuda_diagnostics", "cc", "176", "]", "hostname", "9f9f93453aee", "2020", "01", "01", "20", "50", "11", "468236", "I", "tensorflow", "stream_executor", "cuda", "cuda_diagnostics", "cc", "200", "]", "libcuda", "reported", "version", "440", "33", "1", "2020", "01", "01", "20", "50", "11", "468265", "I", "tensorflow", "stream_executor", "cuda", "cuda_diagnostics", "cc", "204", "]", "kernel", "reported", "version", "430", "64", "0", "2020", "01", "01", "20", "50", "11", "468285", "E", "tensorflow", "stream_executor", "cuda", "cuda_diagnostics", "cc", "313", "]", "kernel", "version", "430", "64", "0", "match", "DSO", "version", "440", "33", "1", "--", "cannot", "find", "working", "devices", "configuration", "2020", "01", "01", "20", "50", "11", "489100", "I", "tensorflow", "core", "platform", "profile_utils", "cpu_utils", "cc", "94", "]", "CPU", "Frequency", "2100000000", "Hz", "2020", "01", "01", "20", "50", "11", "493082", "I", "tensorflow", "compiler", "xla", "service", "service", "cc", "168", "]", "XLA", "service", "0x4c12f30", "executing", "computations", "platform", "Host", "Devices", "2020", "01", "01", "20", "50", "11", "493143", "I", "tensorflow", "compiler", "xla", "service", "service", "cc", "175", "]", "StreamExecutor", "device", "(", "0", "):", "<", "undefined", ">,", "<", "undefined", ">", "```", "I", "think", "tensorflow", "issue", "It", "moreover", "question", "create", "docker", "container", "tensorflow", "gpu", "CUDA", "support", "Is", "docker", "base", "image", "right", "one", "<", "em", ">", "Please", "make", "sure", "bug", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "bug_template", "</", "em", ">", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "yes", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Linux", "Ubuntu", "18", "04", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "NA", "TensorFlow", "installed", "(", "source", "binary", "):", "binary", "wheel", "via", "PyPI", "TensorFlow", "version", "(", "use", "command", "):", "2", "1", "0", "dev20191231", "(", "v1", "12", "1", "21412", "g3a094e6", "2", "1", "0", "dev20191231", ")", "Python", "version", "Bazel", "version", "(", "compiling", "source", "):", "NA", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "NA", "CUDA", "cuDNN", "version", "CUDA", "10", "0", "GPU", "model", "memory", "V100", "32", "GB", "You", "collect", "information", "using", "environment", "capture", "[", "script", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "tree", "master", "tools", "tf_env_collect", "sh", ")", "You", "also", "obtain", "TensorFlow", "version", "1", "TF", "1", "0", "`", "python", "c", "import", "tensorflow", "tf", ";", "print", "(", "tf", "GIT_VERSION", "tf", "VERSION", ")\"`", "2", "TF", "2", "0", "`", "python", "c", "import", "tensorflow", "tf", ";", "print", "(", "tf", "version", "GIT_VERSION", "tf", "version", "VERSION", ")\"`", "**", "Describe", "current", "behavior", "**", "I", "suspecting", "CPU", "memory", "leak", "loading", "multiple", "models", "When", "im", "running", "infinite", "loop", "keeps", "loading", "model", "using", "variable", "memory", "(", "private", "bytes", "working", "set", ")", "process", "keep", "increasing", "At", "points", "working", "set", "seems", "free", "memory", "trend", "memory", "keeps", "rising", "I", "used", "simple", "model", "(", "attached", ").", "This", "trend", "happens", "even", "though", "I", "call", "gc", "collect", "()", "every", "iteration", "tf", "keras", "backend", "clear_session", "().", "issue", "also", "happens", "TF", "2", "0", "(", "v2", "0", "0", "rc2", "26", "g64c3d38", "2", "0", "0", ").", "specific", "model", "running", "TF", "2", "0", "iteration", "adds", "16", "MiB", "running", "TF", "2", "1", "iteration", "adds", "2", "MiB", "**", "Describe", "expected", "behavior", "**", "The", "memory", "shouldnt", "increase", "interation", "**", "Code", "reproduce", "issue", "**", "`", "```", "import", "os", "import", "tensorflow", "tf", "import", "gc", "#", "garbage", "collector", "import", "objgraph", "memory_profiler", "import", "profile", "def", "mem_stat", "():", "objs", "=", "gc", "get_objects", "()", "print", "(\"", "total", "objects", "count", "\",", "len", "(", "objs", "))", "profile", "def", "profile_own_model", "():", "model", "=", "tf", "keras", "models", "Sequential", "([", "tf", "keras", "layers", "Flatten", "(", "input_shape", "=(", "28", "28", ")),", "tf", "keras", "layers", "Dense", "(", "128", "activation", "='", "relu", "'),", "tf", "keras", "layers", "Dropout", "(", "0", "2", "),", "tf", "keras", "layers", "Dense", "(", "10", "activation", "='", "softmax", "')", "])", "#", "model", "save", "('", "my_model", "')", "tf", "keras", "backend", "clear_session", "()", "del", "model", "gc", "collect", "()", "profile", "def", "profile_load_model", "(", "path", "):", "model", "=", "tf", "keras", "models", "load_model", "(", "model_path", "compile", "=", "False", ")", "tf", "keras", "backend", "clear_session", "()", "del", "model", "gc", "collect", "()", "model_path", "=", "f", "'/", "my_model", "hd5", "print", "(\"", "load", "model", "loops", ":\")", "c", "=", "1", "True", "print", "(\"-----------", "iter", "\",", "c", ")", "profile_load_model", "(", "model_path", ")", "print", "(\"", "mem", "stat", "model", "creation", ":\")", "mem_stat", "()", "objgraph", "show_growth", "(", "limit", "=", "30", ")", "c", "+=", "1", "```", "`", "**", "Other", "info", "logs", "**", "[", "memory", "tf", "2", "1", "](", "https", "://", "user", "images", "githubusercontent", "com", "27951762", "71644038", "d9f5c500", "2cca", "11ea", "96e3", "b8aedd2e4efb", "png", ")", "Include", "logs", "source", "code", "would", "helpful", "diagnose", "problem", "If", "including", "tracebacks", "please", "include", "full", "traceback", "Large", "logs", "files", "attached", "function", "`", "files_io", "get_matching_files", "`", "says", "takes", "filepath", "\",", "actually", "takes", "glob", "means", "save", "checkpoints", "folder", "like", "`", "x", "=[", "abc", "]`,", "load", "previous", "checkpoint", "using", "something", "like", "```", "def", "load_checkpoint", "(", "sess", "checkpoint_path", "):", "saver", "=", "tf", "train", "Saver", "(", "tf", "global_variables", "())", "ckpt", "=", "tf", "train", "get_checkpoint_state", "(", "checkpoint_path", ")", "tf", "logging", "info", "('", "Loading", "model", "%", "',", "ckpt", "model_checkpoint_path", ")", "saver", "restore", "(", "sess", "ckpt", "model_checkpoint_path", ")", "```", "`", "checkpoint_path", "=\"./", "logs", "x", "=[", "abc", "]\"`.", "Incompatible", "flag", "--", "incompatible_no_implicit_file_export", "enabled", "default", "future", "Bazel", "release", "[", "1", "],", "thus", "breaking", "TensorFlow", "The", "flag", "documented", "https", "://", "github", "com", "bazelbuild", "bazel", "issues", "10225", "Please", "check", "following", "CI", "builds", "build", "test", "results", "<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "361", "#", "3e0dba20", "d84a", "4394", "bbe8", "4155855f8aa5", "target", "=\"", "_blank", "\"><", "img", "src", "=\"", "https", "://", "raw", "githubusercontent", "com", "buildkite", "emojis", "master", "img", "buildkite", "64", "mac", "png", "height", "=\"", "16", "\"/>", "macOS", "OpenJDK", "8", "</", ">", "<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "361", "#", "8067be5e", "7d21", "4333", "a4e1", "6e2817d456d4", "target", "=\"", "_blank", "\"><", "img", "src", "=\"", "https", "://", "raw", "githubusercontent", "com", "buildkite", "emojis", "master", "img", "buildkite", "64", "ubuntu", "png", "height", "=\"", "16", "\"/>", "Ubuntu", "18", "04", "OpenJDK", "11", "</", ">", "<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "361", "#", "5664296d", "5125", "45bc", "a16b", "80fb8b5b94f1", "target", "=\"", "_blank", "\"><", "img", "src", "=\"", "https", "://", "raw", "githubusercontent", "com", "buildkite", "emojis", "master", "img", "buildkite", "64", "windows", "png", "height", "=\"", "16", "\"/>", "Windows", "OpenJDK", "8", "</", ">", "Never", "heard", "incompatible", "flags", "We", "[", "documentation", "](", "https", "://", "docs", "bazel", "build", "versions", "master", "backward", "compatibility", "html", ")", "explains", "everything", "If", "want", "receive", "future", "issues", "TensorFlow", "questions", "please", "file", "issue", "https", "://", "github", "com", "bazelbuild", "continuous", "integration", "**", "Important", "**:", "Please", "NOT", "modify", "issue", "title", "since", "might", "break", "tools", "[", "1", "]", "The", "target", "release", "determined", "yet", "Our", "tool", "update", "issue", "title", "flag", "flip", "scheduled", "**", "System", "information", "**", "windows", "TensorFlow", "installed", "conda", "TensorFlow", "version", "2", "0", "Python", "version", "3", "7", "4", "CUDA", "cuDNN", "version", "10", "2", "7", "6", "GPU", "model", "memory", "2", "nvidia", "rtx", "2070s", "8GB", "**", "Describe", "current", "behavior", "**", "follow", "distributed", "training", "tutorials", "change", "code", "(", "custom", "model", ")", "cumtom", "training", "loop", "run", "script", "shows", "mistake", "ValueError", "Flattening", "PerReplica", "components", "supported", "replica", "context", ".\".", "understande", "happens", "run", "train", "step", "run", "test", "step", "**", "Describe", "expected", "behavior", "**", "**", "Code", "reproduce", "issue", "**", "Provide", "reproducible", "test", "case", "bare", "minimum", "necessary", "generate", "problem", "```", "#", "use", "strategy", "make", "mistake", "#", "strategy", "=", "tf", "distribute", "MirroredStrategy", "(", "#", "cross_device_ops", "=", "tf", "distribute", "HierarchicalCopyAllReduce", "())", "strategy", "=", "tf", "distribute", "MirroredStrategy", "(", "cross_device_ops", "=", "tf", "distribute", "ReductionToOneDevice", "(\"/", "device", "CPU", "0", "\"))", "def", "train_step_fn", "(", "rgb", "spec", "):", "tf", "GradientTape", "()", "tape", "fake_spec", "=", "model", "(", "rgb", "training", "=", "True", ")", "loss", "=", "compute_loss", "(", "spec", "fake_spec", ")", "gradients", "=", "tape", "gradient", "(", "loss", "model", "trainable_variables", ")", "opt", "apply_gradients", "(", "zip", "(", "gradients", "model", "trainable_variables", "))", "#", "update", "metrics", "rmse1", "update_state", "(", "spec", "fake_spec", ")", "rmse2", "update_state", "(", "spec", "fake_spec", ")", "rrmse1", "update_state", "(", "spec", "fake_spec", ")", "rrmse2", "update_state", "(", "spec", "fake_spec", ")", "sam", "update_state", "(", "spec", "fake_spec", ")", "return", "loss", "def", "test_step_fn", "(", "rgb", "sepc", "):", "fake_spec", "=", "model", "(", "rgb", "training", "=", "False", ")", "loss", "=", "loss_object", "(", "spec", "fake_spec", ")", "#", "update", "metrics", "rmse1", "update_state", "(", "spec", "fake_spec", ")", "rmse2", "update_state", "(", "spec", "fake_spec", ")", "rrmse1", "update_state", "(", "spec", "fake_spec", ")", "rrmse2", "update_state", "(", "spec", "fake_spec", ")", "sam", "update_state", "(", "spec", "fake_spec", ")", "return", "loss", "tf", "function", "def", "distributed_train_step", "(", "rgb", "spec", "):", "per_replica_losses", "=", "strategy", "experimental_run_v2", "(", "train_step_fn", "args", "=(", "rgb", "spec", "))", "return", "strategy", "reduce", "(", "tf", "distribute", "ReduceOp", "SUM", "per_replica_losses", "axis", "=", "None", ")", "tf", "function", "def", "distributed_test_step", "(", "rgb", "spec", "):", "return", "strategy", "experimental_run_v2", "(", "test_step_fn", "args", "=(", "rgb", "spec", "))", "epoch", "range", "(", "parser", "epochs", "):", "#", "train", "step", "(", "rgb", "spec", ")", "enumerate", "(", "datas", "[", "0", "]):", "train_mean_loss", "=", "distributed_train_step", "(", "rgb", "spec", ")", "steps", "+=", "1", "ckpt", "steps", "assign", "(", "steps", ")", "step", "==", "50", "break", "#", "val", "rmse1", "reset_state", "()", "rmse2", "reset_state", "()", "rrmse1", "reset_state", "()", "rrmse2", "reset_state", "()", "sam", "reset_state", "()", "step", "(", "rgb", "spec", ")", "enumerate", "(", "datas", "[", "1", "]):", "test_mean_loss", "=", "distributed_test_step", "(", "rgb", "spec", ")", "```", "**", "Other", "info", "logs", "**", "```", "ValueError", "converted", "code", "mytrainT", "py", "163", "distributed_test_step", "return", "strategy", "experimental_run_v2", "(", "test_step_fn", "args", "=(", "rgb", "spec", "))", "C", ":\\", "Users", "\\", "zhangstation", "\\", "Anaconda3", "\\", "envs", "\\", "tf", "\\", "lib", "\\", "site", "packages", "\\", "tensorflow_core", "\\", "python", "\\", "distribute", "\\", "distribute_lib", "py", "760", "experimental_run_v2", "return", "self", "_extended", "call_for_each_replica", "(", "fn", "args", "=", "args", "kwargs", "=", "kwargs", ")", "mytrainT", "py", "144", "test_step_fn", "loss", "=", "loss_object", "(", "spec", "fake_spec", ")", "C", ":\\", "Users", "\\", "zhangstation", "\\", "Anaconda3", "\\", "envs", "\\", "tf", "\\", "lib", "\\", "site", "packages", "\\", "tensorflow_core", "\\", "python", "\\", "keras", "\\", "losses", "py", "125", "__call__", "K", "name_scope", "(", "scope_name", "self", "__class__", "__name__", "),", "graph_ctx", "C", ":\\", "Users", "\\", "zhangstation", "\\", "Anaconda3", "\\", "envs", "\\", "tf", "\\", "lib", "\\", "contextlib", "py", "112", "__enter__", "return", "next", "(", "self", "gen", ")", "C", ":\\", "Users", "\\", "zhangstation", "\\", "Anaconda3", "\\", "envs", "\\", "tf", "\\", "lib", "\\", "site", "packages", "\\", "tensorflow_core", "\\", "python", "\\", "keras", "\\", "utils", "\\", "tf_utils", "py", "435", "graph_context_for_symbolic_tensors", "(", "is_symbolic_tensor", "(", "v", ")", "v", "list", "(", "args", ")", "list", "(", "kwargs", "values", "())):", "C", ":\\", "Users", "\\", "zhangstation", "\\", "Anaconda3", "\\", "envs", "\\", "tf", "\\", "lib", "\\", "site", "packages", "\\", "tensorflow_core", "\\", "python", "\\", "keras", "\\", "utils", "\\", "tf_utils", "py", "435", "<", "genexpr", ">", "(", "is_symbolic_tensor", "(", "v", ")", "v", "list", "(", "args", ")", "list", "(", "kwargs", "values", "())):", "C", ":\\", "Users", "\\", "zhangstation", "\\", "Anaconda3", "\\", "envs", "\\", "tf", "\\", "lib", "\\", "site", "packages", "\\", "tensorflow_core", "\\", "python", "\\", "keras", "\\", "utils", "\\", "tf_utils", "py", "345", "is_symbolic_tensor", "return", "tensor", "_is_graph_tensor", "#", "pylint", "disable", "=", "protected", "access", "C", ":\\", "Users", "\\", "zhangstation", "\\", "Anaconda3", "\\", "envs", "\\", "tf", "\\", "lib", "\\", "site", "packages", "\\", "tensorflow_core", "\\", "python", "\\", "framework", "\\", "composite_tensor", "py", "119", "_is_graph_tensor", "components", "=", "self", "_type_spec", "_to_components", "(", "self", ")", "#", "pylint", "disable", "=", "protected", "access", "C", ":\\", "Users", "\\", "zhangstation", "\\", "Anaconda3", "\\", "envs", "\\", "tf", "\\", "lib", "\\", "site", "packages", "\\", "tensorflow_core", "\\", "python", "\\", "distribute", "\\", "values", "py", "500", "_to_components", "Flattening", "PerReplica", "components", "supported", "replica", "ValueError", "Flattening", "PerReplica", "components", "supported", "replica", "context", "```", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "yes", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Ubuntu", "18", "04", "3", "LTS", "TensorFlow", "installed", "(", "source", "binary", "):", "binary", "TensorFlow", "version", "(", "use", "command", "):", "v2", "1", "0", "rc0", "47", "g064e153", "2", "1", "0", "rc1", "(`", "python3", "c", "import", "tensorflow", "tf", ";", "print", "(", "tf", "version", "GIT_VERSION", "tf", "version", "VERSION", ")\"`)", "Python", "version", "Python", "3", "6", "8", "CUDA", "cuDNN", "version", "Driver", "Version", "440", "33", "01", "CUDA", "Version", "10", "2", "cuDNN", "7", "6", "2", "GPU", "model", "memory", "Tesla", "V100", "SXM2", "16GB", "**", "Describe", "current", "behavior", "**", "Compiling", "autograph", "function", "4", "5x", "slower", "Distributed", "Mirrored", "Strategy", "Single", "GPU", "Distributed", "Mirrored", "Strategy", "5", "minutes", "Multi", "GPU", "Distributed", "Mirrored", "Strategy", "30", "minutes", "The", "tensorflow", "code", "identical", "setups", "**", "Describe", "expected", "behavior", "**", "Autograph", "compilation", "take", "roughly", "time", "single", "multi", "GPU", "Distributed", "Mode", "Mirrored", "Strategy", "**", "Code", "reproduce", "issue", "**", "Training", "loop", "(", "hierarchical", "VAE", "current", "configuration", "):", "https", "://", "github", "com", "olegmyrk", "SPADE", "Tensorflow", "blob", "4681ac60f2078144d55178f23fa885d3ed191450", "SPADE", "py", "#", "L1151", "The", "code", "adapted", "TF1", "x", "repository", "https", "://", "github", "com", "olegmyrk", "SPADE", "Tensorflow", "blob", "8866a0b1457cbd4be5d6f549f9bf4075d49b2486", "SPADE", "py", "#", "L1045", "compiled", "using", "TF2", "x", "tf", "function", "annotation", "It", "uses", "dry", "run", "model", "pre", "create", "variables", "using", "tf", "compat", "v1", "variable_scope", "(", "scope", "reuse", "=", "tf", "compat", "v1", "AUTO_REUSE", "):", "https", "://", "github", "com", "olegmyrk", "SPADE", "Tensorflow", "blob", "4681ac60f2078144d55178f23fa885d3ed191450", "SPADE", "py", "#", "L1174", "(", "takes", "10", "minutes", "compile", "run", "multi", "gpu", "mode", ")", "Then", "runs", "actual", "training", "step", "(", ")", "https", "://", "github", "com", "olegmyrk", "SPADE", "Tensorflow", "blob", "4681ac60f2078144d55178f23fa885d3ed191450", "SPADE", "py", "#", "L1257", "(", "takes", "20", "minutes", "compile", "run", "first", "time", "multi", "gpu", "mode", ")", "It", "looks", "disabling", "lines", "optim", "apply_gradients", "https", "://", "github", "com", "olegmyrk", "SPADE", "Tensorflow", "blob", "4681ac60f2078144d55178f23fa885d3ed191450", "SPADE", "py", "#", "L1229", "https", "://", "github", "com", "olegmyrk", "SPADE", "Tensorflow", "blob", "4681ac60f2078144d55178f23fa885d3ed191450", "SPADE", "py", "#", "L1231", "https", "://", "github", "com", "olegmyrk", "SPADE", "Tensorflow", "blob", "4681ac60f2078144d55178f23fa885d3ed191450", "SPADE", "py", "#", "L1233", "slashes", "10", "20", "minutes", "needed", "initial", "run", "multi", "gpu", "mode", "Which", "essentially", "compiling", "back", "propagation", "After", "first", "training", "step", "takes", "20", "minutes", "following", "training", "steps", "run", "normal", "speed", "The", "total", "number", "mirrored", "parameters", "around", "500MB", "With", "4", "V100", "GPUs", "training", "step", "around", "5x", "slower", "single", "V100", "GPU", "Command", "NCCL_DEBUG", "=", "INFO", "NCCL_DEBUG_SUBSYS", "=", "ALL", "nohup", "python3", "main", "py", "--", "dataset", "CelebAMask", "HQ", "--", "img_height", "256", "--", "img_width", "256", "--", "ch", "16", "--", "img_ch", "3", "--", "phase", "train", "--", "save_freq", "10000", "--", "batch_size", "12", "--", "gan_type", "hinge", "--", "code_gan_type", "gan", "--", "n_critic", "1", "--", "code_num_layers", "=", "4", "--", "code_dist_num_layers", "=", "0", "--", "augment_flag", "false", "--", "sn", "=", "False", "--", "train_main", "=", "true", "--", "train_nondet", "=", "true", "--", "lr", "0", "0002", "--", "epoch", "=", "50", "--", "decay_epoch", "=", "25", "--", "print_freq", "100", "&>", "train", "CelebAMask", "HQ", "log", "&", "**", "Other", "info", "logs", "**", "[", "train", "CelebAMask", "HQ", "slow_compile", "log", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "files", "3993026", "train", "CelebAMask", "HQ", "slow_compile", "log", ")", "An", "external", "developer", "pointed", "test", "quantized", "fully", "connected", "operation", "passes", "non", "zero", "weight", "offset", "kernel", "int8", "tests", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "tensorflow", "lite", "micro", "kernels", "fully_connected_test", "cc", "#", "L118", "L119", "The", "quantization", "specification", "promises", "int8", "kernels", "always", "receive", "zero", "weight", "offsets", "https", "://", "www", "tensorflow", "org", "lite", "performance", "quantization_spec", "This", "failing", "test", "preventing", "optimized", "kernel", "hardware", "platform", "accepted", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "Yes", "see", "minimal", "example", "OS", "Platform", "Distribution", "Ubuntu", "18", "04", "3", "LTS", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "N", "A", "TensorFlow", "installed", "(", "source", "binary", "):", "binary", "(", "specifically", "`", "tensorflow", "tensorflow", "nightly", "py3", "`", "Docker", "image", ")", "TensorFlow", "version", "(", "use", "command", "):", "2", "1", "0", "dev20191216", "Python", "version", "3", "6", "9", "Bazel", "version", "(", "compiling", "source", "):", "N", "A", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "N", "A", "CUDA", "cuDNN", "version", "N", "A", "GPU", "model", "memory", "N", "A", "**", "Describe", "current", "behavior", "**", "A", "multi", "output", "Keras", "model", "compiled", "one", "output", "loss", "function", "raises", "exception", "calling", "`.", "fit", "`.", "**", "Describe", "expected", "behavior", "**", "Training", "minimise", "losses", "defined", "output", "(", ").", "**", "Code", "reproduce", "issue", "**", "```", "import", "numpy", "np", "import", "tensorflow", "tf", "import", "tensorflow", "keras", "keras", "input_a", "=", "keras", "layers", "Input", "(", "shape", "=(", "10", ",),", "name", "=\"", "input_a", "\")", "input_b", "=", "keras", "layers", "Input", "(", "shape", "=(", "20", ",),", "name", "=\"", "input_b", "\")", "output_a", "=", "keras", "layers", "Dense", "(", "1", "name", "=\"", "output_a", "\")(", "input_a", ")", "output_b", "=", "keras", "layers", "Dense", "(", "1", "name", "=\"", "output_b", "\")(", "input_b", ")", "model", "=", "keras", "Model", "(", "inputs", "=[", "input_a", "input_b", "],", "outputs", "=[", "output_a", "output_b", "])", "model", "compile", "(", "optimizer", "=\"", "sgd", "\",", "loss", "={\"", "output_a", "\":", "None", "output_b", "\":", "mse", "\"})", "n", "=", "128", "input_a", "=", "np", "ones", "((", "n", "10", "))", "input_b", "=", "np", "ones", "((", "n", "20", "))", "output_a", "=", "np", "ones", "((", "n", "1", "))", "output_b", "=", "np", "ones", "((", "n", "1", "))", "dataset", "=", "tf", "data", "Dataset", "from_tensor_slices", "(", "((", "input_a", "input_b", "),", "(", "output_a", "output_b", "))", ").", "batch", "(", "64", ")", "model", "fit", "(", "dataset", ")", "```", "Raises", "```", "ValueError", "Error", "checking", "model", "target", "list", "Numpy", "arrays", "passing", "model", "size", "model", "expected", "Expected", "see", "1", "array", "(", "),", "inputs", "['", "output_b", "']", "instead", "got", "following", "list", "2", "arrays", "[<", "tf", "Tensor", "args_2", "0", "shape", "=(", "None", "1", ")", "dtype", "=", "float64", ">,", "<", "tf", "Tensor", "args_3", "0", "shape", "=(", "None", "1", ")", "dtype", "=", "float64", ">]...", "```", "Incompatible", "flag", "--", "incompatible_disable_target_provider_fields", "break", "TensorFlow", "Bazel", "1", "2", "1", "released", "Please", "see", "following", "CI", "builds", "information", "[:", "darwin", "(", "OpenJDK", "8", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "042f4c72", "2a23", "4d7b", "9d3b", "d78619ea3fc7", "target", "=\"", "_blank", "\">:", "darwin", "(", "OpenJDK", "8", ")</", ">)", "[:", "windows", "(", "OpenJDK", "8", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "65246ccf", "c676", "40de", "b693", "3e1408052faa", "target", "=\"", "_blank", "\">:", "windows", "(", "OpenJDK", "8", ")</", ">)", "[:", "ubuntu", "18", "04", "(", "OpenJDK", "11", ")](<", "href", "=\"", "https", "://", "buildkite", "com", "bazel", "bazelisk", "plus", "incompatible", "flags", "builds", "342", "#", "42574ec2", "097a", "4fa6", "9c82", "5de0093a2ed1", "target", "=\"", "_blank", "\">:", "ubuntu", "18", "04", "(", "OpenJDK", "11", ")</", ">)", "Questions", "Please", "file", "issue", "https", "://", "github", "com", "bazelbuild", "continuous", "integration", "**", "Important", "**:", "Please", "NOT", "modify", "issue", "title", "since", "might", "break", "tools", "tensorflow", "micro", "**", "System", "information", "**", "macOS", "10", "15", "Catalina", "TensorFlow", "installed", "source", "Tensorflow", "version", "(", "commit", "SHA", "source", "):", "2ba0b2ef68d4259e8b02fa8be77a9372020b81b7", "(", "Dec", "16", ")", "Target", "platform", "(", "e", "g", "Arm", "Mbed", "OS", "Arduino", "Nano", "33", "etc", "):", "bluepill", "**", "Describe", "problem", "**", "```", "arm", "none", "eabi", "g", "++", "O3", "DNDEBUG", "std", "=", "c", "++", "11", "g", "DTF_LITE_STATIC_MEMORY", "fno", "rtti", "DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK", "DTF_LITE_STATIC_MEMORY", "DTF_LITE_MCU_DEBUG_LOG", "fno", "rtti", "fmessage", "length", "=", "0", "fno", "exceptions", "fno", "unwind", "tables", "fno", "builtin", "ffunction", "sections", "fdata", "sections", "funsigned", "char", "MMD", "mcpu", "=", "cortex", "m3", "mthumb", "std", "=", "gnu", "++", "11", "Wvla", "Wall", "Wextra", "Wno", "unused", "parameter", "Wno", "missing", "field", "initializers", "Wno", "write", "strings", "Wno", "sign", "compare", "fno", "delete", "null", "pointer", "checks", "fomit", "frame", "pointer", "fpermissive", "nostdlib", "g", "Os", "I", "Itensorflow", "lite", "micro", "tools", "make", "downloads", "Itensorflow", "lite", "micro", "tools", "make", "downloads", "gemmlowp", "Itensorflow", "lite", "micro", "tools", "make", "downloads", "flatbuffers", "include", "isystemtensorflow", "lite", "micro", "tools", "make", "downloads", "cmsis", "CMSIS", "Core", "Include", "Itensorflow", "lite", "micro", "tools", "make", "downloads", "stm32_bare_lib", "include", "Itensorflow", "lite", "micro", "tools", "make", "downloads", "kissfft", "tensorflow", "lite", "micro", "tools", "make", "gen", "bluepill_cortex", "m3", "bin", "hello_world", "tensorflow", "lite", "micro", "tools", "make", "gen", "bluepill_cortex", "m3", "obj", "tensorflow", "lite", "micro", "examples", "hello_world", "main", "tensorflow", "lite", "micro", "tools", "make", "gen", "bluepill_cortex", "m3", "obj", "tensorflow", "lite", "micro", "examples", "hello_world", "main_functions", "tensorflow", "lite", "micro", "tools", "make", "gen", "bluepill_cortex", "m3", "obj", "tensorflow", "lite", "micro", "examples", "hello_world", "sine_model_data", "tensorflow", "lite", "micro", "tools", "make", "gen", "bluepill_cortex", "m3", "obj", "tensorflow", "lite", "micro", "examples", "hello_world", "output_handler", "tensorflow", "lite", "micro", "tools", "make", "gen", "bluepill_cortex", "m3", "obj", "tensorflow", "lite", "micro", "examples", "hello_world", "constants", "tensorflow", "lite", "micro", "tools", "make", "gen", "bluepill_cortex", "m3", "lib", "libtensorflow", "microlite", "T", "tensorflow", "lite", "micro", "tools", "make", "targets", "bluepill", "bluepill", "lds", "Wl", ",-", "Map", "=", "tensorflow", "lite", "micro", "tools", "make", "gen", "bluepill", "map", ",--", "cref", "Wl", ",--", "gc", "sections", "lm", "tensorflow", "lite", "micro", "tools", "make", "gen", "bluepill_cortex", "m3", "obj", "tensorflow", "lite", "micro", "examples", "hello_world", "main_functions", "In", "function", "`", "setup", "()':", "Users", "pinxue", "projects", "rt", "thread", "ai", "tensorflow", "tensorflow", "lite", "micro", "examples", "hello_world", "main_functions", "cc", "47", "undefined", "reference", "`", "__cxa_guard_acquire", "Users", "pinxue", "projects", "rt", "thread", "ai", "tensorflow", "tensorflow", "lite", "micro", "examples", "hello_world", "main_functions", "cc", "47", "undefined", "reference", "`", "__cxa_guard_release", "Users", "pinxue", "projects", "rt", "thread", "ai", "tensorflow", "tensorflow", "lite", "micro", "examples", "hello_world", "main_functions", "cc", "63", "undefined", "reference", "`", "__cxa_guard_acquire", "Users", "pinxue", "projects", "rt", "thread", "ai", "tensorflow", "tensorflow", "lite", "micro", "examples", "hello_world", "main_functions", "cc", "63", "undefined", "reference", "`", "__cxa_guard_release", "Users", "pinxue", "projects", "rt", "thread", "ai", "tensorflow", "tensorflow", "lite", "micro", "examples", "hello_world", "main_functions", "cc", "67", "undefined", "reference", "`", "__cxa_guard_acquire", "Users", "pinxue", "projects", "rt", "thread", "ai", "tensorflow", "tensorflow", "lite", "micro", "examples", "hello_world", "main_functions", "cc", "67", "undefined", "reference", "`", "__cxa_guard_release", "Users", "pinxue", "projects", "rt", "thread", "ai", "tensorflow", "tensorflow", "lite", "micro", "examples", "hello_world", "main_functions", "cc", "83", "undefined", "reference", "`", "__dso_handle", "tensorflow", "lite", "micro", "tools", "make", "gen", "bluepill_cortex", "m3", "lib", "libtensorflow", "microlite", "(", "greedy_memory_planner", "):", "In", "function", "`", "tflite", "::", "GreedyMemoryPlanner", "::~", "GreedyMemoryPlanner", "()':", "Users", "pinxue", "projects", "rt", "thread", "ai", "tensorflow", "tensorflow", "lite", "micro", "memory_planner", "greedy_memory_planner", "cc", "70", "undefined", "reference", "`", "operator", "delete", "(", "void", "*)'", "`", "__lock___atexit_recursive_mutex", "referenced", "section", "`.", "data", "__atexit_recursive_mutex", "Users", "pinxue", "projects", "rt", "thread", "ai", "tensorflow", "tensorflow", "lite", "micro", "tools", "make", "downloads", "gcc_embedded", "bin", "/../", "lib", "gcc", "arm", "none", "eabi", "7", "3", "1", "/../../../../", "arm", "none", "eabi", "lib", "thumb", "v7", "libc", "(", "lib_a", "__call_atexit", "):", "defined", "discarded", "section", "`", "COMMON", "Users", "pinxue", "projects", "rt", "thread", "ai", "tensorflow", "tensorflow", "lite", "micro", "tools", "make", "downloads", "gcc_embedded", "bin", "/../", "lib", "gcc", "arm", "none", "eabi", "7", "3", "1", "/../../../../", "arm", "none", "eabi", "lib", "thumb", "v7", "libc", "(", "lib_a", "lock", ")", "Users", "pinxue", "projects", "rt", "thread", "ai", "tensorflow", "tensorflow", "lite", "micro", "tools", "make", "downloads", "gcc_embedded", "bin", "/../", "lib", "gcc", "arm", "none", "eabi", "7", "3", "1", "/../../../../", "arm", "none", "eabi", "bin", "ld", "tensorflow", "lite", "micro", "tools", "make", "gen", "bluepill_cortex", "m3", "bin", "hello_world", "hidden", "symbol", "`", "__dso_handle", "defined", "Users", "pinxue", "projects", "rt", "thread", "ai", "tensorflow", "tensorflow", "lite", "micro", "tools", "make", "downloads", "gcc_embedded", "bin", "/../", "lib", "gcc", "arm", "none", "eabi", "7", "3", "1", "/../../../../", "arm", "none", "eabi", "bin", "ld", "final", "link", "failed", "Bad", "value", "collect2", "error", "ld", "returned", "1", "exit", "status", "gmake", "***", "[", "tensorflow", "lite", "micro", "examples", "hello_world", "Makefile", "inc", "42", "tensorflow", "lite", "micro", "tools", "make", "gen", "bluepill_cortex", "m3", "bin", "hello_world", "]", "Error", "1", "```", "**", "Please", "provide", "exact", "sequence", "commands", "steps", "ran", "problem", "**", "```", "$", "opt", "local", "bin", "gmake", "j1", "f", "tensorflow", "lite", "micro", "tools", "make", "Makefile", "TARGET", "=", "bluepill", "hello_world", "```", "Add", "TfLite", "micro", "Squeeze", "reference", "kernel", "tests", "(", "uint8", "int8", "float32", ").", "Signed", "SiCongLi", "<", "sicong", "li", "arm", "com", ">", "**", "System", "information", "**", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Ubuntu", "18", "04", "TensorFlow", "installed", "pip", "TensorFlow", "version", "(", "use", "command", "):", "1", "13", "1", "Python", "version", "python3", "7", "CUDA", "cuDNN", "version", "10", "1", "GPU", "model", "memory", "GTX", "1080", "ti", "**", "Describe", "current", "behavior", "**", "Since", "g", "++", "7", "default", "version", "Ubuntu", "18", "distributions", "builds", "use", "`", "_GLIBCXX_USE_CXX11_ABI", "=", "1", "`.", "It", "seems", "also", "tensorflow", "built", "`", "_GLIBCXX_USE_CXX11_ABI", "=", "0", "`,", "implies", "recompiling", "libraries", "project", "flag", "unconvenient", "We", "noticed", "building", "`", "_GLIBCXX_USE_CXX11_ABI", "=", "1", "`", "increases", "RAM", "lot", "**", "Describe", "expected", "behavior", "**", "Both", "packages", "consume", "amount", "RAM", "**", "Code", "reproduce", "issue", "**", "You", "install", "tensorflow", "using", "`", "python3", "7", "pip", "install", "tensorflow", "==", "1", "13", "1", "`", "(", "related", "https", "://", "github", "com", "tensorflow", "tensorflow", "issues", "27078", ")", "makes", "sure", "`", "python3", "7", "c", "import", "tensorflow", ";", "print", "(", "tensorflow", "sysconfig", "get_compile_flags", "())\"`", "prints", "`-", "D_GLIBCXX_USE_CXX11_ABI", "=", "1", "`.", "Then", "install", "python3", "6", "`", "python3", "6", "pip", "install", "tensorflow", "==", "1", "13", "1", "`", "make", "sure", "`", "python3", "6", "c", "import", "tensorflow", ";", "print", "(", "tensorflow", "sysconfig", "get_compile_flags", "())\"`", "prints", "`", "D_GLIBCXX_USE_CXX11_ABI", "=", "0", "`.", "Now", "run", "script", "python3", "6", "python3", "7", "see", "second", "one", "consume", "lot", "(", "x3", "model", "I", "use", ").", "Any", "`", "saved_model", "pb", "`", "work", "```", "python", "import", "io", "import", "os", "import", "sys", "try", "urllib", "import", "urlopen", "except", "ImportError", "urllib", "request", "import", "urlopen", "import", "numpy", "import", "psutil", "PIL", "import", "Image", "import", "tensorflow", "tf", "tensorflow", "core", "protobuf", "import", "saved_model_pb2", "tensorflow", "python", "platform", "import", "gfile", "tensorflow", "python", "util", "import", "compat", "process", "=", "psutil", "Process", "(", "os", "getpid", "())", "def", "print_ram", "(", "prefix", "=''):", "print", "(\"", "RAM", "\",", "prefix", "process", "memory_info", "().", "rss", "1024", "1024", ".)", "__name__", "==", "__main__", "':", "len", "(", "sys", "argv", ")", "==", "1", "model_filename", "=", "saved_model", "pb", "else", "model_filename", "=", "sys", "argv", "[", "1", "]", "gfile", "FastGFile", "(", "model_filename", "rb", "')", "f", "data", "=", "compat", "as_bytes", "(", "f", "read", "())", "sm", "=", "saved_model_pb2", "SavedModel", "()", "sm", "ParseFromString", "(", "data", ")", "1", "!=", "len", "(", "sm", "meta_graphs", "):", "print", "('", "More", "one", "graph", "found", "Not", "sure", "write", "')", "sys", "exit", "(", "1", ")", "img_url", "=", "https", "://", "dailymail", "co", "uk", "1s", "2019", "11", "23", "09", "21370544", "7717313", "image", "1_1574501083030", "jpg", "image_data", "=", "urlopen", "(", "img_url", ").", "read", "()", "decoded_data", "=", "numpy", "array", "(", "Image", "open", "(", "io", "BytesIO", "(", "image_data", ")))", "decoded_data", "=", "numpy", "expand_dims", "(", "decoded_data", "axis", "=", "0", ")", "print_ram", "('", "graph", "import", "')", "graph", "=", "tf", "import_graph_def", "(", "sm", "meta_graphs", "[", "0", "].", "graph_def", ")", "print_ram", "('", "device", "')", "tf", "device", "(\"/", "device", "GPU", "0", "\"):", "tf", "Session", "(", "graph", "=", "graph", "config", "=", "None", ")", "sess", "print_ram", "('", "session", "')", "output", "=", "sess", "graph", "get_tensor_by_name", "('", "import", "predictions", "0", "')", "print_ram", "('", "run", "')", "range", "(", "10000", "):", "results", "=", "sess", "run", "(", "output", "feed_dict", "={\"", "import", "image_tensor", "0", "\":", "decoded_data", "})", "print_ram", "('", "run", "')", "```", "**", "Other", "info", "logs", "**", "python3", "6", "```", "RAM", "graph", "import", "527", "55078125", "RAM", "device", "856", "59375", "2019", "12", "16", "17", "51", "27", "400388", "I", "tensorflow", "core", "platform", "cpu_feature_guard", "cc", "141", "]", "Your", "CPU", "supports", "instructions", "TensorFlow", "binary", "compiled", "use", "AVX2", "FMA", "2019", "12", "16", "17", "51", "27", "425979", "I", "tensorflow", "core", "platform", "profile_utils", "cpu_utils", "cc", "94", "]", "CPU", "Frequency", "3399580000", "Hz", "2019", "12", "16", "17", "51", "27", "426637", "I", "tensorflow", "compiler", "xla", "service", "service", "cc", "150", "]", "XLA", "service", "0x229fee0", "executing", "computations", "platform", "Host", "Devices", "2019", "12", "16", "17", "51", "27", "426655", "I", "tensorflow", "compiler", "xla", "service", "service", "cc", "158", "]", "StreamExecutor", "device", "(", "0", "):", "<", "undefined", ">,", "<", "undefined", ">", "RAM", "session", "860", "25", "RAM", "run", "860", "25", "RAM", "run", "948", "12109375", "RAM", "run", "998", "0", "RAM", "run", "1022", "2265625", "RAM", "run", "1038", "984375", "RAM", "run", "1038", "984375", "RAM", "run", "1056", "0", "RAM", "run", "1092", "1953125", "RAM", "run", "1097", "09375", "RAM", "run", "1097", "09375", "RAM", "run", "1097", "09375", "RAM", "run", "1097", "09375", "RAM", "run", "1097", "09375", "RAM", "run", "1116", "42578125", "RAM", "run", "1116", "42578125", "RAM", "run", "1116", "42578125", "RAM", "run", "1116", "42578125", "RAM", "run", "1116", "42578125", "```", "python3", "7", "```", "RAM", "graph", "import", "510", "33984375", "RAM", "device", "752", "87890625", "2019", "12", "16", "17", "26", "00", "118658", "I", "tensorflow", "core", "platform", "cpu_feature_guard", "cc", "141", "]", "Your", "CPU", "supports", "instructions", "TensorFlow", "binary", "compiled", "use", "AVX2", "FMA", "2019", "12", "16", "17", "26", "00", "141979", "I", "tensorflow", "core", "platform", "profile_utils", "cpu_utils", "cc", "94", "]", "CPU", "Frequency", "3399580000", "Hz", "2019", "12", "16", "17", "26", "00", "142737", "I", "tensorflow", "compiler", "xla", "service", "service", "cc", "150", "]", "XLA", "service", "0x265aff0", "executing", "computations", "platform", "Host", "Devices", "2019", "12", "16", "17", "26", "00", "142775", "I", "tensorflow", "compiler", "xla", "service", "service", "cc", "158", "]", "StreamExecutor", "device", "(", "0", "):", "<", "undefined", ">,", "<", "undefined", ">", "RAM", "session", "756", "5625", "RAM", "run", "756", "5625", "RAM", "run", "2977", "8515625", "RAM", "run", "3030", "1640625", "RAM", "run", "3047", "8046875", "RAM", "run", "3090", "08203125", "RAM", "run", "3121", "296875", "RAM", "run", "3122", "0703125", "RAM", "run", "3123", "1015625", "RAM", "run", "3123", "1015625", "RAM", "run", "3135", "9921875", "```", "It", "looks", "like", "`", "experimental_run_tf_function", "`", "removed", "`", "tf", "keras", "Model", "compile", "`", "commit", "days", "ago", "https", "://", "github", "com", "tensorflow", "tensorflow", "commit", "c73c99ca3e0bacf2bca313f270bb3eae28869530", "#", "diff", "de9b96ac2d81503324cbbbe21732031fR1159", "In", "[", "Horovod", "](", "http", "://", "horovod", "ai", "/),", "flag", "graph", "mode", "necessary", "order", "`", "Optimizer", "get_gradients", "()`", "called", "aggregates", "gradients", "across", "workers", "Since", "flag", "removed", "distributed", "training", "Horovod", "`", "tf", "keras", "`", "working", "nightly", "builds", "Is", "workaround", "achieve", "behavior", "latest", "changes", "master", "Note", "cannot", "perform", "allreduce", "aggregation", "`", "apply_gradients", "`", "due", "interactions", "gradient", "clipping", "loss", "scaling", "(", "see", "https", "://", "github", "com", "horovod", "horovod", "pull", "1347", ").", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "Yes", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Linux", "Ubuntu", "16", "04", "Docker", "TensorFlow", "installed", "(", "source", "binary", "):", "pip", "install", "TensorFlow", "version", "(", "use", "command", "):", "v2", "0", "0", "rc2", "26", "g64c3d38", "Python", "version", "3", "5", "CUDA", "cuDNN", "version", "10", "0", "7", "GPU", "model", "memory", "GTX", "1080Ti", "11175MiB", "**", "Describe", "current", "behavior", "**", "Hi", "authors", "developers", "I", "developing", "project", "tf", "=", "2", "0", "0", "eager_mode", "disable", "The", "main", "reason", "tf", "=", "1", "x", "maintained", "third", "party", "libraries", "ready", "tf", "=", "2", "0", "yet", "I", "got", "bug", "I", "running", "custom", "loss", "keras", "model", "tf", "distribute", "MirroredStrategy", "()", "This", "bug", "reproduced", "following", "minimal", "testcase", "```", "python", "#%%", "distutils", "version", "import", "LooseVersion", "import", "numpy", "np", "import", "tensorflow", "tf", "#", "disable", "eager", "model", "tf", "=", "2", "x", "tf", "compat", "v1", "disable_eager_execution", "()", "batch_size", "=", "100", "img_h", "=", "32", "img_w", "=", "32", "img_min", "=", "0", "img_max", "=", "1", "channels", "=", "3", "num_classes", "=", "10", "strategy", "=", "tf", "distribute", "MirroredStrategy", "()", "#%%", "def", "download_data", "():", "#", "get", "raw", "data", "(", "trainX", "trainY", "),", "(", "testX", "testY", ")", "=", "tf", "keras", "datasets", "cifar10", "load_data", "()", "trainX", "=", "trainX", "astype", "(", "np", "float32", ")", "testX", "=", "testX", "astype", "(", "np", "float32", ")", "#", "ont", "hot", "trainY", "=", "tf", "keras", "utils", "to_categorical", "(", "trainY", "10", ")", "testY", "=", "tf", "keras", "utils", "to_categorical", "(", "testY", "10", ")", "#", "get", "validation", "sets", "training_size", "=", "45000", "validX", "=", "trainX", "[", "training_size", ":,:]", "validY", "=", "trainY", "[", "training_size", ":,:]", "trainX", "=", "trainX", "[:", "training_size", ",:]", "trainY", "=", "trainY", "[:", "training_size", ",:]", "return", "trainX", "trainY", "validX", "validY", "testX", "testY", "#%%", "class", "DataGenerator", "def", "__init__", "(", "self", "sess", "dataX", "dataY", "total_len", "batch_size", "):", "super", "().", "__init__", "()", "self", "total_len", "=", "total_len", "self", "batch_size", "=", "batch_size", "self", "cleanX", "=", "dataX", "self", "totalY", "=", "dataY", "self", "sess", "=", "sess", "self", "on_epoch_end", "()", "def", "__build_pipeline", "(", "self", "dataX", "dataY", "):", "#", "create", "dataset", "API", "def", "preprocess_fn", "(", "dataX", "dataY", "):", "dataX", "=", "tf", "image", "random_flip_left_right", "(", "dataX", ")", "#", "workaround", "solution", "LooseVersion", "(", "tf", "__version__", ")", "<", "LooseVersion", "('", "1", "14", "0", "'):", "outputX", "=", "dataX", "else", "outputX", "=", "(", "dataX", "dataY", ")", "return", "outputX", "dataY", "dataset", "=", "tf", "data", "Dataset", "from_tensor_slices", "(", "(", "dataX", "dataY", ")", ")", "dataset", "=", "dataset", "shuffle", "(", "batch_size", "8", ")", "dataset", "=", "dataset", "repeat", "()", "dataset", "=", "dataset", "batch", "(", "batch_size", ")", "dataset", "=", "dataset", "map", "(", "preprocess_fn", "num_parallel_calls", "=", "tf", "data", "experimental", "AUTOTUNE", ")", "dataset", "=", "dataset", "prefetch", "(", "tf", "data", "experimental", "AUTOTUNE", ")", "self", "dataset", "=", "dataset", "def", "__len__", "(", "self", "):", "return", "self", "total_len", "self", "batch_size", "def", "on_epoch_end", "(", "self", "):", "#", "run", "permutation", "rand_idx", "=", "np", "random", "permutation", "(", "self", "total_len", ")", "cleanX", "=", "self", "cleanX", "[", "rand_idx", "]", "totalY", "=", "self", "totalY", "[", "rand_idx", "]", "self", "__build_pipeline", "(", "cleanX", "totalY", ")", "#%%", "#", "ref", "https", "://", "keras", "io", "examples", "cifar10_resnet", "def", "build_clf", "():", "#", "strategy", "scope", "():", "tf", "compat", "v1", "variable_scope", "('", "optimizer", "'):", "def", "resnet_layer", "(", "inputs", "num_filters", "=", "16", "kernel_size", "=", "3", "strides", "=", "1", "activation", "='", "relu", "',", "batch_normalization", "=", "True", "conv_first", "=", "True", "):", "\"\"\"", "2D", "Convolution", "Batch", "Normalization", "Activation", "stack", "builder", "#", "Arguments", "inputs", "(", "tensor", "):", "input", "tensor", "input", "image", "previous", "layer", "num_filters", "(", "int", "):", "Conv2D", "number", "filters", "kernel_size", "(", "int", "):", "Conv2D", "square", "kernel", "dimensions", "strides", "(", "int", "):", "Conv2D", "square", "stride", "dimensions", "activation", "(", "string", "):", "activation", "name", "batch_normalization", "(", "bool", "):", "whether", "include", "batch", "normalization", "conv_first", "(", "bool", "):", "conv", "bn", "activation", "(", "True", ")", "bn", "activation", "conv", "(", "False", ")", "#", "Returns", "x", "(", "tensor", "):", "tensor", "input", "next", "layer", "\"\"\"", "conv", "=", "tf", "keras", "layers", "Conv2D", "(", "num_filters", "kernel_size", "=", "kernel_size", "strides", "=", "strides", "padding", "='", "',", "kernel_initializer", "='", "he_normal", "',", "kernel_regularizer", "=", "tf", "keras", "regularizers", "l2", "(", "1e", "4", "))", "x", "=", "inputs", "conv_first", "x", "=", "conv", "(", "x", ")", "batch_normalization", "x", "=", "tf", "keras", "layers", "BatchNormalization", "()(", "x", ")", "activation", "None", "x", "=", "tf", "keras", "layers", "Activation", "(", "activation", ")(", "x", ")", "else", "batch_normalization", "x", "=", "tf", "keras", "layers", "BatchNormalization", "()(", "x", ")", "activation", "None", "x", "=", "tf", "keras", "layers", "Activation", "(", "activation", ")(", "x", ")", "x", "=", "conv", "(", "x", ")", "return", "x", "def", "cw_loss", "(", "y_true", "y_pred", "):", "label_mask", "=", "label_ref", "pre_softmax", "=", "x", "LooseVersion", "(", "tf", "__version__", ")", "<", "LooseVersion", "('", "1", "14", "0", "'):", "correct_logit", "=", "tf", "reduce_sum", "(", "label_mask", "pre_softmax", "axis", "=", "1", "keep_dims", "=", "True", ")", "else", "correct_logit", "=", "tf", "reduce_sum", "(", "label_mask", "pre_softmax", "axis", "=", "1", "keepdims", "=", "True", ")", "distance", "=", "tf", "nn", "relu", "(", "pre_softmax", "correct_logit", "(", "1", "label_mask", ")", "10", ")", "inactivate", "=", "tf", "cast", "(", "tf", "less_equal", "(", "distance", "1e", "9", "),", "dtype", "=", "tf", "float32", ")", "weight", "=", "tf", "keras", "layers", "Activation", "('", "softmax", "')(-", "1e9", "inactivate", "distance", ")", "loss", "=", "tf", "reduce_sum", "((", "1", "label_mask", ")", "distance", "weight", "axis", "=", "1", ")", "loss", "=", "tf", "math", "reduce_mean", "(", "loss", ")", "return", "loss", "#", "set", "model", "parameters", "(", "depth", "=", "n", "6", "2", ")", "n", "=", "8", "num_filters", "=", "16", "clf_input", "=", "tf", "keras", "layers", "Input", "(", "shape", "=(", "img_h", "img_w", "channels", "),", "name", "=\"", "model", "input", "\")", "label_ref", "=", "tf", "keras", "layers", "Input", "(", "shape", "=(", "num_classes", ",),", "name", "='", "label_ref", "')", "input_list", "=", "[", "clf_input", "label_ref", "]", "x", "=", "resnet_layer", "(", "inputs", "=", "clf_input", ")", "stack", "range", "(", "3", "):", "res_block", "range", "(", "n", "):", "strides", "=", "1", "stack", ">", "0", "res_block", "==", "0", "#", "first", "layer", "first", "stack", "strides", "=", "2", "#", "downsample", "=", "resnet_layer", "(", "inputs", "=", "x", "num_filters", "=", "num_filters", "strides", "=", "strides", ")", "=", "resnet_layer", "(", "inputs", "=", "num_filters", "=", "num_filters", "activation", "=", "None", ")", "stack", ">", "0", "res_block", "==", "0", "#", "first", "layer", "first", "stack", "#", "linear", "projection", "residual", "shortcut", "connection", "match", "#", "changed", "dims", "x", "=", "resnet_layer", "(", "inputs", "=", "x", "num_filters", "=", "num_filters", "kernel_size", "=", "1", "strides", "=", "strides", "activation", "=", "None", "batch_normalization", "=", "False", ")", "x", "=", "tf", "keras", "layers", "Add", "()([", "x", "])", "x", "=", "tf", "keras", "layers", "Activation", "('", "relu", "')(", "x", ")", "num_filters", "*=", "2", "x", "=", "tf", "keras", "layers", "AveragePooling2D", "(", "pool_size", "=", "8", ")(", "x", ")", "x", "=", "tf", "keras", "layers", "Flatten", "()(", "x", ")", "x", "=", "tf", "keras", "layers", "Dense", "(", "num_classes", "kernel_initializer", "='", "he_normal", "',", "activation", "=", "None", ")(", "x", ")", "=", "tf", "keras", "layers", "Activation", "('", "softmax", "')(", "x", ")", "optimizer", "=", "tf", "keras", "optimizers", "Adam", "(", "lr", "=", "0", "001", ")", "clf_model", "=", "tf", "keras", "models", "Model", "(", "inputs", "=", "input_list", "outputs", "=", "name", "='", "clf_model", "')", "clf_model", "compile", "(", "loss", "='", "categorical_crossentropy", "',", "optimizer", "=", "optimizer", "metrics", "=['", "accuracy", "',", "cw_loss", "])", "clf_model", "summary", "()", "return", "clf_model", "#%%", "__name__", "==", "__main__", "':", "#", "set", "GPU", "import", "os", "os", "environ", "get", "(\"", "CUDA_VISIBLE_DEVICES", "\")", "None", "os", "environ", "[\"", "CUDA_VISIBLE_DEVICES", "\"]", "=", "0", "#", "reset", "tf", "session", "tf", "compat", "v1", "keras", "backend", "clear_session", "()", "gpu_options", "=", "tf", "compat", "v1", "GPUOptions", "(", "allow_growth", "=", "True", ")", "sess", "=", "tf", "compat", "v1", "Session", "(", "config", "=", "tf", "compat", "v1", "ConfigProto", "(", "gpu_options", "=", "gpu_options", "))", "tf", "compat", "v1", "keras", "backend", "set_session", "(", "sess", ")", "#", "Hyperparameters", "batch_size", "=", "100", "epochs", "=", "1", "#", "prepare", "data", "trainX", "trainY", "validX", "validY", "testX", "testY", "=", "download_data", "()", "train_gen", "=", "DataGenerator", "(", "sess", "trainX", "trainY", "trainY", "shape", "[", "0", "],", "batch_size", ")", "valid_gen", "=", "DataGenerator", "(", "sess", "validX", "validY", "validY", "shape", "[", "0", "],", "batch_size", ")", "test_gen", "=", "DataGenerator", "(", "sess", "testX", "testY", "testY", "shape", "[", "0", "],", "batch_size", ")", "#", "build", "model", "model", "=", "build_clf", "()", "#", "train", "model", "model", "fit", "(", "train_gen", "dataset", "epochs", "=", "epochs", "steps_per_epoch", "=", "train_gen", "__len__", "(),", "validation_data", "=", "valid_gen", "dataset", "validation_steps", "=", "valid_gen", "__len__", "(),", "verbose", "=", "1", ")", "#", "print", "result", "meta_string", "=", "'[", "Testing", "]'", "prefix_string", "=", "''", "output", "=", "model", "evaluate", "(", "test_gen", "dataset", "steps", "=", "test_gen", "__len__", "())", "ii", "range", "(", "len", "(", "model", "metrics_names", ")", "):", "meta_string", "=", "meta_string", "'-", "{:", "}{:", "}:", "{:.", "3f", "}", "'.", "format", "(", "prefix_string", "model", "metrics_names", "[", "ii", "],", "output", "[", "ii", "])", "print", "(", "meta_string", ")", "```", "First", "testing", "case", "looks", "good", "without", "enabling", "`", "tf", "distribute", "MirroredStrategy", "()`", "There", "output", "normal", "case", "```", "Train", "450", "steps", "validate", "50", "steps", "2019", "12", "13", "16", "20", "30", "625379", "I", "tensorflow", "stream_executor", "platform", "default", "dso_loader", "cc", "44", "]", "Successfully", "opened", "dynamic", "library", "libcublas", "10", "0", "2019", "12", "13", "16", "20", "31", "217430", "I", "tensorflow", "stream_executor", "platform", "default", "dso_loader", "cc", "44", "]", "Successfully", "opened", "dynamic", "library", "libcudnn", "7", "2019", "12", "13", "16", "20", "33", "007150", "W", "tensorflow", "stream_executor", "cuda", "redzone_allocator", "cc", "312", "]", "Not", "found", "./", "bin", "ptxas", "found", "Relying", "driver", "perform", "ptx", "compilation", "This", "message", "logged", "450", "450", "[==============================]", "40s", "88ms", "step", "loss", "1", "8299", "accuracy", "0", "4744", "cw_loss", "9", "5022", "val_loss", "1", "9870", "val_accuracy", "0", "4528", "val_cw_loss", "9", "6570", "100", "100", "[==============================]", "3s", "26ms", "step", "loss", "2", "0089", "accuracy", "0", "4511", "cw_loss", "9", "6708", "[", "Testing", "]-", "loss", "2", "009", "accuracy", "0", "451", "cw_loss", "9", "671", "```", "Next", "tried", "enable", "`", "tf", "distribute", "MirroredStrategy", "()`", "modified", "testcase", "following", "patch", "```", "diff", "def", "build_clf", "():", "#", "strategy", "scope", "():", "tf", "compat", "v1", "variable_scope", "('", "optimizer", "'):", "def", "build_clf", "():", "strategy", "scope", "():", "#", "tf", "compat", "v1", "variable_scope", "('", "optimizer", "'):", "```", "And", "got", "error", "message", "```", "Traceback", "(", "recent", "call", "last", "):", "File", "bug", "py", "\",", "line", "233", "<", "module", ">", "verbose", "=", "1", ")", "File", "\"/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "keras", "engine", "training", "py", "\",", "line", "717", "fit", "use_multiprocessing", "=", "use_multiprocessing", ")", "File", "\"/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "keras", "engine", "training_distributed", "py", "\",", "line", "685", "fit", "steps_name", "='", "steps_per_epoch", "')", "File", "\"/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "keras", "engine", "training_arrays", "py", "\",", "line", "299", "model_iteration", "batch_outs", "=", "f", "(", "actual_inputs", ")", "File", "\"/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "keras", "backend", "py", "\",", "line", "3580", "__call__", "run_metadata", "=", "self", "run_metadata", ")", "File", "\"/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "client", "session", "py", "\",", "line", "1472", "__call__", "run_metadata_ptr", ")", "tensorflow", "python", "framework", "errors_impl", "InvalidArgumentError", "2", "root", "error", "(", ")", "found", "(", "0", ")", "Invalid", "argument", "You", "must", "feed", "value", "placeholder", "tensor", "model", "input", "dtype", "float", "shape", "[?,", "32", "32", "3", "]", "[[{{", "node", "model", "input", "}}]]", "[[", "batch_normalization_9", "cond", "else", "_325", "FusedBatchNormV3", "ReadVariableOp", "_2529", "]]", "(", "1", ")", "Invalid", "argument", "You", "must", "feed", "value", "placeholder", "tensor", "model", "input", "dtype", "float", "shape", "[?,", "32", "32", "3", "]", "[[{{", "node", "model", "input", "}}]]", "0", "successful", "operations", "0", "derived", "errors", "ignored", "```", "This", "error", "similar", "previous", "issue", "#", "34866", "I", "guess", "two", "issues", "may", "strong", "connection", "**", "Describe", "expected", "behavior", "**", "It", "work", "properly", "**", "Code", "reproduce", "issue", "**", "Please", "see", "section", "**", "Describe", "current", "behavior", "**", "**", "Other", "info", "logs", "**", "The", "following", "message", "result", "generated", "`", "tf_env_collect", "sh", "`", "```", "==", "check", "python", "===================================================", "python", "version", "3", "5", "2", "python", "branch", "python", "build", "version", "('", "default", "',", "Oct", "8", "2019", "13", "06", "37", "')", "python", "compiler", "version", "GCC", "5", "4", "0", "20160609", "python", "implementation", "CPython", "==", "check", "os", "platform", "===============================================", "os", "Linux", "os", "kernel", "version", "#", "40", "~", "18", "04", "1", "Ubuntu", "SMP", "Thu", "Nov", "14", "12", "06", "39", "UTC", "2019", "os", "release", "version", "5", "0", "0", "37", "generic", "os", "platform", "Linux", "5", "0", "0", "37", "generic", "x86_64", "Ubuntu", "16", "04", "xenial", "linux", "distribution", "('", "Ubuntu", "',", "16", "04", "',", "xenial", "')", "linux", "os", "distribution", "('", "Ubuntu", "',", "16", "04", "',", "xenial", "')", "mac", "version", "('',", "('',", "'',", "''),", "'')", "uname", "uname_result", "(", "system", "='", "Linux", "',", "node", "='", "f7f509f1dacf", "',", "release", "='", "5", "0", "0", "37", "generic", "',", "version", "='#", "40", "~", "18", "04", "1", "Ubuntu", "SMP", "Thu", "Nov", "14", "12", "06", "39", "UTC", "2019", "',", "machine", "='", "x86_64", "',", "processor", "='", "x86_64", "')", "architecture", "('", "64bit", "',", "ELF", "')", "machine", "x86_64", "==", "docker", "=============================================", "Yes", "==", "compiler", "=====================================================", "c", "++", "(", "Ubuntu", "5", "4", "0", "6ubuntu1", "~", "16", "04", "12", ")", "5", "4", "0", "20160609", "Copyright", "(", "C", ")", "2015", "Free", "Software", "Foundation", "Inc", "This", "free", "software", ";", "see", "source", "copying", "conditions", "There", "NO", "warranty", ";", "even", "MERCHANTABILITY", "FITNESS", "FOR", "A", "PARTICULAR", "PURPOSE", "==", "check", "pips", "===================================================", "numpy", "1", "17", "4", "protobuf", "3", "11", "1", "tensorflow", "estimator", "2", "0", "1", "tensorflow", "gpu", "2", "0", "0", "tensorflow", "probability", "0", "8", "0", "==", "check", "virtualenv", "=========================================", "False", "==", "tensorflow", "import", "============================================", "tf", "version", "VERSION", "=", "2", "0", "0", "tf", "version", "GIT_VERSION", "=", "v2", "0", "0", "rc2", "26", "g64c3d38", "tf", "version", "COMPILER_VERSION", "=", "7", "3", "1", "20180303", "Sanity", "check", "array", "([", "1", "],", "dtype", "=", "int32", ")", "443", "find", "library", "=", "libpthread", "0", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "nvidia", "lib", "tls", "x86_64", ":/", "usr", "local", "nvidia", "lib", "tls", ":/", "usr", "local", "nvidia", "lib", "x86_64", ":/", "usr", "local", "nvidia", "lib", ":/", "usr", "local", "nvidia", "lib64", "tls", "x86_64", ":/", "usr", "local", "nvidia", "lib64", "tls", ":/", "usr", "local", "nvidia", "lib64", "x86_64", ":/", "usr", "local", "nvidia", "lib64", "(", "LD_LIBRARY_PATH", ")", "443", "trying", "file", "=/", "usr", "local", "nvidia", "lib", "tls", "x86_64", "libpthread", "0", "443", "trying", "file", "=/", "usr", "local", "nvidia", "lib", "tls", "libpthread", "0", "443", "trying", "file", "=/", "usr", "local", "nvidia", "lib", "x86_64", "libpthread", "0", "443", "trying", "file", "=/", "usr", "local", "nvidia", "lib", "libpthread", "0", "443", "trying", "file", "=/", "usr", "local", "nvidia", "lib64", "tls", "x86_64", "libpthread", "0", "443", "trying", "file", "=/", "usr", "local", "nvidia", "lib64", "tls", "libpthread", "0", "443", "trying", "file", "=/", "usr", "local", "nvidia", "lib64", "x86_64", "libpthread", "0", "443", "trying", "file", "=/", "usr", "local", "nvidia", "lib64", "libpthread", "0", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "libpthread", "0", "443", "443", "find", "library", "=", "libc", "6", "[", "0", "];", "searching", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "libc", "6", "443", "443", "find", "library", "=", "libdl", "2", "[", "0", "];", "searching", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "libdl", "2", "443", "443", "find", "library", "=", "libutil", "1", "[", "0", "];", "searching", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "libutil", "1", "443", "443", "find", "library", "=", "libexpat", "1", "[", "0", "];", "searching", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "libexpat", "1", "443", "443", "find", "library", "=", "libz", "1", "[", "0", "];", "searching", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "libz", "1", "443", "443", "find", "library", "=", "libm", "6", "[", "0", "];", "searching", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "libm", "6", "443", "443", "443", "calling", "init", "lib", "x86_64", "linux", "gnu", "libpthread", "0", "443", "443", "443", "calling", "init", "lib", "x86_64", "linux", "gnu", "libc", "6", "443", "443", "443", "calling", "init", "lib", "x86_64", "linux", "gnu", "libm", "6", "443", "443", "443", "calling", "init", "lib", "x86_64", "linux", "gnu", "libz", "1", "443", "443", "443", "calling", "init", "lib", "x86_64", "linux", "gnu", "libexpat", "1", "443", "443", "443", "calling", "init", "lib", "x86_64", "linux", "gnu", "libutil", "1", "443", "443", "443", "calling", "init", "lib", "x86_64", "linux", "gnu", "libdl", "2", "443", "443", "443", "initialize", "program", "usr", "local", "bin", "python", "443", "443", "443", "transferring", "control", "usr", "local", "bin", "python", "443", "443", "443", "calling", "init", "usr", "lib", "python3", "5", "lib", "dynload", "_opcode", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "lib", "python3", "5", "lib", "dynload", "_ctypes", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "find", "library", "=", "libopenblasp", "r0", "34a18dc3", "3", "7", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "/../.", "libs", "tls", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "/../.", "libs", "tls", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "/../.", "libs", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "/../.", "libs", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "_multiarray_umath", "cpython", "35m", "x86_64", "linux", "gnu", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "/../.", "libs", "tls", "x86_64", "libopenblasp", "r0", "34a18dc3", "3", "7", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "/../.", "libs", "tls", "libopenblasp", "r0", "34a18dc3", "3", "7", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "/../.", "libs", "x86_64", "libopenblasp", "r0", "34a18dc3", "3", "7", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "/../.", "libs", "libopenblasp", "r0", "34a18dc3", "3", "7", "443", "443", "find", "library", "=", "libgfortran", "ed201abd", "3", "0", "0", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "/../.", "libs", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "_multiarray_umath", "cpython", "35m", "x86_64", "linux", "gnu", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "/../.", "libs", "libgfortran", "ed201abd", "3", "0", "0", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "/../.", "libs", "libgfortran", "ed201abd", "3", "0", "0", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "/../.", "libs", "libopenblasp", "r0", "34a18dc3", "3", "7", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "_multiarray_umath", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "_multiarray_tests", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "linalg", "lapack_lite", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "linalg", "_umath_linalg", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "find", "library", "=", "libbz2", "1", "0", "[", "0", "];", "searching", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "libbz2", "1", "0", "443", "443", "443", "calling", "init", "lib", "x86_64", "linux", "gnu", "libbz2", "1", "0", "443", "443", "443", "calling", "init", "usr", "lib", "python3", "5", "lib", "dynload", "_bz2", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "find", "library", "=", "liblzma", "5", "[", "0", "];", "searching", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "liblzma", "5", "443", "443", "443", "calling", "init", "lib", "x86_64", "linux", "gnu", "liblzma", "5", "443", "443", "443", "calling", "init", "usr", "lib", "python3", "5", "lib", "dynload", "_lzma", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "find", "library", "=", "libmpdec", "2", "[", "0", "];", "searching", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "usr", "lib", "x86_64", "linux", "gnu", "libmpdec", "2", "443", "443", "443", "calling", "init", "usr", "lib", "x86_64", "linux", "gnu", "libmpdec", "2", "443", "443", "443", "calling", "init", "usr", "lib", "python3", "5", "lib", "dynload", "_decimal", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "fft", "_pocketfft_internal", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "mtrand", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "common", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "bounded_integers", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "mt19937", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "bit_generator", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "find", "library", "=", "libcrypto", "1", "0", "0", "[", "0", "];", "searching", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "libcrypto", "1", "0", "0", "443", "443", "443", "calling", "init", "lib", "x86_64", "linux", "gnu", "libcrypto", "1", "0", "0", "443", "443", "443", "calling", "init", "usr", "lib", "python3", "5", "lib", "dynload", "_hashlib", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "philox", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "pcg64", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "sfc64", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "generator", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "find", "library", "=", "libtensorflow_framework", "2", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../../", "_solib_local", "_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal", "so___Utensorflow", "tls", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../../", "_solib_local", "_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal", "so___Utensorflow", "tls", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../../", "_solib_local", "_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal", "so___Utensorflow", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../../", "_solib_local", "_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal", "so___Utensorflow", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "tls", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "tls", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../", "tls", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../", "tls", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/..", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "_pywrap_tensorflow_internal", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../../", "_solib_local", "_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal", "so___Utensorflow", "tls", "x86_64", "libtensorflow_framework", "2", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../../", "_solib_local", "_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal", "so___Utensorflow", "tls", "libtensorflow_framework", "2", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../../", "_solib_local", "_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal", "so___Utensorflow", "x86_64", "libtensorflow_framework", "2", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../../", "_solib_local", "_U_S_Stensorflow_Spython_C_Upywrap_Utensorflow_Uinternal", "so___Utensorflow", "libtensorflow_framework", "2", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "tls", "x86_64", "libtensorflow_framework", "2", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "tls", "libtensorflow_framework", "2", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "x86_64", "libtensorflow_framework", "2", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "libtensorflow_framework", "2", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../", "tls", "x86_64", "libtensorflow_framework", "2", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../", "tls", "libtensorflow_framework", "2", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../", "x86_64", "libtensorflow_framework", "2", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../", "libtensorflow_framework", "2", "443", "443", "find", "library", "=", "librt", "1", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/..", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "_pywrap_tensorflow_internal", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "librt", "1", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../", "librt", "1", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "librt", "1", "443", "443", "find", "library", "=", "libstdc", "++.", "6", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/..", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "_pywrap_tensorflow_internal", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "libstdc", "++.", "6", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../", "libstdc", "++.", "6", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "usr", "lib", "x86_64", "linux", "gnu", "libstdc", "++.", "6", "443", "443", "find", "library", "=", "libgcc_s", "1", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/..", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "_pywrap_tensorflow_internal", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "libgcc_s", "1", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../", "libgcc_s", "1", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "libgcc_s", "1", "443", "443", "443", "calling", "init", "lib", "x86_64", "linux", "gnu", "libgcc_s", "1", "443", "443", "443", "calling", "init", "usr", "lib", "x86_64", "linux", "gnu", "libstdc", "++.", "6", "443", "443", "443", "calling", "init", "lib", "x86_64", "linux", "gnu", "librt", "1", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../", "libtensorflow_framework", "2", "443", "443", "find", "library", "=", "libhdfs", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/..", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "_pywrap_tensorflow_internal", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../", "libhdfs", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/..", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "_pywrap_tensorflow_internal", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "libhdfs", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../", "libhdfs", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "search", "path", "=/", "lib", "x86_64", "linux", "gnu", "tls", "x86_64", ":/", "lib", "x86_64", "linux", "gnu", "tls", ":/", "lib", "x86_64", "linux", "gnu", "x86_64", ":/", "lib", "x86_64", "linux", "gnu", ":/", "usr", "lib", "x86_64", "linux", "gnu", "tls", "x86_64", ":/", "usr", "lib", "x86_64", "linux", "gnu", "tls", ":/", "usr", "lib", "x86_64", "linux", "gnu", "x86_64", ":/", "usr", "lib", "x86_64", "linux", "gnu", ":/", "lib", "tls", "x86_64", ":/", "lib", "tls", ":/", "lib", "x86_64", ":/", "lib", ":/", "usr", "lib", "tls", "x86_64", ":/", "usr", "lib", "tls", ":/", "usr", "lib", "x86_64", ":/", "usr", "lib", "(", "system", "search", "path", ")", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "tls", "x86_64", "libhdfs", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "tls", "libhdfs", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "x86_64", "libhdfs", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "libhdfs", "443", "trying", "file", "=/", "usr", "lib", "x86_64", "linux", "gnu", "tls", "x86_64", "libhdfs", "443", "trying", "file", "=/", "usr", "lib", "x86_64", "linux", "gnu", "tls", "libhdfs", "443", "trying", "file", "=/", "usr", "lib", "x86_64", "linux", "gnu", "x86_64", "libhdfs", "443", "trying", "file", "=/", "usr", "lib", "x86_64", "linux", "gnu", "libhdfs", "443", "trying", "file", "=/", "lib", "tls", "x86_64", "libhdfs", "443", "trying", "file", "=/", "lib", "tls", "libhdfs", "443", "trying", "file", "=/", "lib", "x86_64", "libhdfs", "443", "trying", "file", "=/", "lib", "libhdfs", "443", "trying", "file", "=/", "usr", "lib", "tls", "x86_64", "libhdfs", "443", "trying", "file", "=/", "usr", "lib", "tls", "libhdfs", "443", "trying", "file", "=/", "usr", "lib", "x86_64", "libhdfs", "443", "trying", "file", "=/", "usr", "lib", "libhdfs", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "_pywrap_tensorflow_internal", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "google", "protobuf", "internal", "_api_implementation", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "google", "protobuf", "pyext", "_message", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "lib", "python3", "5", "lib", "dynload", "_csv", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "lib", "python3", "5", "lib", "dynload", "termios", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "framework", "fast_tensor_util", "443", "443", "find", "library", "=", "libuuid", "1", "[", "0", "];", "searching", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "libuuid", "1", "443", "443", "443", "calling", "init", "lib", "x86_64", "linux", "gnu", "libuuid", "1", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "wrapt", "_wrappers", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "lib", "python3", "5", "lib", "dynload", "_json", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "find", "library", "=", "libssl", "1", "0", "0", "[", "0", "];", "searching", "443", "search", "path", "=", "(", "LD_LIBRARY_PATH", ")", "443", "search", "cache", "=/", "etc", "ld", "cache", "443", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "libssl", "1", "0", "0", "443", "443", "443", "calling", "init", "lib", "x86_64", "linux", "gnu", "libssl", "1", "0", "0", "443", "443", "443", "calling", "init", "usr", "lib", "python3", "5", "lib", "dynload", "_ssl", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "find", "library", "=", "libhdf5", "49599f4e", "103", "0", "0", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "tls", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "tls", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "_errors", "cpython", "35m", "x86_64", "linux", "gnu", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "tls", "x86_64", "libhdf5", "49599f4e", "103", "0", "0", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "tls", "libhdf5", "49599f4e", "103", "0", "0", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "x86_64", "libhdf5", "49599f4e", "103", "0", "0", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "libhdf5", "49599f4e", "103", "0", "0", "443", "443", "find", "library", "=", "libhdf5_hl", "db841637", "100", "1", "1", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "_errors", "cpython", "35m", "x86_64", "linux", "gnu", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "libhdf5_hl", "db841637", "100", "1", "1", "443", "443", "find", "library", "=", "libsz", "1c7dd0cf", "2", "0", "1", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "tls", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "tls", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/.", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "libhdf5", "49599f4e", "103", "0", "0", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "tls", "x86_64", "libsz", "1c7dd0cf", "2", "0", "1", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "tls", "libsz", "1c7dd0cf", "2", "0", "1", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "x86_64", "libsz", "1c7dd0cf", "2", "0", "1", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "libsz", "1c7dd0cf", "2", "0", "1", "443", "443", "find", "library", "=", "libaec", "2147abcd", "0", "0", "4", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/.", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "libhdf5", "49599f4e", "103", "0", "0", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "libaec", "2147abcd", "0", "0", "4", "443", "443", "find", "library", "=", "libz", "a147dcb0", "1", "2", "3", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/.", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "libhdf5", "49599f4e", "103", "0", "0", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "libz", "a147dcb0", "1", "2", "3", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "libz", "a147dcb0", "1", "2", "3", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "libaec", "2147abcd", "0", "0", "4", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "libsz", "1c7dd0cf", "2", "0", "1", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "libhdf5", "49599f4e", "103", "0", "0", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "libhdf5_hl", "db841637", "100", "1", "1", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "_errors", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "defs", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "_objects", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "_conv", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5r", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5t", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "utils", "cpython", "35m", "x86_64", "linux", "gnu", "443", "452", "find", "library", "=", "libc", "6", "[", "0", "];", "searching", "452", "search", "path", "=/", "usr", "local", "nvidia", "lib", "tls", "x86_64", ":/", "usr", "local", "nvidia", "lib", "tls", ":/", "usr", "local", "nvidia", "lib", "x86_64", ":/", "usr", "local", "nvidia", "lib", ":/", "usr", "local", "nvidia", "lib64", "tls", "x86_64", ":/", "usr", "local", "nvidia", "lib64", "tls", ":/", "usr", "local", "nvidia", "lib64", "x86_64", ":/", "usr", "local", "nvidia", "lib64", "(", "LD_LIBRARY_PATH", ")", "452", "trying", "file", "=/", "usr", "local", "nvidia", "lib", "tls", "x86_64", "libc", "6", "452", "trying", "file", "=/", "usr", "local", "nvidia", "lib", "tls", "libc", "6", "452", "trying", "file", "=/", "usr", "local", "nvidia", "lib", "x86_64", "libc", "6", "452", "trying", "file", "=/", "usr", "local", "nvidia", "lib", "libc", "6", "452", "trying", "file", "=/", "usr", "local", "nvidia", "lib64", "tls", "x86_64", "libc", "6", "452", "trying", "file", "=/", "usr", "local", "nvidia", "lib64", "tls", "libc", "6", "452", "trying", "file", "=/", "usr", "local", "nvidia", "lib64", "x86_64", "libc", "6", "452", "trying", "file", "=/", "usr", "local", "nvidia", "lib64", "libc", "6", "452", "search", "cache", "=/", "etc", "ld", "cache", "452", "trying", "file", "=/", "lib", "x86_64", "linux", "gnu", "libc", "6", "452", "452", "452", "calling", "init", "lib", "x86_64", "linux", "gnu", "libc", "6", "452", "452", "452", "initialize", "program", "bin", "sh", "452", "452", "452", "transferring", "control", "bin", "sh", "452", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5z", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5a", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5s", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5p", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5ac", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "_proxy", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5d", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5ds", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5f", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5g", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5i", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5fd", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5pl", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5o", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5l", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "_lib", "_ccallback_c", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "sparse", "_sparsetools", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "sparse", "_csparsetools", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "sparse", "csgraph", "_shortest_path", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "sparse", "csgraph", "_tools", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "sparse", "csgraph", "_traversal", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "sparse", "csgraph", "_min_spanning_tree", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "sparse", "csgraph", "_reordering", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "find", "library", "=", "libjpeg", "3b10b538", "9", "3", "0", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "tls", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "tls", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "_imaging", "cpython", "35m", "x86_64", "linux", "gnu", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "tls", "x86_64", "libjpeg", "3b10b538", "9", "3", "0", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "tls", "libjpeg", "3b10b538", "9", "3", "0", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "x86_64", "libjpeg", "3b10b538", "9", "3", "0", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "libjpeg", "3b10b538", "9", "3", "0", "443", "443", "find", "library", "=", "libopenjp2", "b3d7668a", "2", "3", "1", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "_imaging", "cpython", "35m", "x86_64", "linux", "gnu", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "libopenjp2", "b3d7668a", "2", "3", "1", "443", "443", "find", "library", "=", "libtiff", "8267adfe", "5", "4", "0", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "_imaging", "cpython", "35m", "x86_64", "linux", "gnu", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "libtiff", "8267adfe", "5", "4", "0", "443", "443", "find", "library", "=", "liblzma", "6cd627ed", "5", "2", "4", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "/./", "tls", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "/./", "tls", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "/./", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "/.", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "libtiff", "8267adfe", "5", "4", "0", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "/./", "tls", "x86_64", "liblzma", "6cd627ed", "5", "2", "4", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "/./", "tls", "liblzma", "6cd627ed", "5", "2", "4", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "/./", "x86_64", "liblzma", "6cd627ed", "5", "2", "4", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "/./", "liblzma", "6cd627ed", "5", "2", "4", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "/./", "liblzma", "6cd627ed", "5", "2", "4", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "libjpeg", "3b10b538", "9", "3", "0", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "libtiff", "8267adfe", "5", "4", "0", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "libopenjp2", "b3d7668a", "2", "3", "1", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "_imaging", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "ndimage", "_nd_image", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "ndimage", "_ni_label", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "find", "library", "=", "libopenblasp", "r0", "2ecf47d5", "3", "7", "dev", "[", "0", "];", "searching", "443", "search", "path", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "/../.", "libs", "tls", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "/../.", "libs", "tls", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "/../.", "libs", "x86_64", ":/", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "/../.", "libs", "(", "RPATH", "file", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "_fblas", "cpython", "35m", "x86_64", "linux", "gnu", ")", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "/../.", "libs", "tls", "x86_64", "libopenblasp", "r0", "2ecf47d5", "3", "7", "dev", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "/../.", "libs", "tls", "libopenblasp", "r0", "2ecf47d5", "3", "7", "dev", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "/../.", "libs", "x86_64", "libopenblasp", "r0", "2ecf47d5", "3", "7", "dev", "443", "trying", "file", "=/", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "/../.", "libs", "libopenblasp", "r0", "2ecf47d5", "3", "7", "dev", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "/../.", "libs", "libopenblasp", "r0", "2ecf47d5", "3", "7", "dev", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "_fblas", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "_flapack", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "_flinalg", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "_solve_toeplitz", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "_decomp_update", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "cython_blas", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "cython_lapack", "cpython", "35m", "x86_64", "linux", "gnu", "443", "443", "443", "calling", "init", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "lite", "experimental", "microfrontend", "python", "ops", "_audio_microfrontend_op", "443", "443", "443", "calling", "fini", "usr", "local", "bin", "python", "[", "0", "]", "443", "443", "443", "calling", "fini", "lib", "x86_64", "linux", "gnu", "libutil", "1", "[", "0", "]", "443", "443", "443", "calling", "fini", "lib", "x86_64", "linux", "gnu", "libexpat", "1", "[", "0", "]", "443", "443", "443", "calling", "fini", "lib", "x86_64", "linux", "gnu", "libz", "1", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "lib", "python3", "5", "lib", "dynload", "_opcode", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "lib", "python3", "5", "lib", "dynload", "_ctypes", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "_multiarray_umath", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "_multiarray_tests", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "linalg", "lapack_lite", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "linalg", "_umath_linalg", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "/../.", "libs", "libopenblasp", "r0", "34a18dc3", "3", "7", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "lib", "python3", "5", "lib", "dynload", "_bz2", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "lib", "x86_64", "linux", "gnu", "libbz2", "1", "0", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "lib", "python3", "5", "lib", "dynload", "_lzma", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "lib", "x86_64", "linux", "gnu", "liblzma", "5", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "lib", "python3", "5", "lib", "dynload", "_decimal", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "lib", "x86_64", "linux", "gnu", "libmpdec", "2", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "fft", "_pocketfft_internal", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "mtrand", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "common", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "bounded_integers", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "mt19937", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "bit_generator", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "lib", "python3", "5", "lib", "dynload", "_hashlib", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "philox", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "pcg64", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "sfc64", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "random", "generator", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "_pywrap_tensorflow_internal", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "google", "protobuf", "internal", "_api_implementation", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "google", "protobuf", "pyext", "_message", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "lib", "python3", "5", "lib", "dynload", "_csv", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "lib", "python3", "5", "lib", "dynload", "termios", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "framework", "fast_tensor_util", "[", "0", "]", "443", "443", "443", "calling", "fini", "lib", "x86_64", "linux", "gnu", "libuuid", "1", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "wrapt", "_wrappers", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "lib", "python3", "5", "lib", "dynload", "_json", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "lib", "python3", "5", "lib", "dynload", "_ssl", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "lib", "x86_64", "linux", "gnu", "libssl", "1", "0", "0", "[", "0", "]", "443", "443", "443", "calling", "fini", "lib", "x86_64", "linux", "gnu", "libcrypto", "1", "0", "0", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "_errors", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "defs", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "_objects", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "_conv", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5r", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5t", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "utils", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5z", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5a", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5s", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5p", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5ac", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "_proxy", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5d", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5ds", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5f", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5g", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5i", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5fd", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5pl", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5o", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "h5l", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "libhdf5_hl", "db841637", "100", "1", "1", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "libhdf5", "49599f4e", "103", "0", "0", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "libsz", "1c7dd0cf", "2", "0", "1", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "libaec", "2147abcd", "0", "0", "4", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "_lib", "_ccallback_c", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "sparse", "_sparsetools", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "sparse", "_csparsetools", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "sparse", "csgraph", "_shortest_path", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "sparse", "csgraph", "_tools", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "sparse", "csgraph", "_traversal", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "sparse", "csgraph", "_min_spanning_tree", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "sparse", "csgraph", "_reordering", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "_imaging", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "libopenjp2", "b3d7668a", "2", "3", "1", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "libtiff", "8267adfe", "5", "4", "0", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "libjpeg", "3b10b538", "9", "3", "0", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "h5py", "/.", "libs", "/./", "libz", "a147dcb0", "1", "2", "3", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "PIL", "/.", "libs", "/./", "liblzma", "6cd627ed", "5", "2", "4", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "ndimage", "_nd_image", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "ndimage", "_ni_label", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "_fblas", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "_flapack", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "_flinalg", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "_solve_toeplitz", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "_decomp_update", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "cython_blas", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "cython_lapack", "cpython", "35m", "x86_64", "linux", "gnu", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "scipy", "linalg", "/../.", "libs", "libopenblasp", "r0", "2ecf47d5", "3", "7", "dev", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "numpy", "core", "/../.", "libs", "libgfortran", "ed201abd", "3", "0", "0", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "lite", "experimental", "microfrontend", "python", "ops", "_audio_microfrontend_op", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "local", "lib", "python3", "5", "dist", "packages", "tensorflow_core", "python", "/../", "libtensorflow_framework", "2", "[", "0", "]", "443", "443", "443", "calling", "fini", "usr", "lib", "x86_64", "linux", "gnu", "libstdc", "++.", "6", "[", "0", "]", "443", "443", "443", "calling", "fini", "lib", "x86_64", "linux", "gnu", "libgcc_s", "1", "[", "0", "]", "443", "443", "443", "calling", "fini", "lib", "x86_64", "linux", "gnu", "librt", "1", "[", "0", "]", "443", "443", "443", "calling", "fini", "lib", "x86_64", "linux", "gnu", "libm", "6", "[", "0", "]", "443", "443", "443", "calling", "fini", "lib", "x86_64", "linux", "gnu", "libdl", "2", "[", "0", "]", "443", "443", "443", "calling", "fini", "lib", "x86_64", "linux", "gnu", "libpthread", "0", "[", "0", "]", "443", "```"], "2020-03-1": ["adding", "example", "cwrapper", "generates", "projects", "simple", "api", "adding", "make", "library", "option", "makefile", "template", "make", "project", "compiler", "path", "defined", "setting", "adds", "parser", "pull", "used", "ops", "tflite", "model", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "No", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Ubuntu", "18", "04", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "No", "TensorFlow", "installed", "(", "source", "binary", "):", "source", "TensorFlow", "version", "(", "use", "command", "):", "2", "1", "0", "Python", "version", "3", "6", "8", "Bazel", "version", "(", "compiling", "source", "):", "0", "29", "1", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "GCC", "7", "4", "0", "CUDA", "cuDNN", "version", "10", "1", "10", "2", "CuDNN", "7", "GPU", "model", "memory", "NVidia", "GTX", "1080", "Ti", "TensorRT", "version", "6", "7", "**", "Describe", "current", "behavior", "**", "Compiling", "source", "indicated", "official", "tensorflow", "manual", "compilation", "fails", "error", "listed", "log", "**", "Describe", "expected", "behavior", "**", "Compilation", "successfully", "complete", "**", "Code", "reproduce", "issue", "**", "No", "code", "needed", "After", "checkout", "current", "v", "2", "1", "0", "configuration", "carried", "changes", "default", "(", "enabling", "CUDA", ").", "**", "Other", "info", "logs", "**", "Log", "see", "attached", "log", "txt", "[", "log", "txt", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "files", "4068010", "log", "txt", ")", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "Yes", "OS", "Platform", "Distribution", "Windows", "10", "TensorFlow", "installed", "binary", "TensorFlow", "version", "Same", "issue", "using", "tf2", "0", "0", "beta1", "cpu", "tf1", "14", "0", "gpu", "Python", "version", "3", "6", "9", "CUDA", "cuDNN", "version", "CUDA", "10", "1", "168", "cuDNN", "7", "6", "2", "GPU", "model", "memory", "NVIDIA", "GeForce", "RTX", "2060", "6GB", "dedicated", "memory", "**", "Describe", "current", "behavior", "**", "A", "convolutional", "reggression", "(", "last", "layer", "linear", "activation", "one", "neuron", ")", "network", "built", "tf", "keras", "shown", "fit", "MNIST", "dataset", "(", "I", "know", "MNIST", "classification", "task", ";", "example", ")", "converted", "dataset", "When", "model", "packaged", "estimator", "using", "`", "tf", "keras", "estimator", "model_to_estimator", "`", "error", "messages", "occur", "however", "model", "longer", "fits", "The", "loss", "decrease", "I", "made", "Stackoverflow", "question", "(", "https", "://", "stackoverflow", "com", "q", "59631744", "9988487", ")", "traction", "whatsoever", "After", "trying", "get", "work", "I", "believe", "bug", "**", "Describe", "expected", "behavior", "**", "The", "keras", "estimator", "behaviour", "underlying", "model", "Change", "USE_ESTIMATOR", "variable", "see", "underlying", "model", "works", "**", "Code", "reproduce", "issue", "**", "```", "#", "python", "3", "6", "Tested", "tensorflow", "gpu", "1", "14", "tensorflow", "cpu", "2", "0", "import", "tensorflow", "tf", "import", "numpy", "np", "def", "get_model", "(", "IM_WIDTH", "=", "28", "num_color_channels", "=", "1", "):", "\"\"\"", "Create", "simple", "convolutional", "neural", "network", "using", "tf", "keras", "Functional", "Model", ".\"\"\"", "input", "=", "tf", "keras", "Input", "(", "shape", "=(", "IM_WIDTH", "IM_WIDTH", "num_color_channels", "))", "x", "=", "tf", "keras", "layers", "Conv2D", "(", "32", "3", "activation", "='", "relu", "')(", "input", ")", "x", "=", "tf", "keras", "layers", "MaxPooling2D", "(", "3", ")(", "x", ")", "x", "=", "tf", "keras", "layers", "Conv2D", "(", "64", "3", "activation", "='", "relu", "')(", "x", ")", "x", "=", "tf", "keras", "layers", "MaxPooling2D", "(", "3", ")(", "x", ")", "x", "=", "tf", "keras", "layers", "Flatten", "()(", "x", ")", "x", "=", "tf", "keras", "layers", "Dense", "(", "64", "activation", "='", "relu", "')(", "x", ")", "output", "=", "tf", "keras", "layers", "Dense", "(", "1", "activation", "='", "linear", "')(", "x", ")", "model", "=", "tf", "keras", "Model", "(", "inputs", "=[", "input", "],", "outputs", "=[", "output", "])", "model", "compile", "(", "optimizer", "='", "adam", "',", "loss", "=\"", "mae", "\",", "metrics", "=['", "mae", "'])", "model", "summary", "()", "return", "model", "def", "input_fun", "(", "train", "=", "True", "):", "\"\"\"", "Load", "MNIST", "return", "training", "test", "set", "tf", "data", "Dataset", ";", "Valid", "input", "function", "tf", "estimator", "\"\"\"", "(", "train_images", "train_labels", "),", "(", "eval_images", "eval_labels", ")", "=", "tf", "keras", "datasets", "mnist", "load_data", "()", "train_images", "=", "train_images", "reshape", "((", "60_000", "28", "28", "1", ")).", "astype", "(", "np", "float32", ")", "255", "eval_images", "=", "eval_images", "reshape", "((", "10_000", "28", "28", "1", ")).", "astype", "(", "np", "float32", ")", "255", "#", "train_labels", "=", "train_labels", "astype", "(", "np", "float32", ")", "#", "two", "lines", "affect", "behaviour", "#", "eval_labels", "=", "eval_labels", "astype", "(", "np", "float32", ")", "#", "For", "neural", "network", "one", "neuron", "final", "layer", "seem", "matter", "target", "data", "float", "int", "train", "dataset", "=", "tf", "data", "Dataset", "from_tensor_slices", "((", "train_images", "train_labels", "))", "dataset", "=", "dataset", "shuffle", "(", "buffer_size", "=", "100", ").", "repeat", "(", "None", ").", "batch", "(", "32", ").", "prefetch", "(", "1", ")", "else", "dataset", "=", "tf", "data", "Dataset", "from_tensor_slices", "((", "eval_images", "eval_labels", "))", "dataset", "=", "dataset", "batch", "(", "32", ").", "prefetch", "(", "1", ")", "#", "note", "prefetching", "affect", "behaviour", "return", "dataset", "model", "=", "get_model", "()", "train_input_fn", "=", "lambda", "input_fun", "(", "train", "=", "True", ")", "eval_input_fn", "=", "lambda", "input_fun", "(", "train", "=", "False", ")", "NUM_EPOCHS", "STEPS_PER_EPOCH", "=", "4", "1875", "#", "1875", "=", "number_of_train_images", "(=", "60", "000", ")", "batch_size", "(=", "32", ")", "USE_ESTIMATOR", "=", "False", "#", "change", "compare", "model", "estimator", "Estimator", "performs", "much", "worse", "apparent", "reason", "USE_ESTIMATOR", "estimator", "=", "tf", "keras", "estimator", "model_to_estimator", "(", "keras_model", "=", "model", "model_dir", "=\"", "model_directory", "\",", "config", "=", "tf", "estimator", "RunConfig", "(", "save_checkpoints_steps", "=", "200", "save_summary_steps", "=", "200", "))", "train_spec", "=", "tf", "estimator", "TrainSpec", "(", "input_fn", "=", "train_input_fn", "max_steps", "=", "STEPS_PER_EPOCH", "NUM_EPOCHS", ")", "eval_spec", "=", "tf", "estimator", "EvalSpec", "(", "input_fn", "=", "eval_input_fn", "throttle_secs", "=", "0", ")", "tf", "estimator", "train_and_evaluate", "(", "estimator", "train_spec", "eval_spec", ")", "print", "(\"", "Training", "complete", "Evaluating", "Estimator", ":\")", "print", "(", "estimator", "evaluate", "(", "eval_input_fn", "))", "#", "final", "train", "loss", "estimator", "~", "2", "5", "(", "mean", "abs", "error", ").", "else", "dataset", "=", "train_input_fn", "()", "model", "fit", "(", "dataset", "steps_per_epoch", "=", "STEPS_PER_EPOCH", "epochs", "=", "NUM_EPOCHS", ")", "print", "(\"", "Training", "complete", "Evaluating", "Keras", "model", ":\")", "print", "(", "model", "evaluate", "(", "eval_input_fn", "()))", "#", "final", "train", "loss", "Keras", "model", "~", "0", "4", "(", "mean", "abs", "error", ").", "```", "**", "System", "information", "**", "Custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "Yes", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Google", "Colab", "TensorFlow", "installed", "(", "source", "binary", "):", "use", "`%", "tensorflow_version", "2", "x", "`", "TensorFlow", "version", "(", "use", "command", "):", "2", "1", "0", "rc1", "Python", "version", "3", "6", "9", "**", "Describe", "current", "behavior", "**", "I", "tried", "run", "huan", "Google", "Colab", "Notebook", "mentioned", "[", "](", "https", "://", "stackoverflow", "com", "questions", "55541881", "convert", "tf", "keras", "model", "tpu", "using", "tensorflow", "2", "0", "google", "colab", "55686370", "#", "55686370", ")", "available", "[", "](", "https", "://", "colab", "research", "google", "com", "github", "huan", "tensorflow", "handbook", "tpu", "blob", "master", "tensorflow", "handbook", "tpu", "example", "ipynb", ").", "It", "raises", "following", "error", "```", "---------------------------------------------------------------------------", "InternalError", "Traceback", "(", "recent", "call", "last", ")", "<", "ipython", "input", "7", "79d308ea228d", ">", "<", "module", ">()", "4", "steps_per_epoch", "=", "60", "5", "validation_data", "=(", "x_test", "astype", "(", "np", "float32", "),", "y_test", "astype", "(", "np", "float32", ")),", "---->", "6", "validation_freq", "=", "5", "7", ")", "8", "11", "frames", "usr", "local", "lib", "python3", "6", "dist", "packages", "six", "py", "raise_from", "(", "value", "from_value", ")", "InternalError", "Assigned", "device", "'/", "job", "worker", "replica", "0", "task", "0", "device", "TPU", "0", "registered", "OpKernel", "support", "_Arg", "[[{{", "node", "iteratorgetnext_iterator", "}}]]", "[", "Op", "__inference_distributed_function_2822", "]", "```", "I", "tried", "`", "tf", "compat", "v1", "disable_eager_execution", "()`", "discussed", "[", "](", "https", "://", "github", "com", "huan", "tensorflow", "handbook", "tpu", "issues", "1", ")", "work", "```", "---------------------------------------------------------------------------", "RuntimeError", "Traceback", "(", "recent", "call", "last", ")", "<", "ipython", "input", "15", "5118e7c1b79a", ">", "<", "module", ">()", "6", "steps_per_epoch", "=", "60", "7", "validation_data", "=(", "x_test", "astype", "(", "np", "float32", "),", "y_test", "astype", "(", "np", "float32", ")),", "---->", "8", "validation_freq", "=", "5", "9", ")", "10", "25", "frames", "tensorflow", "2", "1", "0", "python3", "6", "tensorflow_core", "python", "framework", "ops", "py", "convert_to_tensor", "(", "value", "dtype", "name", "as_ref", "preferred_dtype", "dtype_hint", "ctx", "accepted_result_types", ")", "1278", "graph", "=", "get_default_graph", "()", "1279", "graph", "building_function", "->", "1280", "raise", "RuntimeError", "(\"", "Attempting", "capture", "EagerTensor", "without", "1281", "building", "function", ".\")", "1282", "return", "graph", "capture", "(", "value", "name", "=", "name", ")", "RuntimeError", "Attempting", "capture", "EagerTensor", "without", "building", "function", "```", "**", "Describe", "expected", "behavior", "**", "Not", "sure", "huan", "example", "working", "given", "explained", "[", "stackoverflow", "](", "https", "://", "stackoverflow", "com", "questions", "55541881", "convert", "tf", "keras", "model", "tpu", "using", "tensorflow", "2", "0", "google", "colab", "55686370", "#", "55686370", "),", "I", "think", "TF", "2", "1", "0", "version", "**", "Code", "reproduce", "issue", "**", "Again", "huan", "work", "available", "[", "](", "https", "://", "colab", "research", "google", "com", "github", "huan", "tensorflow", "handbook", "tpu", "blob", "master", "tensorflow", "handbook", "tpu", "example", "ipynb", ").", "**", "Other", "info", "logs", "**", "I", "issue", "personal", "code", "thought", "first", "due", "`", "ImageDataGenerator", "`", "(", "see", "last", "comment", "[", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "issues", "34346", ")),", "however", "seems", "huan", "example", "use", "I", "issue", "huan", "code", "TF", "2", "1", "0", "installed", "`!", "pip", "install", "tensorflow", "==", "2", "1", "0", "`", "notebook", "**", "System", "information", "**", "Have", "I", "written", "custom", "code", "(", "opposed", "using", "stock", "example", "script", "provided", "TensorFlow", "):", "yes", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Windows", "10", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "TensorFlow", "installed", "(", "source", "binary", "):", "pip", "TensorFlow", "version", "(", "use", "command", "):", "v2", "0", "0", "rc2", "26", "g64c3d382ca", "2", "0", "0", "Python", "version", "3", "6", "9", "Bazel", "version", "(", "compiling", "source", "):", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "CUDA", "cuDNN", "version", "10", "0", "7", "6", "2", "GPU", "model", "memory", "GeForce", "GTX", "1070", "GeForce", "GTX", "1080", "**", "Describe", "current", "behavior", "**", "Crash", "writing", "Checkpoint", "(", "stuck", "writing", "log", "tensorboard", ")", "**", "Describe", "expected", "behavior", "**", "Write", "checkpoint", "Tensorboardlog", "**", "Code", "reproduce", "issue", "**", "```", "os", "environ", "['", "TF_CONFIG", "']", "=", "json", "dumps", "({", "cluster", "':", "{", "worker", "\":", "[\"", "10", "10", "1", "168", "1234", "\"],", "chief", "':", "[\"", "10", "10", "1", "60", "2345", "\"]", "},", "task", "':", "{'", "type", "':", "chief", "',", "index", "':", "0", "}", "})", "strategy", "=", "tf", "distribute", "experimental", "MultiWorkerMirroredStrategy", "()", "def", "get_label", "(", "file_path", "class_names", "):", "parts", "=", "tf", "strings", "split", "(", "file_path", "os", "path", "sep", ")", "return", "parts", "[-", "2", "]", "==", "class_names", "def", "parse_image", "(", "filename", "):", "parts", "=", "tf", "strings", "split", "(", "filename", "\"\\\\\")", "label", "=", "get_label", "(", "filename", "CLASS_NAMES", ")", "image", "=", "tf", "io", "read_file", "(", "filename", ")", "image", "=", "tf", "image", "decode_png", "(", "image", "channels", "=", "3", ")", "image", "=", "tf", "image", "convert_image_dtype", "(", "image", "tf", "float32", ")", "image", "=", "tf", "image", "resize", "(", "image", "[", "299", "299", "])", "return", "image", "label", "def", "make_dataset_unbatched", "():", "images_ds", "=", "list_ds", "map", "(", "parse_image", "num_parallel_calls", "=", "AUTOTUNE", ")", "images_ds", "=", "images_ds", "shuffle", "(", "BATCH_SIZE", ")", "images_ds", "=", "images_ds", "repeat", "(", "epochs", ")", "images_ds", "=", "images_ds", "prefetch", "(", "BUFFER_SIZE", ")", "return", "images_ds", "datasetFilePath", "=", "D", ":\\", "TrainData", "\\", "BalancedData", "IMAGESIZE", "=", "299", "AUTOTUNE", "=", "tf", "data", "experimental", "AUTOTUNE", "datasetPath", "=", "pathlib", "Path", "(", "datasetFilePath", ")", "list_ds", "=", "tf", "data", "Dataset", "list_files", "(", "str", "(", "datasetPath", "/\"*/*\"))", "num_elements", "=", "tf", "data", "experimental", "cardinality", "(", "list_ds", ").", "numpy", "()", "CLASS_NAMES", "=", "np", "array", "([", "item", "name", "item", "datasetPath", "glob", "('*')])", "epochs", "=", "2", "def", "build_and_compile_model", "():", "base_model", "=", "tf", "keras", "applications", "InceptionV3", "(", "include_top", "=", "False", "weights", "=", "imagenet", "\",", "input_shape", "=(", "299", "299", "3", "))", "base_model", "trainable", "=", "True", "x", "=", "base_model", "output", "x", "=", "tf", "keras", "layers", "GlobalAveragePooling2D", "(", "name", "=\"", "avg_pool", "\")(", "x", ")", "x", "=", "tf", "keras", "layers", "Dense", "(", "256", "activation", "=\"", "relu", "\")(", "x", ")", "predictions", "=", "tf", "keras", "layers", "Dense", "(", "2", "activation", "=\"", "softmax", "\")(", "x", ")", "model", "=", "tf", "keras", "models", "Model", "(", "inputs", "=", "base_model", "input", "outputs", "=", "predictions", ")", "base_learning_rate", "=", "0", "00001", "model", "compile", "(", "optimizer", "=", "tf", "keras", "optimizers", "Adam", "(", "lr", "=", "base_learning_rate", "),", "loss", "=\"", "categorical_crossentropy", "\",", "metrics", "=[\"", "accuracy", "\"])", "return", "model", "logdir", "=", "os", "path", "join", "(\"", "Z", ":\\", "Tensorflow", "\\", "TensorboardLogs", "\",", "datetime", "datetime", "().", "strftime", "(\"%", "Y", "%", "%", "-%", "H", "%", "M", "%", "S", "\"))", "callbacks", "=", "[", "tf", "keras", "callbacks", "ModelCheckpoint", "(", "filepath", "=\"", "Z", ":\\", "Tensorflow", "\\", "Checkpoints", "\"),", "tf", "keras", "callbacks", "TensorBoard", "(", "logdir", "histogram_freq", "=", "1", ")]", "strategy", "scope", "():", "dataset", "=", "make_dataset_unbatched", "().", "batch", "(", "BATCH_SIZE", "drop_remainder", "=", "True", ")", "multi_worker_model", "=", "build_and_compile_model", "()", "history", "=", "multi_worker_model", "fit", "(", "dataset", "epochs", "=", "epochs", "steps_per_epoch", "=", "50", "callbacks", "=", "callbacks", ")", "```", "**", "Other", "info", "logs", "**", "[", "ckpt_error", "txt", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "files", "4040557", "ckpt_error", "txt", ")", "This", "log", "happens", "checkpoint", "code", "tensorboard", "log", "checkpoint", "chief", "stops", "right", "end", "first", "epoch", "nothing", "else", "happens", "I", "hope", "someone", "help", "<", "em", ">", "Please", "make", "sure", "build", "installation", "issue", "As", "per", "[", "GitHub", "Policy", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "master", "ISSUES", "md", "),", "address", "code", "doc", "bugs", "performance", "issues", "feature", "requests", "build", "installation", "issues", "GitHub", "tag", "build_template", "</", "em", ">", "**", "System", "information", "**", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "Windows", "10", "Mobile", "device", "(", "e", "g", "iPhone", "8", "Pixel", "2", "Samsung", "Galaxy", ")", "issue", "happens", "mobile", "device", "TensorFlow", "installed", "(", "source", "binary", "):", "source", "TensorFlow", "version", "2", "0", "0", "Python", "version", "3", "6", "4", "Installed", "using", "virtualenv", "pip", "conda", "pip", "Bazel", "version", "(", "compiling", "source", "):", "0", "26", "1", "GCC", "Compiler", "version", "(", "compiling", "source", "):", "CUDA", "cuDNN", "version", "10", "7", "GPU", "model", "memory", "NVIDIA", "GeForce", "MX150", "**", "Describe", "problem", "**", "I", "trying", "build", "tensorflow", "AVX2", "instructions", "CPU", "increase", "speeds", "bazel", "keeps", "failing", "loading", "tensorflow", "**", "Provide", "exact", "sequence", "commands", "steps", "executed", "running", "problem", "**", "1", "Cloned", "tensorflow", "source", "github", "checked", "r2", "0", "branch", "2", "Ran", "python", "./", "configure", "py", "3", "Proceded", "steps", "selecting", "builds", "set", "bazel", "config", "option", "arch", "AVC2", "4", "Ran", "bazel", "build", "--", "config", "=", "opt", "tensorflow", "tools", "pip_package", "build_pip_package", "**", "Any", "info", "logs", "**", "Include", "logs", "source", "code", "would", "helpful", "diagnose", "problem", "If", "including", "tracebacks", "please", "include", "full", "traceback", "Large", "logs", "files", "attached", "The", "error", "text", "attached", "[", "error", "txt", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "files", "4032375", "error", "txt", ")", "**", "System", "information", "**", "Custom", "implementation", "ALBERT", "TF2", "0", "Training", "DataBricks", "TensorFlow", "installed", "(", "source", "binary", "):", "Binary", "pypi", "TensorFlow", "version", "(", "use", "command", "):", "2", "0", "gpu", "Python", "version", "3", "7", "CUDA", "cuDNN", "version", "10", "1", "GPU", "model", "memory", "Databricks", "4xGPU", "cluster", "X8", "**", "Describe", "current", "behavior", "**", "Current", "behavior", "Training", "proceeds", "3", "epochs", "barfs", "Train", "Step", "399", "1330", "_save_checkpoint", "routine", "We", "using", "ADLSgen2", "store", "data", "mounting", "filesystem", "Filesystem", "works", "transparently", "tasks", "far", "&", "DataBricks", "team", "support", "There", "many", "read", "writes", "mount", "point", "I", "quick", "blame", "filesystem", "still", "worth", "noting", "The", "actual", "error", "2020", "01", "03", "20", "51", "34", "688654", "W", "tensorflow", "core", "framework", "op_kernel", "cc", "1622", "]", "OP_REQUIRES", "failed", "save_restore_v2_ops", "cc", "137", "Invalid", "argument", "dbfs", "mnt", "devscoutprototype", "eval_out", "checkpoint", "ctl_step_399", "ckpt", "3_temp_08f0418651184fbd97263e13fc11b45c", "part", "00001", "00002", "data", "00000", "00001", "tempstate9461307533243821894", ";", "Invalid", "argument", "When", "navigate", "location", "find", "folder", "genuinely", "however", "inside", "folder", "temp", "file", "Instead", "two", "files", "1", ")", "part", "00000", "00002", "data", "00000", "00001", "2", ")", "part", "00000", "00002", "index", "**", "Describe", "expected", "behavior", "**", "I", "would", "expect", "see", "new", "checkpoint", "step", "**", "Code", "reproduce", "issue", "**", "This", "made", "following", "examples", "https", "://", "github", "com", "kamalkraj", "ALBERT", "TF2", "0", "If", "simply", "run", "example", "top", "bottom", "DataBricks", "encounter", "error", "**", "Other", "info", "logs", "**", "loss", "=", "0", "2804690897464752", "I0103", "20", "48", "47", "790678", "140033029736192", "model_training_utils", "py", "346", "]", "Train", "Step", "396", "1330", "loss", "=", "0", "3561434745788574", "I0103", "20", "48", "50", "499201", "140033029736192", "model_training_utils", "py", "346", "]", "Train", "Step", "397", "1330", "loss", "=", "0", "26206889748573303", "I0103", "20", "48", "53", "168039", "140033029736192", "model_training_utils", "py", "346", "]", "Train", "Step", "398", "1330", "loss", "=", "0", "3312344551086426", "I0103", "20", "48", "55", "838387", "140033029736192", "model_training_utils", "py", "346", "]", "Train", "Step", "399", "1330", "loss", "=", "0", "41013699769973755", "2020", "01", "03", "20", "51", "34", "688654", "W", "tensorflow", "core", "framework", "op_kernel", "cc", "1622", "]", "OP_REQUIRES", "failed", "save_restore_v2_ops", "cc", "137", "Invalid", "argument", "dbfs", "mnt", "devscoutprototype", "eval_out", "checkpoint", "ctl_step_399", "ckpt", "3_temp_08f0418651184fbd97263e13fc11b45c", "part", "00001", "00002", "data", "00000", "00001", "tempstate9461307533243821894", ";", "Invalid", "argument", "Traceback", "(", "recent", "call", "last", "):", "File", "\"/", "dbfs", "mnt", "devscoutprototype", "ALBERT", "TF2", "0", "master", "run_classifer", "py", "\",", "line", "455", "<", "module", ">", "app", "run", "(", "main", ")", "File", "\"/", "databricks", "conda", "envs", "databricks", "ml", "gpu", "lib", "python3", "7", "site", "packages", "absl", "app", "py", "\",", "line", "299", "run", "_run_main", "(", "main", "args", ")", "File", "\"/", "databricks", "conda", "envs", "databricks", "ml", "gpu", "lib", "python3", "7", "site", "packages", "absl", "app", "py", "\",", "line", "250", "_run_main", "sys", "exit", "(", "main", "(", "argv", "))", "File", "\"/", "dbfs", "mnt", "devscoutprototype", "ALBERT", "TF2", "0", "master", "run_classifer", "py", "\",", "line", "356", "main", "custom_callbacks", "=", "custom_callbacks", ")", "File", "\"/", "dbfs", "mnt", "devscoutprototype", "ALBERT", "TF2", "0", "master", "model_training_utils", "py", "\",", "line", "354", "run_customized_training_loop", "checkpoint_name", "format", "(", "step", "=", "current_step", "))", "File", "\"/", "dbfs", "mnt", "devscoutprototype", "ALBERT", "TF2", "0", "master", "model_training_utils", "py", "\",", "line", "33", "_save_checkpoint", "saved_path", "=", "checkpoint", "save", "(", "checkpoint_path", ")", "File", "\"/", "databricks", "conda", "envs", "databricks", "ml", "gpu", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "training", "tracking", "util", "py", "\",", "line", "1889", "save", "file_path", "=", "self", "write", "(\"%", "-%", "%", "(", "file_prefix", "checkpoint_number", "))", "File", "\"/", "databricks", "conda", "envs", "databricks", "ml", "gpu", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "training", "tracking", "util", "py", "\",", "line", "1819", "write", "output", "=", "self", "_saver", "save", "(", "file_prefix", "=", "file_prefix", ")", "File", "\"/", "databricks", "conda", "envs", "databricks", "ml", "gpu", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "training", "tracking", "util", "py", "\",", "line", "1155", "save", "file_prefix", "=", "file_prefix_tensor", "object_graph_tensor", "=", "object_graph_tensor", ")", "File", "\"/", "databricks", "conda", "envs", "databricks", "ml", "gpu", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "training", "tracking", "util", "py", "\",", "line", "1103", "_save_cached_when_graph_building", "save_op", "=", "saver", "save", "(", "file_prefix", ")", "File", "\"/", "databricks", "conda", "envs", "databricks", "ml", "gpu", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "training", "saving", "functional_saver", "py", "\",", "line", "230", "save", "sharded_saves", "append", "(", "saver", "save", "(", "shard_prefix", "))", "File", "\"/", "databricks", "conda", "envs", "databricks", "ml", "gpu", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "training", "saving", "functional_saver", "py", "\",", "line", "72", "save", "return", "io_ops", "save_v2", "(", "file_prefix", "tensor_names", "tensor_slices", "tensors", ")", "File", "\"/", "databricks", "conda", "envs", "databricks", "ml", "gpu", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "ops", "gen_io_ops", "py", "\",", "line", "1933", "save_v2", "ctx", "=", "_ctx", ")", "File", "\"/", "databricks", "conda", "envs", "databricks", "ml", "gpu", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "ops", "gen_io_ops", "py", "\",", "line", "1970", "save_v2_eager_fallback", "ctx", "=", "_ctx", "name", "=", "name", ")", "File", "\"/", "databricks", "conda", "envs", "databricks", "ml", "gpu", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "eager", "execute", "py", "\",", "line", "67", "quick_execute", "six", "raise_from", "(", "core", "_status_to_exception", "(", "e", "code", "message", "),", "None", ")", "File", "\"<", "string", ">\",", "line", "3", "raise_from", "tensorflow", "python", "framework", "errors_impl", "InvalidArgumentError", "dbfs", "mnt", "devscoutprototype", "eval_out", "checkpoint", "ctl_step_399", "ckpt", "3_temp_08f0418651184fbd97263e13fc11b45c", "part", "00001", "00002", "data", "00000", "00001", "tempstate9461307533243821894", ";", "Invalid", "argument", "[", "Op", "SaveV2", "]", "---------------------------------------------------------------------------", "CalledProcessError", "Traceback", "(", "recent", "call", "last", ")", "<", "command", "1805221645764486", ">", "<", "module", ">", "---->", "1", "get_ipython", "().", "run_cell_magic", "('", "sh", "',", "'',", "\"\\", "n", "#", "Running", "classifier", ":\\", "n", "\\", "nexport", "GLUE_DIR", "='/", "dbfs", "mnt", "devscoutprototype", "dataset", "/'\\", "nexport", "ALBERT_DIR", "='/", "dbfs", "mnt", "devscoutprototype", "models", "base_2", "/'\\", "nexport", "TASK_NAME", "='", "CoLA", "'\\", "nexport", "OUTPUT_DIR", "='/", "dbfs", "mnt", "devscoutprototype", "train_out", "'\\", "nexport", "MODEL_DIR", "='/", "dbfs", "mnt", "devscoutprototype", "eval_out", "/'\\", "n", "\\", "npython", "dbfs", "mnt", "devscoutprototype", "ALBERT", "TF2", "0", "master", "run_classifer", "py", "--", "train_data_path", "=${", "OUTPUT_DIR", "}/${", "TASK_NAME", "}", "_train", "tf_record", "--", "eval_data_path", "=${", "OUTPUT_DIR", "}/${", "TASK_NAME", "}", "_eval", "tf_record", "--", "input_meta_data_path", "=${", "OUTPUT_DIR", "}/${", "TASK_NAME", "}", "_meta_data", "--", "init_checkpoint", "=${", "ALBERT_DIR", "}/", "tf2_model", "h5", "--", "spm_model_file", "=${", "ALBERT_DIR", "}/", "vocab", "30k", "clean", "model", "--", "albert_config_file", "=${", "ALBERT_DIR", "}/", "config", "json", "--", "output_dir", "=${", "MODEL_DIR", "}", "--", "do_train", "--", "task_name", "=${", "TASK_NAME", "}", "--", "do_eval", "--", "custom_training_loop", "--", "train_batch_size", "=", "64", "--", "learning_rate", "=", "1e", "5", "--", "num_train_epochs", "=", "10", "\\", "n", "\")", "databricks", "python", "lib", "python3", "7", "site", "packages", "IPython", "core", "interactiveshell", "py", "run_cell_magic", "(", "self", "magic_name", "line", "cell", ")", "2350", "self", "builtin_trap", "2351", "args", "=", "(", "magic_arg_s", "cell", ")", "->", "2352", "result", "=", "fn", "(*", "args", "**", "kwargs", ")", "2353", "return", "result", "2354", "databricks", "python", "lib", "python3", "7", "site", "packages", "IPython", "core", "magics", "script", "py", "named_script_magic", "(", "line", "cell", ")", "140", "else", "141", "line", "=", "script", "-->", "142", "return", "self", "shebang", "(", "line", "cell", ")", "143", "144", "#", "write", "basic", "docstring", "</", "databricks", "python", "lib", "python3", "7", "site", "packages", "decorator", "py", "decorator", "gen", "110", ">", "shebang", "(", "self", "line", "cell", ")", "databricks", "python", "lib", "python3", "7", "site", "packages", "IPython", "core", "magic", "py", "<", "lambda", ">(", "f", "**", "k", ")", "185", "#", "overkill", "one", "bit", "state", "186", "def", "magic_deco", "(", "arg", "):", "-->", "187", "call", "=", "lambda", "f", "**", "k", "f", "(*", "**", "k", ")", "188", "189", "callable", "(", "arg", "):", "databricks", "python", "lib", "python3", "7", "site", "packages", "IPython", "core", "magics", "script", "py", "shebang", "(", "self", "line", "cell", ")", "243", "sys", "stderr", "flush", "()", "244", "args", "raise_error", "p", "returncode", "!=", "0", "-->", "245", "raise", "CalledProcessError", "(", "p", "returncode", "cell", "output", "=", "stderr", "=", "err", ")", "246", "247", "def", "_run_script", "(", "self", "p", "cell", "to_close", "):", "CalledProcessError", "Command", "b", "\"\\", "n", "#", "Running", "classifier", ":\\", "n", "\\", "nexport", "GLUE_DIR", "='/", "dbfs", "mnt", "devscoutprototype", "dataset", "/'\\", "nexport", "ALBERT_DIR", "='/", "dbfs", "mnt", "devscoutprototype", "models", "base_2", "/'\\", "nexport", "TASK_NAME", "='", "CoLA", "'\\", "nexport", "OUTPUT_DIR", "='/", "dbfs", "mnt", "devscoutprototype", "train_out", "'\\", "nexport", "MODEL_DIR", "='/", "dbfs", "mnt", "devscoutprototype", "eval_out", "/'\\", "n", "\\", "npython", "dbfs", "mnt", "devscoutprototype", "ALBERT", "TF2", "0", "master", "run_classifer", "py", "Got", "following", "error", "output", "Databricks", ";", "exported", "notebook", "attached", "file", ";", "error", "occurs", "cell", "10", "INFO", "tensorflow", "Converted", "call", "<", "function", "read", ".<", "locals", ">.<", "lambda", ">", "0x7fbde97eae18", ">", "args", "(<", "tf", "Tensor", "args_0", "0", "shape", "=()", "dtype", "=", "string", ">,)", "kwargs", "{}", "INFO", "tensorflow", "Not", "whitelisted", "<", "method", "wrapper", "__call__", "function", "object", "0x7fbde97eae18", ">:", "default", "rule", "INFO", "tensorflow", "Not", "whitelisted", "<", "function", "read", ".<", "locals", ">.<", "lambda", ">", "0x7fbde97eae18", ">:", "default", "rule", "INFO", "tensorflow", "Entity", "<", "function", "read", ".<", "locals", ">.<", "lambda", ">", "0x7fbde97eae18", ">", "cached", "key", "<", "code", "object", "<", "lambda", ">", "0x7fbde9888f60", "file", "\"<", "command", "608347", ">\",", "line", "138", ">", "subkey", "(<", "tensorflow", "python", "autograph", "core", "converter", "ConversionOptions", "object", "0x7fbdddf7c0b8", ">,", "frozenset", "({'", "mean", "',", "var", "'}))", "INFO", "tensorflow", "Converting", "<", "function", "read", ".<", "locals", ">.<", "lambda", ">", "0x7fbde97eae18", ">", "INFO", "tensorflow", "Error", "transforming", "entity", "<", "function", "read", ".<", "locals", ">.<", "lambda", ">", "0x7fbde97eae18", ">", "Traceback", "(", "recent", "call", "last", "):", "File", "\"/", "databricks", "python", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "autograph", "pyct", "parser", "py", "\",", "line", "78", "parse_entity", "return", "parse_str", "(", "source", "preamble_len", "=", "len", "(", "future_features", ")),", "source", "File", "\"/", "databricks", "python", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "autograph", "pyct", "parser", "py", "\",", "line", "139", "parse_str", "module_node", "=", "gast", "parse", "(", "src", ")", "File", "\"/", "databricks", "python", "lib", "python3", "7", "site", "packages", "gast", "gast", "py", "\",", "line", "240", "parse", "return", "ast_to_gast", "(", "_ast", "parse", "(*", "args", "**", "kwargs", "))", "File", "\"/", "usr", "lib", "python3", "7", "ast", "py", "\",", "line", "35", "parse", "return", "compile", "(", "source", "filename", "mode", "PyCF_ONLY_AST", ")", "File", "\"<", "unknown", ">\",", "line", "4", "map", "(", "lambda", "x", "decode", "(", "x", "mean", "var", "))", "^", "SyntaxError", "invalid", "syntax", "During", "handling", "exception", "another", "exception", "occurred", "Traceback", "(", "recent", "call", "last", "):", "File", "\"/", "databricks", "python", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "autograph", "impl", "api", "py", "\",", "line", "506", "converted_call", "converted_f", "=", "conversion", "convert", "(", "target_entity", "program_ctx", ")", "File", "\"/", "databricks", "python", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "autograph", "impl", "conversion", "py", "\",", "line", "322", "convert", "free_nonglobal_var_names", ")", "File", "\"/", "databricks", "python", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "autograph", "impl", "conversion", "py", "\",", "line", "240", "_convert_with_cache", "entity", "program_ctx", ")", "File", "\"/", "databricks", "python", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "autograph", "impl", "conversion", "py", "\",", "line", "469", "convert_entity_to_ast", "nodes", "name", "entity_info", "=", "convert_func_to_ast", "(", "program_ctx", ")", "File", "\"/", "databricks", "python", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "autograph", "impl", "conversion", "py", "\",", "line", "630", "convert_func_to_ast", "node", "source", "=", "parser", "parse_entity", "(", "f", "future_features", "=", "future_features", ")", "File", "\"/", "databricks", "python", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "autograph", "pyct", "parser", "py", "\",", "line", "118", "parse_entity", "return", "parse_str", "(", "source", "preamble_len", "=", "len", "(", "future_features", ")),", "source", "File", "\"/", "databricks", "python", "lib", "python3", "7", "site", "packages", "tensorflow_core", "python", "autograph", "pyct", "parser", "py", "\",", "line", "145", "parse_str", "raise", "ValueError", "('", "expected", "exactly", "one", "node", "node", "found", "{}'.", "format", "(", "nodes", "))", "ValueError", "expected", "exactly", "one", "node", "node", "found", "[]", "WARNING", "tensorflow", "Entity", "<", "function", "read", ".<", "locals", ">.<", "lambda", ">", "0x7fbde97eae18", ">", "could", "transformed", "executed", "Please", "report", "AutoGraph", "team", "When", "filing", "bug", "set", "verbosity", "10", "(", "Linux", "`", "export", "AUTOGRAPH_VERBOSITY", "=", "10", "`)", "attach", "full", "output", "Cause", "expected", "exactly", "one", "node", "node", "found", "[]", "[", "v2_compute_ndcg_geov4", "02", "ipynb", "zip", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "files", "4011226", "v2_compute_ndcg_geov4", "02", "ipynb", "zip", ")", "Added", "usage", "examples", "tf", "math", "(", "subtract", "scalar_mul", "truediv", "divide_no_nan", "multiply_no_nan", "floordiv", "reduce_prod", "reduce_min", "reduce_max", "sigmoid", "log_sigmoid", "unsorted_segmentation", "unsorted_segment_sqrt_n", "polyval", ")", "**", "System", "information", "**", "OS", "Platform", "Distribution", "(", "e", "g", ".,", "Linux", "Ubuntu", "16", "04", "):", "MacOS", "10", "15", "1", "TensorFlow", "installed", "(", "source", "binary", "):", "binary", "TensorFlow", "version", "(", "github", "SHA", "source", "):", "tf", "nightly", "==", "2", "1", "0", "dev20191203", "**", "Command", "used", "run", "converter", "code", "\u2019", "using", "Python", "API", "**", "```", "import", "pathlib", "inpt", "=", "tf", "keras", "layers", "Input", "(", "shape", "=[", "256", "256", "3", "])", "=", "tf", "keras", "layers", "Lambda", "(", "lambda", "x", "tf", "keras", "activations", "softmax", "(", "x", "))(", "inpt", ")", "=", "tf", "keras", "layers", "Lambda", "(", "lambda", "x", "tf", "nn", "softmax", "(", "x", "))(", ")", "model", "=", "tf", "keras", "Model", "(", "inpt", ")", "converter", "=", "tf", "lite", "TFLiteConverter", "from_keras_model", "(", "model", ")", "tflite_model", "=", "converter", "convert", "()", "pathlib", "Path", "('", "tflite", "').", "write_bytes", "(", "tflite_model", ")", "```", "**", "Failure", "details", "**", "[", "image", "](", "https", "://", "user", "images", "githubusercontent", "com", "1422280", "71025023", "3904e880", "20d4", "11ea", "95fb", "29cfea49a44d", "png", ")", "This", "graph", "shows", "difference", "different", "softmax", "methods", "When", "using", "`", "tf", "keras", "activations", "softmax", "`,", "[", "code", "](", "https", "://", "github", "com", "tensorflow", "tensorflow", "blob", "v2", "1", "0", "rc1", "tensorflow", "python", "keras", "activations", "py", "#", "L43", "L79", ")", "workaround", "multiple", "dimensions", "It", "looks", "like", "written", "tensorflow", "op", "multi", "dimension", "support", "We", "feedback", "multiple", "developers", "hard", "figure", "calculate", "right", "int8", "values", "quantized", "inputs", "understand", "int8", "values", "mean", "outputs", "For", "example", "feeding", "image", "uint8", "quantized", "inputs", "values", "left", "source", "0", "255", "range", "For", "int8", "inputs", "developer", "typically", "need", "subtract", "128", "value", "knowledge", "(", "offset", "value", "calculated", ")", "documented", "In", "way", "users", "need", "map", "128", "127", "output", "values", "actual", "real", "number", "range", "outputs", "process", "unclear", "Tagging", "tensorflow", "micro", "team"]}